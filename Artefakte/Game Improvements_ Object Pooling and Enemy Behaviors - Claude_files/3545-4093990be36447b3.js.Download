"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3545],{89705:function(e,t,n){n.d(t,{EM:function(){return c},b8:function(){return d}});var r=n(5362),i=n(27218),u=n(27895),l=n(13262),o=n(10228),a=n(77930);let c=()=>{let{account:e,activeOrganization:t}=(0,i.t)(),n=null==e?void 0:e.uuid,c=null==t?void 0:t.uuid,{addError:d}=(0,u.e)(),s=(0,a.useQueryClient)();return(0,r.uC)("/api/organizations/".concat(c,"/sync/mcp/drive/ingest"),"POST",{onSuccess:()=>{setTimeout(()=>{s.invalidateQueries({queryKey:[l.dY,{orgUuid:c,accountUuid:n,syncSourceType:o.Fg.GDRIVE}]})},300)},onError:e=>{d(e)}})},d=()=>{let{activeOrganization:e}=(0,i.t)(),t=null==e?void 0:e.uuid,{addError:n}=(0,u.e)(),c=(0,a.useQueryClient)();return(0,r.uC)("/api/organizations/".concat(t,"/sync/ingestion/gdrive/clean_up"),"POST",{onSuccess:()=>{c.invalidateQueries({queryKey:[l.dY,{orgUuid:t,syncSourceType:o.Fg.GDRIVE}]})},onError:e=>{n(e)}})}},95899:function(e,t,n){n.d(t,{ER:function(){return v},Kf:function(){return c},Zy:function(){return y},h4:function(){return p},i9:function(){return a},op:function(){return f},pK:function(){return g},tR:function(){return d},u3:function(){return s}});var r=n(5362),i=n(27218),u=n(30947),l=n(13262),o=n(77930);let a="[ANT ONLY] synced_resources.txt";function c(e){let{activeOrganization:t}=(0,i.t)(),n=null==t?void 0:t.uuid,{data:u,...o}=(0,r.WE)("/api/organizations/".concat(n,"/projects/").concat(e,"/docs"),{queryKey:[l.zy,{orgUuid:n,projectUuid:e}],enabled:!!t&&!!e});return{data:null==u?void 0:u.filter(e=>{let{file_name:t,content:n}=e;return t.length>0&&n.length>0}).filter(e=>{let{file_name:t}=e;return t!==a}),unfilteredData:u,...o}}let d=e=>{let{projectUuid:t,docUuid:n}=e,{activeOrganization:o}=(0,i.t)(),a=null==o?void 0:o.uuid;return(0,r.WE)("/api/organizations/".concat(a,"/projects/").concat(t,"/docs/").concat(n),{queryKey:[l.tt,{orgUuid:a,projectUuid:t,docUuid:n}],enabled:!!o,staleTime:0,meta:{noToast:e=>e instanceof u.Hx&&404===e.statusCode}})};function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{activeOrganization:n}=(0,i.t)(),u=null==n?void 0:n.uuid,a=(0,o.useQueryClient)();return(0,r.uC)(()=>"/api/organizations/".concat(u,"/projects/").concat(e,"/docs"),"POST",{enabled:!!e,onSuccess:function(){for(var n,r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];a.invalidateQueries({queryKey:[l.zy,{orgUuid:u,projectUuid:e}]}),a.invalidateQueries({queryKey:[l.n$,{orgUuid:u}]}),a.invalidateQueries({queryKey:[l.VH,{orgUUID:u}]}),null===(n=t.onSuccess)||void 0===n||n.call(t,...i)},onError:function(){for(var e,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];null===(e=t.onError)||void 0===e||e.call(t,...r)}})}function v(e){let{activeOrganization:t}=(0,i.t)(),n=null==t?void 0:t.uuid,u=(0,o.useQueryClient)();return(0,r.Ne)(t=>"/api/organizations/".concat(n,"/projects/").concat(e,"/docs/").concat(t.docUuid),"DELETE",(e,t)=>t?t.filter(t=>t.uuid!==e.docUuid):t,{queryKey:[l.zy,{orgUuid:n,projectUuid:e}],enabled:!!e,onSuccess:(t,r)=>{u.invalidateQueries({queryKey:[l.tt,{orgUuid:n,projectUuid:e,docUuid:r.docUuid}]}),u.invalidateQueries({queryKey:[l.zy,{orgUuid:n,projectUuid:e}]}),u.invalidateQueries({queryKey:[l.n$,{orgUuid:n}]}),u.invalidateQueries({queryKey:[l.VH,{orgUUID:n}]})}})}let f=e=>{let{activeOrganization:t}=(0,i.t)(),n=null==t?void 0:t.uuid,u=(0,o.useQueryClient)();return(0,r.Ne)(()=>"/api/organizations/".concat(n,"/projects/").concat(e,"/docs/delete_many"),"POST",(e,t)=>t?t.filter(t=>!e.doc_uuids.includes(t.uuid)):t,{queryKey:[l.zy,{orgUuid:n,projectUuid:e}],enabled:!!e,onSuccess:(t,r)=>{for(let t of r.doc_uuids)u.invalidateQueries({queryKey:[l.tt,{orgUuid:n,projectUuid:e,docUuid:t}]});u.invalidateQueries({queryKey:[l.zy,{orgUuid:n,projectUuid:e}]}),u.invalidateQueries({queryKey:[l.n$,{orgUuid:n}]}),u.invalidateQueries({queryKey:[l.VH,{orgUUID:n}]})}})};function y(e){let{activeOrganization:t}=(0,i.t)(),n=null==t?void 0:t.uuid,u=(0,o.useQueryClient)();return(0,r.Ne)(t=>"/api/organizations/".concat(n,"/projects/").concat(e,"/docs/").concat(t.docUuid),"PUT",(e,t)=>t?t.map(t=>t.uuid===e.docUuid?{...t,...e}:t):t,{queryKey:[l.zy,{orgUuid:n,projectUuid:e}],enabled:!!e,onSuccess:(t,r)=>{u.invalidateQueries({queryKey:[l.tt,{orgUuid:n,projectUuid:e,docUuid:r.docUuid}]}),u.invalidateQueries({queryKey:[l.zy,{orgUuid:n,projectUuid:e}]}),u.invalidateQueries({queryKey:[l.n$,{orgUuid:n}]}),u.invalidateQueries({queryKey:[l.VH,{orgUUID:n}]})}})}function p(e){let{activeOrganization:t}=(0,i.t)(),n=null==t?void 0:t.uuid,u=(0,o.useQueryClient)();return(0,r.Ne)(()=>"/api/organizations/".concat(n,"/projects/").concat(e,"/files/delete_many"),"POST",(e,t)=>t?t.filter(t=>!e.file_uuids.includes(t.file_uuid)):t,{queryKey:[l.jb,{orgUuid:n,projectUuid:e}],enabled:!!e,onSuccess:()=>{u.invalidateQueries({queryKey:[l.jb,{orgUuid:n,projectUuid:e}]}),u.invalidateQueries({queryKey:[l.n$,{orgUuid:n}]}),u.invalidateQueries({queryKey:[l.VH,{orgUUID:n}]})}})}function g(e){let{activeOrganization:t}=(0,i.t)(),n=null==t?void 0:t.uuid;return(0,r.WE)("/api/organizations/".concat(n,"/projects/").concat(e,"/files"),{queryKey:[l.jb,{orgUuid:n,projectUuid:e}],enabled:!!t&&!!e})}},92676:function(e,t,n){n.d(t,{AQ:function(){return p},IP:function(){return v},gr:function(){return c},l2:function(){return d},yg:function(){return f},zB:function(){return s}});var r=n(5362),i=n(27218),u=n(14448),l=n(13262),o=n(77930),a=n(19132);let c=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{activeOrganization:n}=(0,i.t)(),u=null==n?void 0:n.uuid,l=y(),o=(0,a.gb)();return(0,r.uC)(()=>"/api/organizations/".concat(u,"/projects/").concat(e,"/syncs"),"POST",{enabled:!!(n&&e),...t,onSuccess:function(){for(var n,r=arguments.length,i=Array(r),u=0;u<r;u++)i[u]=arguments[u];l(e),null===(n=t.onSuccess)||void 0===n||n.call(t,...i)},onError:function(){for(var e,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];null===(e=t.onError)||void 0===e||e.call(t,...r);let[u,l]=r;o(u,l)}})},d=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{activeOrganization:n}=(0,i.t)(),u=null==n?void 0:n.uuid,l=y();return(0,r.uC)(()=>"/api/organizations/".concat(u,"/projects/").concat(e,"/syncs"),"PUT",{enabled:!!(n&&e),...t,onSuccess:function(){for(var n,r=arguments.length,i=Array(r),u=0;u<r;u++)i[u]=arguments[u];l(e),null===(n=t.onSuccess)||void 0===n||n.call(t,...i)}})},s=e=>{let{activeOrganization:t}=(0,i.t)(),n=null==t?void 0:t.uuid,u=y();return(0,r.Ne)(t=>"/api/organizations/".concat(n,"/projects/").concat(e,"/syncs/").concat(t),"DELETE",(e,t)=>t?t.filter(t=>t.uuid!==e):t,{queryKey:[l.AI,{orgUuid:n,projectUuid:e}],enabled:!!t,onSuccess:()=>{u(e)}})},v=e=>{let{activeOrganization:t}=(0,i.t)(),n=null==t?void 0:t.uuid,u=y();return(0,r.Ne)(()=>"/api/organizations/".concat(n,"/projects/").concat(e,"/syncs/delete_many"),"POST",(e,t)=>t?t.filter(t=>!e.sync_source_uuids.includes(t.uuid)):t,{queryKey:[l.AI,{orgUuid:n,projectUuid:e}],enabled:!!t,onSuccess:()=>{u(e)}})},f=e=>{let{activeOrganization:t}=(0,i.t)(),{value:n}=(0,u.F)("nighthawk_enabled"),{value:o}=(0,u.F)("kingfisher_enabled"),{value:c}=(0,u.F)("spider_enabled_2"),d=null==t?void 0:t.uuid,s=(n||o||c)&&!!t&&!!e,{data:v,isLoading:f}=(0,r.WE)("/api/organizations/".concat(d,"/projects/").concat(e,"/syncs"),{queryKey:[l.AI,{orgUuid:d,projectUuid:e}],enabled:s,refetchInterval:e=>{var t;return(null===(t=e.state.data)||void 0===t?void 0:t.some(a.sf))?5e3:3e5}});return{data:v,isLoading:!!s&&f}},y=()=>{let{activeOrganization:e}=(0,i.t)(),t=null==e?void 0:e.uuid,n=(0,o.useQueryClient)();return e=>{n.invalidateQueries({queryKey:[l.AI,{orgUuid:t,projectUuid:e}]}),n.invalidateQueries({queryKey:[l.Xg,{orgUuid:t,projectUuid:e}]})}},p=e=>{let{data:t}=f(e);return!!(null==t?void 0:t.some(a.sf))}},2949:function(e,t,n){n.d(t,{$Z:function(){return Q},Aj:function(){return _},EU:function(){return M},En:function(){return w},MN:function(){return b},Mv:function(){return C},Rs:function(){return z},Xv:function(){return E},ez:function(){return U},f0:function(){return D},mD:function(){return K},nC:function(){return j},sv:function(){return N},td:function(){return q},tr:function(){return I}});var r=n(19170),i=n(5362),u=n(27218),l=n(12086),o=n(14448),a=n(13262),c=n(10228),d=n(77930),s=n(81695),v=n(7653),f=n(89705),y=n(21878),p=n(51879),g=n(22534),m=n(19132);let h="gdrive_success",b=()=>{let e=(0,u.Cf)(),{data:t}=(0,m.tc)(),n=!!(null==t?void 0:t.find(e=>e.type===c.Fg.GDRIVE&&e.enabled));return!e||n},_=()=>{let e=b(),{value:t}=(0,o.F)("kingfisher_enabled");return!!(t&&e)},x=()=>{let{account:e,activeOrganization:t}=(0,u.t)(),n=null==t?void 0:t.uuid,r=_(),{data:l,isFetched:o}=(0,i.WE)("/api/organizations/".concat(n,"/sync/mcp/drive/auth"),{queryKey:[a.Yw,{accountUUID:null==e?void 0:e.uuid,orgUUID:n}],enabled:r,staleTime:3e5});return{isAuthenticated:r&&!!(null==l?void 0:l.is_authenticated),isFetched:o}},S=e=>{let{callerIdentifier:t}=e,n=(0,s.usePathname)(),{account:r,activeOrganization:o}=(0,u.t)(),c=null==r?void 0:r.uuid,f=null==o?void 0:o.uuid,y=_(),p=(0,s.useRouter)(),g=(0,d.useQueryClient)(),b=(0,s.useSearchParams)(),{mutate:x}=(0,i.uC)("/api/organizations/".concat(f,"/sync/mcp/drive/auth/start"),"POST",{enabled:y,onSuccess:e=>{p.push(e.redirect_url)}}),S=(0,v.useRef)(!1);return()=>{if(!y)return;let e="".concat(h,"=").concat(t),r=(0,m.LZ)({pathname:n,searchParams:b,queryString:e});if(g.invalidateQueries({queryKey:[a.Yw,{accountUUID:c,orgUUID:f}]}),(0,l.Rx)()){window.open("/settings/profile?open_in_browser=1&auth_start=gdrive&origin=".concat(r));return}S.current||(S.current=!0,x({pre_auth_state:{origin:r},redirect_uri:new URL("/connect/mcp/drive/callback",window.location.origin).toString()}))}},j=function(){let{callerIdentifier:e,handleAuthSuccess:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{isAuthenticated:n,isFetched:r}=x(),i=D(),{dropdownToOpen:u,openModal:l,clearCallerIdentifier:o}=(0,p.J)(),a=function(){let n=!(arguments.length>0)||void 0===arguments[0]||arguments[0];if(!n){null==t||t(n);return}i?(l(e),null==t||t(!1)):null==t||t(n)},c=S({callerIdentifier:e});return(0,m.BZ)({callerIdentifier:e,successParam:h,handleOpen:a}),(0,v.useEffect)(()=>{e&&u===e&&(null==t||t(!0),o())},[u,t,e,o]),{isDriveAuthenticated:n,shouldShowDriveIndexingEnablementModal:i,initDriveAuth:c,handleDriveTrigger:a,isFetched:r}},w=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{account:t,activeOrganization:n}=(0,u.t)(),r=null==t?void 0:t.uuid,l=null==n?void 0:n.uuid,o=_(),c=(0,d.useQueryClient)(),{mutate:s}=(0,f.b8)();return(0,i.uC)("/api/organizations/".concat(l,"/sync/mcp/drive/auth"),"DELETE",{enabled:!!(n&&o),...e,onSuccess:function(){for(var t,n=arguments.length,i=Array(n),u=0;u<n;u++)i[u]=arguments[u];c.invalidateQueries({queryKey:[a.Yw,{accountUUID:r,orgUUID:l}]}),s({}),null===(t=e.onSuccess)||void 0===t||t.call(e,...i)}})},C=e=>{let{documentId:t}=e,{account:n,activeOrganization:r}=(0,u.t)(),l=null==n?void 0:n.uuid,o=null==r?void 0:r.uuid,c=_(),s=(0,d.useQueryClient)(),f=(0,i.WE)("/api/organizations/".concat(o,"/sync/mcp/drive/document/").concat(t),{queryKey:[a.HI,{accountUUID:l,orgUUID:o,documentId:t}],enabled:c,meta:{noToast:!0}}),y=f.isError;return(0,v.useEffect)(()=>{y&&s.invalidateQueries({queryKey:[a.Yw,{accountUUID:l,orgUUID:o}]})},[s,y,l,o]),f};function E(e){let{uri:t}=e,{data:n,isLoading:r}=C({documentId:t});return{title:null==n?void 0:n.title,isLoading:r}}let K=e=>{let{account:t,activeOrganization:n}=(0,u.t)(),r=null==t?void 0:t.uuid,l=null==n?void 0:n.uuid,o=_(),c=(0,v.useMemo)(()=>e.map(e=>"/api/organizations/".concat(l,"/sync/mcp/drive/document/").concat(e)),[e,l]),d=(0,v.useMemo)(()=>({queryKey:e.map(e=>[a.Yp,{accountUUID:r,orgUUID:l,documentId:e}]),enabled:o,meta:{noToast:!0}}),[e,r,l,o]);return(0,i.Nl)(c,d)},q=e=>{let{account:t,activeOrganization:n}=(0,u.t)(),r=null==t?void 0:t.uuid,l=null==n?void 0:n.uuid,o=_(),c=(0,g.F7)(),{data:d,isSuccess:s,isLoading:f}=(0,i.WE)("/api/organizations/".concat(l,"/sync/mcp/drive/recents"),{queryKey:[a.s8,{accountUUID:r,orgUUID:l}],enabled:e&&o,meta:{noToast:!0}});return(0,v.useEffect)(()=>{if(s&&d){let e=d.map(e=>{let{uri:t,title:n}=e;return{uri:t,title:n}});(0,g.MU)(e)}},[s,d]),{recentDriveDocs:s?d:c,isLoading:f}},z="drive_indexing_enablement_2/11_1",Q=()=>{let{value:e}=(0,o.F)("apps_use_bananagrams");return e},U=()=>{let e=_(),t=(0,u.rW)(),{value:n}=(0,o.F)("apps_use_bananagrams");return e&&t&&n},M=e=>{var t;let{account:n}=(0,u.t)();return e?!!(null==e?void 0:null===(t=e.conversationSettings)||void 0===t?void 0:t.enabled_bananagrams):!!(null==n?void 0:n.settings.enabled_bananagrams)},I=()=>{let e=U(),t=(0,u.Cf)(),{data:n}=(0,m.tc)(),r=!!t&&!(null==n?void 0:n.find(e=>{var t;return e.type===c.Fg.GDRIVE&&e.enabled&&(null===(t=e.config)||void 0===t?void 0:t.allow_indexing)}));return e&&!r},T=()=>{let{account:e}=(0,u.t)();return!!(null==e?void 0:e.settings.enabled_gdrive_indexing)},D=()=>{let{isDismissed:e}=(0,y.K)(),t=e(z),n=I(),{isAuthenticated:r}=x();return n&&!t&&r},N=e=>{let{account:t}=(0,u.t)(),{mutate:n}=(0,r.Ck)(),i=(0,u.Cf)(),{data:l}=(0,m.tc)(),o=!!i&&!(null==l?void 0:l.find(e=>{var t;return e.type===c.Fg.GDRIVE&&e.enabled&&(null===(t=e.config)||void 0===t?void 0:t.allow_indexing)})),{mutate:a}=(0,f.EM)(),d=M(e),s=T();return{isDriveIndexingDisabledByOrg:o,isDriveSearchEnabled:d,isDriveIndexingEnabled:!o&&s,toggleDriveSearchAndIndexingEnabled:e=>{var r;let{indexingEnabled:i,searchEnabled:u,dismissBanner:l}=e;i&&a({}),n({...null==t?void 0:t.settings,...void 0!==i?{enabled_gdrive_indexing:i}:null,...void 0!==u||!0===i?{enabled_bananagrams:null!=i?i:u}:null,...l?{dismissed_claudeai_banners:[...(null==t?void 0:null===(r=t.settings)||void 0===r?void 0:r.dismissed_claudeai_banners)||[],{banner_id:z,dismissed_at:new Date().toISOString()}]}:null})}}}},74339:function(e,t,n){n.d(t,{J$:function(){return v},RS:function(){return s},Zf:function(){return d},fX:function(){return p},gQ:function(){return c},vc:function(){return f},yb:function(){return y}});var r=n(5362),i=n(27218),u=n(13262);n(10228);var l=n(77930),o=n(7653),a=n(19132);let c=e=>{let{documentId:t}=e,{account:n,activeOrganization:l}=(0,i.t)(),o=null==n?void 0:n.uuid,a=null==l?void 0:l.uuid,c=v();return(0,r.WE)("/api/organizations/".concat(a,"/sync/mcp/outline/document/").concat(t),{queryKey:[u.q2,{accountUUID:o,orgUUID:a,documentId:t}],enabled:c})},d=e=>{let{uri:t}=e,{data:n,isLoading:r}=c({documentId:t});return{title:null==n?void 0:n.title,isLoading:r}},s=e=>{let{account:t,activeOrganization:n}=(0,i.t)(),l=null==t?void 0:t.uuid,a=null==n?void 0:n.uuid,c=v(),d=(0,o.useMemo)(()=>e.map(e=>"/api/organizations/".concat(a,"/sync/mcp/outline/document/").concat(e)),[e,a]),s=(0,o.useMemo)(()=>({queryKey:e.map(e=>[u.q2,{accountUUID:l,orgUUID:a,documentId:e}]),enabled:c,meta:{noToast:!0}}),[l,e,c,a]);return(0,r.Nl)(d,s)},v=()=>{let{data:e}=(0,a.tc)();return!1},f=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{account:t,activeOrganization:n}=(0,i.t)(),l=null==n?void 0:n.uuid,o=v(),{data:a,refetch:c}=(0,r.WE)("/api/organizations/".concat(l,"/sync/mcp/outline/auth"),{queryKey:[u.Sp,{accountUUID:null==t?void 0:t.uuid,orgUUID:l}],enabled:!!(n&&o),staleTime:5e3}),{mutate:d,isPending:s}=(0,r.uC)("/api/organizations/".concat(l,"/sync/mcp/outline/auth/start"),"POST",{enabled:!!(n&&o),...e,onSuccess:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];null===(t=e.onSuccess)||void 0===t||t.call(e,...r)}});return{isOutlineAuthenticated:!!(null==a?void 0:a.is_authenticated),refetch:c,initOutlineAuth:d,isLoadingOutlineAuthInit:s}},y=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{account:t,activeOrganization:n}=(0,i.t)(),o=null==t?void 0:t.uuid,a=null==n?void 0:n.uuid,c=v(),d=(0,l.useQueryClient)();return(0,r.uC)("/api/organizations/".concat(a,"/sync/mcp/outline/auth"),"DELETE",{enabled:!!(n&&c),...e,onSuccess:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];d.invalidateQueries({queryKey:[u.Sp,{accountUUID:o,orgUUID:a}]}),null===(t=e.onSuccess)||void 0===t||t.call(e,...r)}})},p=()=>{let e=encodeURIComponent(window.location.href);window.location.href="/settings/profile?redirect_url=".concat(e,"&open_outline_auth=true")}},15350:function(e,t,n){n.d(t,{Vq:function(){return b},Z0:function(){return g},mo:function(){return m},nR:function(){return h}});var r=n(66557),i=n(27218),u=n(6385),l=n(10228),o=n(7653),a=n(15992),c=n(95899),d=n(92676),s=n(32559),v=n(2949),f=n(74339),y=n(35548),p=n(74119);let g=()=>{let{data:e,isLoading:t}=(0,s.O3)(),n=(0,p.H)();return t?{projects:[],isLoading:t,createProjectsDisabled:!1}:{projects:e,isLoading:t,createProjectsDisabled:void 0!==n&&void 0!==e&&e.length>=n}},m=()=>{var e,t,n,r,u,l;let{config:o}=(0,a.useConfig)("hatch_token_limits"),c=(0,i.Cf)(),d=(0,i.ZJ)(),s=o.get("default",{});return Math.round(.9*(c?null!==(t=null==s?void 0:null===(e=s.raven)||void 0===e?void 0:e.hardLimit)&&void 0!==t?t:19e4:d?null!==(r=null==s?void 0:null===(n=s.pro)||void 0===n?void 0:n.hardLimit)&&void 0!==r?r:19e4:null!==(l=null==s?void 0:null===(u=s.free)||void 0===u?void 0:u.hardLimit)&&void 0!==l?l:25e3))-4e3},h=e=>{let{data:t}=(0,c.Kf)(e),{data:n}=(0,d.yg)(e),{data:i}=(0,c.pK)(e),a=null==i?void 0:i.filter(e=>"document"===e.file_kind),s=(0,o.useMemo)(()=>{var e;return null!==(e=null==a?void 0:a.reduce((e,t)=>e+(0,y.ZJ)(t),0))&&void 0!==e?e:0},[a]),p=null==i?void 0:i.filter(e=>"image"===e.file_kind),g=(0,o.useMemo)(()=>{var e;return null!==(e=null==p?void 0:p.reduce((e,t)=>e+(0,y.Rv)(t),0))&&void 0!==e?e:0},[p]),m=(0,o.useMemo)(()=>(t||[]).map(e=>e.content).join(" "),[t]),h=(0,r.c)(m)+s+g,b=(0,o.useMemo)(()=>{var e,t;let r=null==n?void 0:n.filter(e=>e.type===l.Fg.GITHUB),i=null==n?void 0:n.filter(e=>e.type!==l.Fg.GITHUB),o=null!==(e=null==r?void 0:r.map(e=>e.status.current_size_bytes).filter(e=>!!e&&"number"==typeof e).reduce((e,t)=>e+t,0))&&void 0!==e?e:0,a=null!==(t=null==i?void 0:i.map(e=>e.status.current_size_bytes).filter(e=>!!e&&"number"==typeof e).reduce((e,t)=>e+t,0))&&void 0!==t?t:0;return Math.floor(o/u.dS+a/u.r6)},[n]),_=(0,o.useMemo)(()=>{var e;return null!==(e=null==n?void 0:n.filter(e=>e.type===l.Fg.GDRIVE).map(e=>e.config.uri))&&void 0!==e?e:[]},[n]),x=(0,v.mD)(_),S=(0,o.useMemo)(()=>{let e=x.map(e=>{let{data:t,isLoading:n}=e;return n||!t?0:t.size||0}).reduce((e,t)=>e+t,0);return e?e/u.r6:0},[x]),j=(0,o.useMemo)(()=>{var e;return null!==(e=null==n?void 0:n.filter(e=>e.type===l.Fg.OUTLINE).map(e=>e.config.outline_uri))&&void 0!==e?e:[]},[n]),w=(0,f.RS)(j),C=(0,o.useMemo)(()=>{let e=w.map(e=>{let{data:t,isLoading:n}=e;return n||!t?0:t.size||0}).reduce((e,t)=>e+t,0);return e?e/u.r6:0},[w]);return void 0!==t?void 0!==n?h+b+S+C:h:void 0!==n?b:void 0},b=e=>{let{mutate:t}=(0,s.dY)(e),{data:n}=(0,s.Yc)(e);return()=>{t({is_starred:!(null==n?void 0:n.is_starred)})}}},21878:function(e,t,n){n.d(t,{K:function(){return l}});var r=n(19170),i=n(27218),u=n(7653);function l(){let{mutate:e,isPending:t}=(0,r.Ck)(),{account:n}=(0,i.t)();return{dismiss:(0,u.useCallback)(t=>{var r;n&&e({...n.settings,dismissed_claudeai_banners:[...(null==n?void 0:null===(r=n.settings)||void 0===r?void 0:r.dismissed_claudeai_banners)||[],{banner_id:t,dismissed_at:new Date().toISOString()}]})},[n,e]),isDismissed:(0,u.useCallback)(e=>{var t,r;return(null==n?void 0:null===(r=n.settings)||void 0===r?void 0:null===(t=r.dismissed_claudeai_banners)||void 0===t?void 0:t.some(t=>t.banner_id===e))||!1},[n]),isPending:t}}},35548:function(e,t,n){n.d(t,{Rv:function(){return l},ZJ:function(){return u},ZW:function(){return c},hn:function(){return o},y1:function(){return a}});var r=n(66557);n(14448);var i=n(7653);let u=e=>5e3*e.document_asset.page_count,l=e=>Math.min(1600,Math.ceil(e.preview_asset.image_width*e.preview_asset.image_height/700)),o=e=>e.reduce((e,t)=>e+l(t),0),a=(e,t,n)=>{let u=(0,r.c)(e),l=(0,i.useMemo)(()=>n.map(e=>e.extracted_content).join(" "),[n]);return u+(0,r.c)(l)+o(t)},c=(e,t)=>e/t>.4},57393:function(e,t,n){n.d(t,{e:function(){return c}});var r=n(27573),i=n(32737),u=n(88146),l=n(7653),o=n(45790),a=n(15350);let c=e=>{let t,{children:n,enabledWrapperStyles:c="",disabledWrapperStyles:d=""}=e,{createProjectsDisabled:s}=(0,a.Z0)();return t=s?d:c,(0,r.jsx)(i.u,{tooltipContent:s?(0,r.jsx)(o.Z,{defaultMessage:"You have reached the maximum number of projects. <upgradeLink>Upgrade</upgradeLink> for more.",id:"8XKCSUNy79",values:{upgradeLink:e=>(0,r.jsx)(u.default,{href:"/upgrade",className:"underline",children:e})}}):null,side:"bottom",children:(0,r.jsx)("div",{className:t,children:l.cloneElement(n,{disabled:s})})})}},53545:function(e,t,n){n.d(t,{Nv:function(){return S},DU:function(){return _}});var r=n(27573),i=n(3053),u=n(27218),l=n(81695),o=n(45790),a=n(15992),c=n(32559),d=n(10607),s=n(50294);n(7653);var v=n(57393);let f=e=>{let{icon:t,title:n,description:i,onClick:u,variant:l,disabled:o=!1}=e;return(0,r.jsxs)("button",{className:(0,d.Z)("flex p-4 w-full items-center h-full","projects"===l?"flex-row-reverse sm:flex-col sm:items-start lg:flex-row-reverse lg:items-center":"flex-row sm:flex-col sm:items-start"),onClick:u,disabled:o,children:[(0,r.jsx)("div",{className:(0,d.Z)("relative mb-1","projects"===l?"lg:mb-0 lg:ml-2":"mr-2"),children:(0,r.jsx)(s.default,{src:t,height:50,width:50,alt:"",style:{opacity:o?"50%":"100%"}})}),(0,r.jsxs)("div",{className:"flex flex-col items-start w-full h-full",children:[(0,r.jsx)("h3",{className:(0,d.Z)("text-md font-medium text-text-200 text-left",o&&"text-text-500"),children:n}),(0,r.jsx)("p",{className:(0,d.Z)("text-sm text-text-200 text-left",o&&"text-text-500"),children:i})]})]})},y=e=>{let{variant:t="home",...n}=e;return(0,r.jsx)("div",{className:(0,d.Z)("w-full","projects"===t?"sm:w-48 sm:grow lg:w-52":"sm:w-48 lg:w-52"),children:(0,r.jsx)(v.e,{enabledWrapperStyles:"from-bg-100 to-bg-100/30 border-0.5 border-border-300 hover:from-bg-000/70 hover:to-bg-000/50 hover:border-border-300/30 text-text-200 hover:text-text-100 relative flex cursor-pointer flex-col gap-1.5 rounded-xl bg-gradient-to-b transition-all ease-in-out hover:shadow-sm active:scale-[0.995] md:gap-2 overflow-hidden h-full",disabledWrapperStyles:"border-0.5 border-border-300 text-text-200 relative flex cursor-pointer flex-col gap-1.5 rounded-xl md:gap-2 overflow-hidden h-full",children:(0,r.jsx)(f,{...n,variant:t})})})},p=e=>{switch(e){case"edu_lightbulb":return"/images/illustrations/edu/edu-lightbulb.svg";case"edu_paper_and_quill":return"/images/illustrations/edu/edu-paper-and-quill.svg";case"edu_paper_and_magnifying_glass":return"/images/illustrations/edu/edu-paper-and-magnifying-glass.svg";default:return""}},g=(e,t)=>{if(e===c.cd.Student)switch(t){case c.nL.Study:return(0,r.jsx)(o.Z,{defaultMessage:"Study project",id:"SDlohOAVzo"});case c.nL.Career:return(0,r.jsx)(o.Z,{defaultMessage:"Career project",id:"MsM+7biLzH"});case c.nL.Research:return(0,r.jsx)(o.Z,{defaultMessage:"Research project",id:"OR/ar3drnQ"})}},m=(e,t)=>{if(e===c.cd.Student)switch(t){case c.nL.Study:return(0,r.jsx)(o.Z,{defaultMessage:"Learn and master any subject",id:"3vYdF/hF/f"});case c.nL.Career:return(0,r.jsx)(o.Z,{defaultMessage:"Find the next step for your career",id:"v6qrZ8g/Vy"});case c.nL.Research:return(0,r.jsx)(o.Z,{defaultMessage:"Analyze and organize research",id:"R19a/TH47z"})}},h=e=>e.map(e=>({id:"".concat(e.type,"-").concat(e.subtype),type:e.type,subtype:e.subtype,icon:p(e.icon_type),title:g(e.type,e.subtype),description:m(e.type,e.subtype),customInstructions:e.custom_instructions})),b=e=>e?(0,r.jsx)(o.Z,{defaultMessage:"Set up Claude for your classes, career, and research",id:"aU/3NrmiTd"}):"",_=()=>{let e=(0,l.useSearchParams)().get("projectStarter"),t=x();return e?t.options.find(t=>t.id===e):void 0},x=()=>{let e=(0,a.useConfig)("claude_ai_experience").config,t=(0,u.Zd)(),n=e.get("project_templates",[]);return{sectionTitle:b(t),options:h(n)}},S=e=>{let{variant:t="home"}=e,n=(0,l.useRouter)(),u=(0,i.z$)(),o=x();if(o.options.length)return(0,r.jsxs)("div",{className:"w-full mt-6",children:[(0,r.jsx)("h2",{className:"text-sm text-text-200 font-medium leading-6 ml-1",children:o.sectionTitle}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2 w-full mt-3 justify-center items-stretch",children:o.options.map(e=>(0,r.jsx)(y,{variant:t,icon:e.icon,title:e.title,description:e.description,onClick:()=>{u.track({event_key:"claudeai.projects.project_starter.clicked",project_type:e.type,project_subtype:e.subtype,path:window.location.pathname}),n.push("/projects/create?projectStarter="+e.id)}},e.id))})]})}},51879:function(e,t,n){n.d(t,{J:function(){return c},Q:function(){return a}});var r=n(27573),i=n(35919),u=n.n(i),l=n(7653);let o=(0,l.createContext)({isOpen:!1,dropdownToOpen:void 0,openModal:u(),closeModal:u(),clearCallerIdentifier:u()}),a=e=>{let{children:t}=e,[n,i]=(0,l.useState)(!1),u=(0,l.useRef)(void 0),[a,c]=(0,l.useState)(void 0);return(0,r.jsx)(o.Provider,{value:{isOpen:n,openModal:e=>{i(!0),u.current=e},closeModal:()=>{i(!1),c(u.current)},dropdownToOpen:a,clearCallerIdentifier:()=>{c(void 0)}},children:t})},c=()=>(0,l.useContext)(o)},22534:function(e,t,n){n.d(t,{F7:function(){return l},MU:function(){return u},ZZ:function(){return o}});let r="recentDriveDocs";function i(e){return"object"==typeof e&&null!==e&&"string"==typeof e.uri&&("string"==typeof e.title||void 0===e.title)}function u(e){localStorage.setItem(r,JSON.stringify(e))}function l(){let e=localStorage.getItem(r);if(e){let t=JSON.parse(e);if(t&&Array.isArray(t)&&t.every(i))return t}return[]}function o(e){let t=l();u(t=t.filter(t=>t.uri!==e))}},66557:function(e,t,n){n.d(t,{c:function(){return i}});var r=n(7653);function i(e){let{skip:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},[i,u]=(0,r.useState)(0),l=(0,r.useRef)(null);return(0,r.useEffect)(()=>{if(!t){if(!l.current){if("undefined"==typeof Worker)return;try{let e=new Worker(n.tu(new URL(n.p+n.u(6344),n.b)));e.onmessage=e=>u(e.data),l.current=e}catch(t){var e;throw(null==t?void 0:null===(e=t.toString)||void 0===e?void 0:e.call(t).includes("Invalid URL"))&&console.error("useTokenCounter invalid URL error hit; baseUrl = ‘".concat("file:///app/packages/chat/utils/useTokenCounter.tsx","’")),t}}return()=>{var e;null===(e=l.current)||void 0===e||e.terminate(),l.current=null}}},[t]),(0,r.useEffect)(()=>{l.current&&l.current.postMessage(e)},[e]),i}}}]);