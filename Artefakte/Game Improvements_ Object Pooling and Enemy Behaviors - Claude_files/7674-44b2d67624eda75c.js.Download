"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7674],{68259:function(e,t,n){n.d(t,{Dv:function(){return r},Y0:function(){return c},by:function(){return o}});var s=n(5362),a=n(27218),i=n(13262),l=n(77930);function r(){var e;let t=(0,a.t)();return(0,s.WE)("/api/account/deletion-allowed",{queryKey:[i.gs,null==t?void 0:null===(e=t.account)||void 0===e?void 0:e.uuid],staleTime:0})}function o(e){return(0,s.WE)("/api/account_profile",{queryKey:[i.ec],staleTime:0,...e})}function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,l.useQueryClient)();return(0,s.uC)("/api/account_profile","PUT",{...e,onSuccess:(n,s,a)=>{var l;t.invalidateQueries({queryKey:[i.ec]}),null===(l=e.onSuccess)||void 0===l||l.call(e,n,s,a)}})}},12099:function(e,t,n){n.d(t,{Ml:function(){return o},Vl:function(){return d},jN:function(){return c}});var s=n(3053),a=n(5362),i=n(27218),l=n(14448);n(13262);var r=n(15992);function o(){let{layer:e}=(0,r.useLayer)("frontend"),{value:t}=(0,l.F)("chat_suggestion_chips_enabled"),n=e.get("chat_suggestion_chips",!1);return t||n}function c(e,t,n){let{activeOrganization:r}=(0,i.t)(),{account:c}=(0,i.t)(),d=(0,l.F)("cardamom_enabled").value,u=o()&&n&&!d&&(null==c?void 0:c.settings.enable_chat_suggestions)!==!1,m=(0,s.z$)(),p=(0,a.uC)("/api/organizations/".concat(null==r?void 0:r.uuid,"/dust/chat_continuations"),"POST",{enabled:u,onError:()=>{console.warn("Failed to fetch suggestion chips")},onSuccess:()=>{m.track({event_key:"ccos.chatsuggestions.loaded",conversation_uuid:e,last_message_id:t})},meta:{noToast:!0}});return{suggestionsEnabled:u,mutate:p.mutate,isPending:p.isPending,isIdle:p.isIdle}}function d(e){let{mutateAsync:t,enabled:n}=function(){let{activeOrganization:e}=(0,i.t)(),{value:t}=(0,l.F)("chat_autocomplete"),n=(0,a.uC)("/api/organizations/".concat(null==e?void 0:e.uuid,"/dust/chat_autocomplete"),"POST",{enabled:t,onError:()=>{console.warn("Failed to fetch completion")},meta:{noToast:!0}});return{mutateAsync:n.mutateAsync,isPending:n.isPending,isIdle:n.isIdle,enabled:t}}();return{fetchInputAutocompletion:async s=>{if(!n||!e)return"";let[a,i]=(await t({conversationUUID:null!=e?e:"",prompt:s})).prompt.split("\n").map(e=>e.trim());return"Yes"===a?" "===s[s.length-1]?i||"":" "+(i||""):"No"===a&&i||""}}}},94449:function(e,t,n){n.d(t,{Cc:function(){return x},G:function(){return m},iZ:function(){return h},j6:function(){return f},p4:function(){return p}});var s=n(5362),a=n(77930),i=n(41270);let l=i.z.object({name:i.z.string(),description:i.z.string(),tool_key:i.z.string()}),r=i.z.object({server_name:i.z.string(),server_id:i.z.string(),is_authenticated:i.z.boolean(),tools:i.z.array(l)}),o=i.z.array(r),c="mcp-remote-tools-by-server",d=i.z.object({uuid:i.z.string().uuid(),name:i.z.string(),url:i.z.string().url(),created_at:i.z.string().datetime(),updated_at:i.z.string().datetime(),is_active:i.z.boolean(),is_authenticated:i.z.boolean()});i.z.object({name:i.z.string(),url:i.z.string()}),i.z.object({name:i.z.string().optional().nullable(),url:i.z.string().optional().nullable()});let u="mcp-remote-servers";function m(e,t){return(0,s.WE)("/api/organizations/".concat(e,"/mcp/remote_servers"),{queryKey:[u,e],enabled:!!e,...t,select:e=>i.z.array(d).parse(e)})}function p(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(0,a.useQueryClient)();return(0,s.uC)("/api/organizations/".concat(e,"/mcp/remote_servers"),"POST",{...t,onSuccess:(s,a,i)=>{var l;n.invalidateQueries({queryKey:[u,e]}),n.invalidateQueries({queryKey:[c,e]}),null===(l=t.onSuccess)||void 0===l||l.call(t,s,a,i)}})}function x(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=(0,a.useQueryClient)();return(0,s.uC)("/api/organizations/".concat(e,"/mcp/remote_servers/").concat(t),"PUT",{...n,onSuccess:(s,a,l)=>{var r;i.invalidateQueries({queryKey:[u,e]}),i.invalidateQueries({queryKey:["mcp-remote-server-detail",e,t]}),i.invalidateQueries({queryKey:[c,e]}),null===(r=n.onSuccess)||void 0===r||r.call(n,s,a,l)}})}function h(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=(0,a.useQueryClient)();return(0,s.uC)("/api/organizations/".concat(e,"/mcp/remote_servers/").concat(t),"DELETE",{...n,onSuccess:(t,s,a)=>{var l;i.invalidateQueries({queryKey:[u,e]}),i.invalidateQueries({queryKey:[c,e]}),null===(l=n.onSuccess)||void 0===l||l.call(n,t,s,a)}})}function f(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0;return(0,s.WE)("/api/organizations/".concat(e,"/mcp/tools/servers"),{queryKey:[c,e],enabled:!!e&&t,...n,select:e=>o.parse(e)})}},42814:function(e,t,n){n.d(t,{GB:function(){return o},HK:function(){return u},KM:function(){return d},fq:function(){return c},h9:function(){return r}});var s=n(5362),a=n(27218),i=n(13262),l=n(77930);let r=()=>{let{activeOrganization:e}=(0,a.t)(),t=null==e?void 0:e.uuid;return(0,s.WE)("/api/organizations/".concat(t,"/list_styles"),{queryKey:[i.it,{orgUUID:t}]})},o=()=>{let{activeOrganization:e}=(0,a.t)(),t=null==e?void 0:e.uuid,n=(0,l.useQueryClient)();return(0,s.uC)("/api/organizations/".concat(t,"/styles/create"),"POST",{onSuccess:()=>{n.invalidateQueries({queryKey:[i.it,{orgUUID:t}]})}})},c=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],{activeOrganization:n}=(0,a.t)(),r=null==n?void 0:n.uuid,o=(0,l.useQueryClient)();return(0,s.uC)("/api/organizations/".concat(r,"/styles/").concat(e,"/edit"),"PUT",{onSuccess:()=>{o.invalidateQueries({queryKey:[i.it,{orgUUID:r}]})},enabled:!t})},d=e=>{let{activeOrganization:t}=(0,a.t)(),n=null==t?void 0:t.uuid,r=(0,l.useQueryClient)();return(0,s.uC)("/api/organizations/".concat(n,"/styles/").concat(e,"/delete"),"DELETE",{onSuccess:()=>{r.invalidateQueries({queryKey:[i.it,{orgUUID:n}]})}})},u=()=>{let{activeOrganization:e}=(0,a.t)(),t=null==e?void 0:e.uuid;return(0,s.uC)("/api/organizations/".concat(t,"/styles/preview"),"POST")}},46200:function(e,t,n){n.d(t,{A1:function(){return o},O3:function(){return c},bQ:function(){return d},xV:function(){return r}}),n(19170);var s=n(27218),a=n(14448),i=n(59016),l=n(4746);let r=()=>{let{value:e}=(0,a.F)("cheerios");return e},o=()=>{let e=(0,s.Cf)(),{data:t}=(0,i.Kg)(),n=!(null==t?void 0:t.disabled_features.includes("web_search"));return!e||n},c=()=>{let e=Object.keys((0,l.vF)()).includes("enabled_web_search"),t=r();return e&&t},d=e=>{var t,n;let a=o(),{account:i}=(0,s.t)();return!!a&&(e?!!(null==e?void 0:null===(t=e.conversationSettings)||void 0===t?void 0:t.enabled_web_search):!!(null==i?void 0:null===(n=i.settings)||void 0===n?void 0:n.enabled_web_search))}},61377:function(e,t,n){n.d(t,{F4:function(){return c}});var s=n(5362),a=n(27218),i=n(13262),l=n(10228),r=n(2949);let o=e=>[l.co.CREATED,l.co.PENDING,l.co.UPDATING].includes(e),c=()=>{let{isDriveSearchEnabled:e,isDriveIndexingEnabled:t}=(0,r.sv)(),n=(0,r.tr)(),{data:s}=d(l.Fg.GDRIVE),a=null==s?void 0:s.state;return!!(e&&t&&n&&a&&[l.co.CREATED,l.co.UPDATING,l.co.PENDING].includes(a))},d=e=>{let{account:t,activeOrganization:n}=(0,a.t)(),l=null==t?void 0:t.uuid,r=null==n?void 0:n.uuid;return(0,s.WE)("/api/organizations/".concat(r,"/sync/ingestion/").concat(e,"/progress"),{queryKey:[i.dY,{orgUuid:r,accountUuid:l,syncSourceType:e}],enabled:!!n,refetchInterval:e=>!!(e.state.data&&o(e.state.data.state))&&6e4,meta:{noToast:!0}})}},1036:function(e,t,n){n.d(t,{H:function(){return i}});var s=n(27573),a=n(45790);function i(e){let t,{project:n,className:i}=e;if(n.is_starter_project)t=(0,s.jsx)(a.Z,{defaultMessage:"Created by Anthropic",id:"qWDgsCW3nw"});else{var l;t=(null===(l=n.creator)||void 0===l?void 0:l.full_name)?(0,s.jsx)(a.Z,{defaultMessage:"Created by {author}",id:"7POMfMfi+y",values:{author:n.creator.full_name}}):(0,s.jsx)(a.Z,{defaultMessage:"Created by Unknown",id:"9r8PjDoPSf"})}return(0,s.jsx)("span",{className:i,children:t})}},41176:function(e,t,n){n.d(t,{x:function(){return tY}});var s=n(56683),a=n(27573),i=n(9788),l=n(69321),r=n(14448),o=n(10607),c=n(7583),d=n(68425),u=n(7653),m=n(40950),p=n(77879),x=n(66605),h=n(12099),f=n(768),g=n(93020),v=n(91217),j=n(66551),y=n(71912),b=n(33768),w=n(75870),k=n(13051),C=n(98062),N=n(89313),M=n(53949),S=n(94200),_=n(29516),E=n(86098),z=n(70354),Z=n(32737),A=n(18691),T=n(1133),I=n(98649),D=n(22027),R=n(64047),P=n(19170),O=n(27218);let F={[I.Mm.UPLOAD]:!1,[I.Mm.ADD_SCREENSHOT]:!1,[I.Mm.PROJECTS]:!1,[I.Mm.SEARCH_AND_TOOLS]:!0,[I.Mm.EXTENDED_THINKING]:!0,[I.Mm.DRIVE]:!1,[I.Mm.GITHUB]:!1,[I.Mm.STYLES]:!1,[I.Mm.COMPASS]:!0};function U(e){return Object.values(I.Mm).includes(e)}let L=e=>{var t,n;let{account:s}=(0,O.t)();return!!U(e)&&(null!==(n=(null!==(t=null==s?void 0:s.settings.input_menu_pinned_items)&&void 0!==t?t:{})[e])&&void 0!==n?n:F[e])},H=()=>{let{account:e}=(0,O.t)(),{mutate:t}=(0,P.Ck)();return{toggleInputMenuPinned:(n,s)=>{e&&U(n)&&t({...e.settings,input_menu_pinned_items:{...e.settings.input_menu_pinned_items,[n]:s}})}}};var G=n(35919),K=n.n(G),B=n(28266),q=n(76220),Y=n(86377),V=n(12459),W=n(12086),Q=n(10228),X=n(42755),J=n(96177),$=n(9599),ee=n(89755),et=n(49117),en=n(15992),es=n(32559);let ea=()=>{let{value:e}=(0,r.F)("use_incoherent_traffic_light_noises");return e},ei=()=>ea()&&"",el=e=>{var t,n;let s=ei(),{account:a}=(0,O.t)();return!!s&&(e?!!(null==e?void 0:null===(t=e.conversationSettings)||void 0===t?void 0:t.enabled_compass):!!(null==a?void 0:null===(n=a.settings)||void 0===n?void 0:n.enabled_compass))};var er=n(2949),eo=n(89111),ec=n(74119),ed=n(40051),eu=n(67578),em=n(19132),ep=n(46200);let ex="inputMenu",eh=e=>{let{actions:t}=e,n=(0,m.Z)(),{searchOptions:s,numSearchOptionsEnabled:i}=ef({actions:t}),{mcpOptions:l,numMcpOptionsEnabled:r}=eg();if(!s.length)return null;let o=n.formatMessage({defaultMessage:"Search & tools",id:"sJCKZGn9fN"}),c={key:"mcpOptions-subheader",type:"subheader",label:n.formatMessage({defaultMessage:"{mcp} integrations",id:"z9fYiFSV0r"},{mcp:"MCP"})};return{key:I.Mm.SEARCH_AND_TOOLS,type:"toggleGroup",icon:(0,a.jsx)(eu.Y,{size:16}),label:o,enabledCount:i+r,children:[{type:"back",key:"searchAndTools-back",label:o},...s,...i>0&&r>0?[{key:"divider",type:"divider",label:""},c]:[],...l],indicatorActive:i>0}},ef=e=>{let{actions:t}=e,n=(0,m.Z)(),{conversation:s,isNewConversation:i}=(0,v.r)(),l=(0,ep.O3)(),r=(0,ep.A1)(),o=(0,ep.bQ)(s),c=[];l&&i&&c.push({key:"webSearch",type:"toggle",label:n.formatMessage({defaultMessage:"Web search",id:"x0W7xxxEcv"}),icon:(0,a.jsx)(D.T,{size:16}),isChecked:o,onClick:()=>t.onToggleConvoAndAccountSetting({enabled_web_search:!o}),tag:"beta",...r?{tooltipImage:"/images/feature-preview/web-search.png",tooltip:n.formatMessage({defaultMessage:"Claude can search the internet to provide more up-to-date and relevant responses",id:"++j9k+TnpR"})}:{isDisabled:!0,tooltip:n.formatMessage({defaultMessage:"This feature is disabled for your team plan.",id:"YNQWei0I8o"})}});let d=(0,er.ez)(),u=(0,er.EU)(s),{isDriveAuthenticated:p,initDriveAuth:x}=(0,er.nC)({callerIdentifier:ex,handleAuthSuccess:()=>{t.onToggleConvoAndAccountSetting({enabled_bananagrams:!0})}});if(d){let e=p&&u;c.push({key:"driveSearch",type:"toggle",label:n.formatMessage({defaultMessage:"{drive} search",id:"nUykp097rV"},{drive:"Drive"}),icon:(0,a.jsx)(V.k6,{size:14}),isChecked:e,onClick:()=>{if(!p){x();return}t.onToggleConvoAndAccountSetting({enabled_bananagrams:!e})}})}let h=(0,em.te)(Q.Fg.GCAL),f=(0,em.j5)(Q.Fg.GCAL,s),{isAuthenticated:g,startAuth:j}=(0,em.QD)(Q.Fg.GCAL,{callerIdentifier:ex,handleAuthSuccess:()=>{t.onToggleConvoAndAccountSetting({enabled_foccacia:!0})}});if(h&&i){let e=g&&f;c.push({key:"gcal",type:"toggle",label:"Google Calendar",icon:(0,a.jsx)(V.tB,{size:14}),isChecked:e,onClick:()=>{if(!g){j();return}t.onToggleConvoAndAccountSetting({enabled_foccacia:!e})}})}let y=(0,em.te)(Q.Fg.GMAIL),b=(0,em.j5)(Q.Fg.GMAIL,s),{isAuthenticated:w,startAuth:k}=(0,em.QD)(Q.Fg.GMAIL,{callerIdentifier:ex,handleAuthSuccess:()=>{t.onToggleConvoAndAccountSetting({enabled_sourdough:!0})}});if(y&&i){let e=w&&b;c.push({key:"gmail",type:"toggle",label:"Gmail",icon:(0,a.jsx)(V.W9,{size:14}),isChecked:e,onClick:()=>{if(!w){k();return}t.onToggleConvoAndAccountSetting({enabled_sourdough:!e})}})}let C=c.filter(e=>e.isChecked).length;return{searchOptions:c,numSearchOptionsEnabled:C}},eg=()=>{let e=[],t=e.filter(e=>"toggle"===e.type&&e.isChecked).length;return{mcpOptions:e,numMcpOptionsEnabled:t}},ev=e=>{let{actions:t,inputMenuIsOpen:n}=e,s=(0,m.Z)(),i=ej({actions:t}),l=eN({actions:t}),r=eC({actions:t}),o=ek({actions:t}),c=ew({actions:t,inputMenuIsOpen:n}),d=ey({actions:t,inputMenuIsOpen:n}),u=eh({actions:t}),p=eb({actions:t});return[{key:I.Mm.UPLOAD,type:"button",icon:(0,a.jsx)(X.p,{size:16}),label:s.formatMessage({defaultMessage:"Upload a file",id:"Zc9xq9TzDD"}),onClick:t.onUpload},...i?[i]:[],...o?[o]:[],...c?[c]:[],{key:"divider1",type:"divider",label:""},...p?[p]:[],...l?[l]:[],...r?[r]:[],...d?[d]:[],...u?[u]:[],{key:"divider2",type:"divider",label:""},{key:"experimental",type:"button",icon:(0,a.jsx)(J.G,{size:16}),label:s.formatMessage({defaultMessage:"Experimental features",id:"q6tRyte8Nf"}),onClick:t.openFeaturePreviewModal}]},ej=e=>{let{actions:t}=e,n=(0,m.Z)();return(0,W.Rx)()||(0,T.r3)()?null:{key:I.Mm.ADD_SCREENSHOT,type:"button",icon:(0,a.jsx)($.V,{size:16}),label:n.formatMessage({defaultMessage:"Add screenshot",id:"HxIuLAqnya"}),onClick:t.onAddScreenshot}},ey=e=>{let{inputMenuIsOpen:t,actions:n}=e,s=(0,m.Z)(),{projectUuid:i,isProjectLocked:l}=(0,v.r)(),r=(0,ec.U)(),{data:o}=(0,es.u0)({defer:!t||!r}),c=(null==o?void 0:o.slice(0,8).map(e=>({key:e.uuid,type:"option",label:e.name,value:e.uuid,onClick:()=>n.onSelectProject(e.uuid)})))||[],d=null==o?void 0:o.find(e=>e.uuid===i);if(l)return null;let u=s.formatMessage({defaultMessage:"Set project",id:"elWw2faiOt"});return r?{key:I.Mm.PROJECTS,type:"optionGroup",icon:(0,a.jsx)(R.j,{size:16}),label:u,selectedLabel:null==d?void 0:d.name,selectedValue:null==d?void 0:d.uuid,children:[{type:"back",key:"projects-back",label:u},...c,{key:"divider1",type:"divider",label:""},{key:"add",type:"button",variant:"primary",icon:(0,a.jsx)(ee.v,{size:16}),label:s.formatMessage({defaultMessage:"Start a new project",id:"0y7bg6nA29"}),onClick:()=>n.onCreateProject(!1)}],indicatorActive:!!d}:{key:I.Mm.PROJECTS,type:"button",icon:(0,a.jsx)(R.j,{size:16}),label:u,tooltip:"Upgrade to pro to organize your chats into projects",tag:"pro"}},eb=e=>{var t;let{actions:n}=e,s=(0,m.Z)(),{paprikaMode:i,conversation:l,model:o,isNewConversation:c}=(0,v.r)(),{allModelOptions:d}=(0,q.u)(),u=(0,B.wN)((null==l?void 0:l.id)||null),p=null!=o?o:u,x=d.find(e=>e.model===p),{config:h}=(0,en.useConfig)("paprika_config"),{config:f}=(0,en.useConfig)("frontend_fallback_paprika_config"),g=h.get("modes",[]),j=f.get("modes",[]),y=g.length>0?g:j,b=s.formatMessage({defaultMessage:"Upgrade to pro to enable Claude to think longer before responding",id:"q2lCit5A4D"}),w=s.formatMessage({defaultMessage:"Switch to 3.7 Sonnet to use this feature",id:"6go2oa6h0d"}),k=s.formatMessage({defaultMessage:"Claude will think for longer before responding. This may use your rate limits faster",id:"5Ttyibawbu"}),{value:C}=(0,r.F)("model_selector_enabled"),N=(0,O.rW)(),M=!(null==x?void 0:null===(t=x.paprika_modes)||void 0===t?void 0:t.includes("extended"));if(!y.length||!c)return null;let S={key:I.Mm.EXTENDED_THINKING,type:"switch",label:s.formatMessage({defaultMessage:"Extended thinking",id:"5j4WakKa2u"}),icon:(0,a.jsx)(Y.h,{size:16}),isChecked:"extended"===i,tooltipImage:"/images/feature-preview/extended-thinking.png",indicatorActive:"extended"===i};return C||N?M?{...S,tooltip:w,isDisabled:!0}:{...S,onClick:()=>{n.onTogglePaprika("extended"===i?"default":"extended")},tooltip:k}:{...S,tooltip:b,tag:"pro"}},ew=e=>{let{actions:t,inputMenuIsOpen:n}=e,s=(0,m.Z)(),i=(0,er.Aj)(),{isDriveAuthenticated:l}=(0,er.nC)(),{recentDriveDocs:r,isLoading:o}=(0,er.td)(n);if(!i)return null;if(!l)return{key:"drive",type:"button",icon:(0,a.jsx)(V.j0,{type:Q.Fg.GDRIVE,size:16}),label:s.formatMessage({defaultMessage:"Add from {drive}",id:"hwJ50OkM/9"},{drive:"Google Drive"}),onClick:()=>{t.initDriveAuth()}};let c=o?[{key:"drive-loading",type:"button",label:s.formatMessage({defaultMessage:"{drive} documents loading...",id:"PjuSZ/7RIb"},{drive:"Drive"}),isDisabled:!0}]:r.length?r.slice(0,8).map(e=>{var n;return{key:e.uri,type:"button",label:null!==(n=e.title)&&void 0!==n?n:"Untitled",icon:(0,a.jsx)(V.j0,{type:Q.Fg.GDRIVE,variant:V.cT.DOCS,size:16}),onClick:()=>{t.createDriveSyncSource(e.uri)}}}):[{key:"empty",type:"button",label:s.formatMessage({defaultMessage:"No recent {drive} documents",id:"XepM9W1Mo/"},{drive:"Drive"}),isDisabled:!0}],d=s.formatMessage({defaultMessage:"Add from {drive}",id:"hwJ50OkM/9"},{drive:"Google Drive"});return{key:I.Mm.DRIVE,type:"buttonGroup",icon:(0,a.jsx)(V.j0,{type:Q.Fg.GDRIVE,size:16}),label:d,children:[{type:"back",key:"drive-back",label:d},...c]}},ek=e=>{let{actions:t}=e,n=(0,m.Z)();return(0,eo.H7)()?{key:I.Mm.GITHUB,type:"button",icon:(0,a.jsx)(V.j0,{type:Q.Fg.GITHUB,size:16}),label:n.formatMessage({defaultMessage:"Add from {github}",id:"h3J3E4bRfj"},{github:"Github"}),onClick:t.openGithubModal}:null},eC=e=>{let{actions:t}=e,n=(0,m.Z)(),{personalizedStyle:s}=(0,v.r)(),{personalizedStyleOptions:i}=(0,ed.O)(),l=i.map(e=>({key:e.key,type:"option",label:e.name,value:e.key,onClick:()=>t.onStyleChange(e.key)})),r=n.formatMessage({defaultMessage:"Set style",id:"eTtBaiWfE8"});return{key:I.Mm.STYLES,type:"optionGroup",icon:(0,a.jsx)(A.x,{size:16}),label:r,selectedLabel:null==s?void 0:s.name,selectedValue:null==s?void 0:s.key,children:[{type:"back",key:"styles-back",label:r},...l,{key:"divider1",type:"divider",label:""},{key:"add",type:"button",variant:"primary",icon:(0,a.jsx)(ee.v,{size:16}),label:n.formatMessage({defaultMessage:"Create & edit styles",id:"cY+Fgc8HvE"}),onClick:t.openStyleModal}],indicatorActive:s&&"Default"!==s.key}},eN=e=>{let{actions:t}=e,n=(0,m.Z)(),{conversation:s}=(0,v.r)(),i=ei(),r=el(s);return i?{key:I.Mm.COMPASS,type:"switch",label:(0,l.lF)({id:"pig_airpod_pond",intl:n}),icon:(0,a.jsx)(et.z,{size:16}),isChecked:r,onClick:()=>{t.onToggleConvoAndAccountSetting({enabled_compass:!r})},tooltip:(0,l.lF)({id:"yes_this_is_manual",intl:n}),indicatorActive:r,tag:"beta"}:null};var eM=n(96933),eS=n(89269),e_=n(3053),eE=n(27895),ez=n(42147),eZ=n(45144),eA=n(4746),eT=n(64243),eI=n(56767);let eD=e=>{let{setStyleModalOpenWithScreen:t,setCreateProjectModalIsOpen:n,setGithubModalIsOpen:s}=e,a=eO(),i=eU(),l=eP(),{openFeaturePreviewModal:r}=(0,eA.h9)(),{isGithubAuthenticated:o,initGithubAuth:c}=(0,eo.Yn)(),{initDriveAuth:d}=(0,er.nC)(),{toggleConvoAndAccountSetting:u}=(0,eM.Bk)(),m=eF();return{onUpload:()=>{var e;null===(e=document.getElementById("chat-input-file-upload"))||void 0===e||e.click()},onAddScreenshot:()=>{a()},openGithubModal:()=>{if(!o){c();return}s(!0)},initDriveAuth:d,createDriveSyncSource:eR(),onToggleConvoAndAccountSetting:u,onTogglePaprika:m,onStyleChange:e=>{i(e)},openStyleModal:()=>{t(ez.b.LIST)},onSelectProject:l,onCreateProject:e=>{n({isOpen:!0,moveAttachments:e})},openFeaturePreviewModal:r}},eR=()=>{let{addError:e}=(0,eE.e)(),{setIsUploadingDriveSync:t,setSyncSourceUuids:n}=(0,v.r)(),{mutate:s}=(0,x.cE)({onMutate:()=>{t(!0)},onSuccess:e=>{t(!1),n(t=>[...t,e.uuid])},onError:n=>{t(!1),e((0,eI.A)(n))},meta:{noToast:!0}});return e=>s({sync_source_type:Q.Fg.GDRIVE,sync_source_config:{uri:e}})},eP=()=>{let{projectUuid:e,setProjectUuid:t}=(0,v.r)();return n=>{e===n?t(void 0):t(n)}},eO=()=>{let{addError:e}=(0,eE.e)(),t=(0,m.Z)(),{handleUpload:n}=(0,v.r)();return async()=>{let s=null;try{s=await (0,eS.n)({width:1568,height:1568})}catch(n){(0,eZ.Tb)(n),e(t.formatMessage({defaultMessage:"Could not capture screen",id:"GT8HkzCHoM"}))}if(!s)return;let a=new File([await fetch(s.imageDataUrl).then(e=>e.blob())],"screenshot.png",{type:"image/png"});await n([a])}},eF=()=>{let{setPaprikaMode:e}=(0,v.r)();return t=>{e("extended"===t?"extended":void 0)}},eU=()=>{let{setPersonalizedStyle:e}=(0,v.r)(),t=(0,e_.z$)(),{personalizedStyleOptions:n,setStoredStyle:s}=(0,ed.O)();return a=>{let i=n.find(e=>e.key===a);if(!i)return;e(i);let l=(0,eT.X)(i);s({styleKey:l,timestamp:new Date}),t.track({event_key:"styles.selected",style_key:l})}};var eL=n(81695);let eH="chat-input-menu-search-input",eG=()=>{if((0,T.r3)())return;let e=document.getElementById(eH);e&&e.focus()},eK=e=>{let{menuItems:t,searchItems:n,inputMenuIsOpen:s,setInputMenuIsOpen:a,inputMenuSearchQuery:i,setInputMenuSearchQuery:l,path:r,handleUpdatePath:o,highlightedItemKey:c,setHighlightedItemKey:d}=e,m=(0,eL.useRouter)(),{currentItems:p,parentItem:x}=(()=>{if(i.trim().length>0)return{currentItems:n,parentItem:null};if(r){let e=t.find(e=>e.key===r);if(e&&"children"in e)return{parentItem:e,currentItems:e.children}}return{parentItem:null,currentItems:t}})(),h=(0,u.useCallback)(e=>{if("toggleGroup"===e.type||"optionGroup"===e.type||"buttonGroup"===e.type)a(!0),o(e.key,!0);else if("button"===e.type||"switch"===e.type||"toggle"===e.type||"option"===e.type){var t;null===(t=e.onClick)||void 0===t||t.call(e)}},[a,o]),f=(0,u.useCallback)(()=>{r&&(o(null),d(r),eG())},[r,d,o]),g=(0,u.useCallback)(e=>{let t;let n=p.filter(e=>!["subheader","divider"].includes(e.type)&&!e.isDisabled),s=n.findIndex(e=>{let{key:t}=e;return t===c});t="ArrowUp"===e?s>0?s-1:n.length-1:s<n.length-1?s+1:0,d(n[t].key)},[p,c,d]),v=(0,u.useCallback)(e=>{var t,n,i;if(!s){h(e);return}if(!e.isDisabled){if("pro"===e.tag){m.push("/upgrade/pro");return}if(l(""),"back"===e.type){f();return}if("button"===e.type){null===(t=e.onClick)||void 0===t||t.call(e),a(!1);return}if("toggleGroup"===e.type||"optionGroup"===e.type||"buttonGroup"===e.type){o(e.key),d(null),eG();return}("option"===e.type||"switch"===e.type)&&(null===(n=e.onClick)||void 0===n||n.call(e),a(!1,{withDelay:!0})),"toggle"===e.type&&(null===(i=e.onClick)||void 0===i||i.call(e),eG())}},[f,h,o,s,l,m,a,d]),j=(0,u.useCallback)(e=>{if(!c)return;let t=p.find(e=>{let{key:t}=e;return t===c});t&&("Enter"===e||["optionGroup","toggleGroup","buttonGroup"].includes(t.type))&&v(t)},[c,p,v]);return(0,u.useEffect)(()=>{if(!s)return;let e=e=>{if("Tab"===e.key&&e.preventDefault(),"Escape"===e.key)a(!1);else if("ArrowUp"===e.key||"ArrowDown"===e.key)g(e.key);else if("ArrowRight"===e.key||"Enter"===e.key)j(e.key);else{if("ArrowLeft"!==e.key)return;f()}e.preventDefault()};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[s,a,g,j,f]),{menuView:{currentItems:p,parentItem:x,rootItems:t},handleClickItem:v,setHighlightedItemKey:d,highlightedItemKey:c}};var eB=n(86973),eq=n(29860),eY=n.n(eq);let eV={includeScore:!0,isCaseSensitive:!1,ignoreLocation:!0,threshold:.4},eW=e=>{let{actions:t,inputMenuSearchQuery:n,inputMenuIsOpen:s,menuItems:i,path:l}=e,r=(0,u.useRef)(n),{handleSearchDrive:o,searchedDriveItems:c}=eJ({path:l,actions:t,inputMenuSearchQuery:n,inputMenuIsOpen:s}),{handleSearchProjects:d,searchedProjectItems:m}=eX({path:l,actions:t,inputMenuSearchQuery:n,inputMenuIsOpen:s}),{handleFilterMenuItems:p,filteredMenuItems:x}=eQ({path:l,inputMenuSearchQuery:n,menuItems:i}),h=(0,u.useCallback)(()=>{p(),d(),o()},[p,d,o]),f=(0,u.useMemo)(()=>eY()(()=>{h()},100),[h]);return((0,u.useEffect)(()=>{if(n&&s&&n!==r.current)return r.current=n,f(),()=>{f.cancel()}},[s,n,f]),x.length||m.length||c.length)?[x,m,c].reduce((e,t,n)=>[...e,...e.length&&t.length?[{key:"divider".concat(n+1),type:"divider",label:""}]:[],...t],[]):[{key:"loading",type:"button",label:"No results found",icon:(0,a.jsx)(eu.Y,{size:16}),onClick:()=>void 0,isDisabled:!0}]},eQ=e=>{let{path:t,inputMenuSearchQuery:n,menuItems:s}=e,[a,i]=(0,u.useState)([]);return"projects"!==t&&"drive"!==t?{handleFilterMenuItems:()=>{let e=n.toLowerCase();if(!e)return s;let t=[];for(let e of s)t.push(e),!e.isDisabled&&"projects"!==e.key&&"drive"!==e.key&&"children"in e&&e.children&&t.push(...e.children);i(t.filter(t=>"back"!==t.type&&"divider"!==t.type&&"string"==typeof t.label&&t.label.toLowerCase().includes(e)).slice(0,7))},filteredMenuItems:a}:{handleFilterMenuItems:()=>[],filteredMenuItems:[]}},eX=e=>{let{path:t,actions:n,inputMenuSearchQuery:s,inputMenuIsOpen:i}=e,l="projects",r=(0,ec.U)(),[o,c]=(0,u.useState)([]),{data:d}=(0,es.u0)({defer:i&&r}),m=(0,u.useMemo)(()=>new eB.Z(d||[],{...eV,keys:["name","description"]}),[d]);return r&&(t===l||!t)?{handleSearchProjects:()=>{let e=s.toLowerCase();if(!e||!d)return[];c(m.search(e,{limit:t===l?10:5}).map(e=>({type:"button",key:e.item.uuid,label:e.item.name,icon:(0,a.jsx)(R.j,{}),onClick:()=>n.onSelectProject(e.item.uuid)})))},searchedProjectItems:o}:{handleSearchProjects:()=>[],searchedProjectItems:[]}},eJ=e=>{let{path:t,actions:n,inputMenuSearchQuery:s,inputMenuIsOpen:i}=e,l="drive",r=(0,er.Aj)(),[o,c]=(0,u.useState)([]),{recentDriveDocs:d}=(0,er.td)(i),m=(0,u.useMemo)(()=>new eB.Z(d,{...eV,keys:["title"]}),[d]);return r&&(t===l||!t)?{handleSearchDrive:()=>{let e=s.toLowerCase();if(!e||!d)return[];c(m.search(e,{limit:t===l?10:5}).map(e=>({key:e.item.uri,type:"button",label:e.item.title||"",icon:(0,a.jsx)(V.j0,{type:Q.Fg.GDRIVE,variant:V.cT.DOCS,size:16}),onClick:()=>{n.createDriveSyncSource(e.item.uri)}})))},searchedDriveItems:o}:{handleSearchDrive:()=>[],searchedDriveItems:[]}},e$={path:null,inputMenuSearchQuery:"",setInputMenuSearchQuery:K(),inputMenuIsOpen:!1,setInputMenuIsOpen:K(),actions:{onToggleConvoAndAccountSetting:K(),onSelectProject:K(),onUpload:K(),onAddScreenshot:K(),openGithubModal:K(),initDriveAuth:K(),createDriveSyncSource:K(),onStyleChange:K(),openStyleModal:K(),onCreateProject:K(),openFeaturePreviewModal:K(),onTogglePaprika:K()},menuView:{rootItems:[],currentItems:[],parentItem:null},handleClickItem:K(),highlightedItemKey:null,setHighlightedItemKey:K(),styleModalOpenWithScreen:null,setStyleModalOpenWithScreen:K(),createProjectModalIsOpen:null,setCreateProjectModalIsOpen:K(),githubModalIsOpen:!1,setGithubModalIsOpen:K(),animationDirection:"none"},e0=(0,u.createContext)(e$);function e1(e){let{children:t}=e,n=(0,u.useRef)(null),[s,i]=(0,u.useState)(null),[l,r]=(0,u.useState)(null),[o,c]=(0,u.useState)(""),[d,m]=(0,u.useState)(!1),[p,x]=(0,u.useState)(null),[h,f]=(0,u.useState)(!1),[g,v]=(0,u.useState)(null),j=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!d&&e){m(!0);return}if(d&&!e){c("");let e=()=>{y(null,!0),r(null),m(!1)};t.withDelay?setTimeout(e,200):e()}},y=(e,t)=>{t?n.current=e:n.current=s,i(e)},b=eD({setStyleModalOpenWithScreen:v,setCreateProjectModalIsOpen:x,setGithubModalIsOpen:f}),w=ev({actions:b,inputMenuIsOpen:d}),k=eW({actions:b,inputMenuSearchQuery:o,inputMenuIsOpen:d,menuItems:w,path:s}),{menuView:C,handleClickItem:N}=eK({menuItems:w,searchItems:k,inputMenuIsOpen:d,setInputMenuIsOpen:j,inputMenuSearchQuery:o,setInputMenuSearchQuery:c,path:s,handleUpdatePath:y,highlightedItemKey:l,setHighlightedItemKey:r}),M=n.current&&!s?"back":!n.current&&s?"forward":"none";return(0,a.jsx)(e0.Provider,{value:{path:s,inputMenuSearchQuery:o,setInputMenuSearchQuery:c,inputMenuIsOpen:d,setInputMenuIsOpen:j,actions:b,menuView:C,handleClickItem:N,highlightedItemKey:l,setHighlightedItemKey:r,styleModalOpenWithScreen:g,setStyleModalOpenWithScreen:v,createProjectModalIsOpen:p,setCreateProjectModalIsOpen:x,githubModalIsOpen:h,setGithubModalIsOpen:f,animationDirection:M},children:t})}function e2(){return(0,u.useContext)(e0)}let e5=()=>(0,T.tq)()?null:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e3,{itemKey:I.Mm.UPLOAD}),(0,a.jsx)(e3,{itemKey:I.Mm.ADD_SCREENSHOT}),(0,a.jsx)(e3,{itemKey:I.Mm.DRIVE}),(0,a.jsx)(e3,{itemKey:I.Mm.GITHUB}),(0,a.jsx)(e7,{}),(0,a.jsx)(e3,{itemKey:I.Mm.EXTENDED_THINKING}),(0,a.jsx)(e3,{itemKey:I.Mm.COMPASS}),(0,a.jsx)(e4,{}),(0,a.jsx)(e6,{})]}),e3=e=>{let{itemKey:t}=e,{menuView:{rootItems:n}}=e2(),s=n.find(e=>e.key===t);return s?(0,a.jsx)(e9,{menuItem:s,icons:[s.icon],tooltip:s.label}):null},e7=()=>{let e=(0,m.Z)(),{menuView:{rootItems:t}}=e2(),n=t.find(e=>e.key===I.Mm.SEARCH_AND_TOOLS);if(!n||"toggleGroup"!==n.type)return null;let s=(0,a.jsxs)("div",{className:"border-0.5 border-border-300 bg-bg-000/50 rounded-[10px] bg-accent-secondary-100/[8%] h-[18px] text-[10px] font-medium px-1 flex items-center justify-center",children:["+",n.enabledCount-1]}),i=n.children.filter(e=>"toggle"===e.type&&["driveSearch","webSearch","gmail","gcal"].includes(e.key)&&e.isChecked).map(e=>e.icon),l=0===i.length?[(0,a.jsx)(D.T,{size:16},"globe")]:i.length<=2?i:[i[0],s];return(0,a.jsx)(e9,{icons:l,menuItem:n,tooltip:e.formatMessage({defaultMessage:"Search",id:"xmcVZ0BU63"})})},e4=()=>{let e=(0,m.Z)(),{menuView:{rootItems:t}}=e2(),n=t.find(e=>"styles"===e.key);return n&&"optionGroup"===n.type?(0,a.jsx)(e9,{menuItem:n,icons:[(0,a.jsx)(A.x,{size:16},"styles")],text:n.selectedLabel,className:"inline-flex min-w-0 !shrink",buttonClassName:"!shrink",tooltip:e.formatMessage({defaultMessage:"Style",id:"7mL9QEUFav"})}):null},e6=()=>{let e=(0,m.Z)(),{menuView:{rootItems:t}}=e2(),n=t.find(e=>e.key===I.Mm.PROJECTS);return n&&"optionGroup"===n.type?(0,a.jsx)(e9,{menuItem:n,icons:[(0,a.jsx)(R.j,{size:16},"shapes")],text:n.selectedLabel,className:"inline-flex min-w-0 !shrink-[2]",buttonClassName:"!shrink-[2]",tooltip:e.formatMessage({defaultMessage:"Project",id:"k36uSwr4q5"})}):null},e8={visible:{opacity:1,width:"auto",transition:{opacity:{delay:.1}}},hidden:{opacity:0,width:0,transition:{width:{delay:.1}}}},e9=e=>{let{icons:t,text:n,className:s,buttonClassName:i,menuItem:l,tooltip:r}=e,u=L((null==l?void 0:l.key)||""),{handleClickItem:m}=e2();if(!l||l.isDisabled)return null;let{indicatorActive:p}=l;return(0,a.jsx)(c.M,{initial:!1,children:(p||u)&&(0,a.jsx)(Z.u,{tooltipContent:r,side:"top",align:"center",children:(0,a.jsx)("div",{children:(0,a.jsx)(d.E.div,{className:(0,o.Z)("min-w-0 shrink-0",s),variants:e8,initial:"hidden",animate:"visible",exit:"hidden",children:(0,a.jsxs)(z.z,{variant:"unstyled",size:"unset",className:(0,o.Z)("min-w-0 border-0.5 border-border-300 transition-colors h-7 min-w-7 rounded-lg flex items-center px-1.5 gap-1",p?"text-accent-secondary-100 hover:text-accent-secondary-000 bg-accent-secondary-100/[8%] hover:bg-accent-secondary-100/[12%]":"text-text-300 hover:text-text-200/90 hover:bg-bg-100",i),onClick:()=>m(l),children:[t&&t.length?t.map((e,t)=>(0,a.jsx)("div",{className:"w-4 h-4 flex items-center justify-center",children:e},t)):null,!!n&&(0,a.jsx)("p",{className:"text-xs tracking-tight text-ellipsis whitespace-nowrap break-words overflow-hidden min-w-0",children:n})]})})})})})},te=e=>{let{children:t,duration:n=200,delay:s=0,easing:i="ease-in-out",className:l="",onTransitionEnd:r=()=>void 0}=e,c=(0,u.useRef)(null),[d,m]=(0,u.useState)("auto"),p=(0,u.useRef)(null);return(0,u.useEffect)(()=>{if(c.current)return p.current=new ResizeObserver(e=>{for(let t of e){let e=t.contentRect.height;m("".concat(e,"px"))}}),p.current.observe(c.current),()=>{p.current&&p.current.disconnect()}},[]),(0,a.jsx)("div",{style:{height:d,transitionDelay:"".concat(s,"ms"),transitionTimingFunction:i,transitionDuration:"".concat(n,"ms"),transitionProperty:"height"},className:(0,o.Z)("overflow-hidden",l),onTransitionEnd:()=>{r()},children:(0,a.jsx)("div",{className:"w-full",ref:c,children:t})})};var tt=n(28386),tn=n(5984),ts=n(9677),ta=n(7992),ti=n(60983),tl=n(85689),tr=n(54891),to=n(39727);let tc=e=>{let{count:t}=e;return(0,a.jsx)("span",{className:"w-[1.125rem] h-[1.125rem] border-border-300 border-0.5 flex items-center justify-center text-[0.625rem] font-medium bg-accent-secondary-900 text-accent-secondary-100 rounded-full",children:t})};function td(){let e=(0,s._)(["\n  flex \n  flex-row \n  items-center \n  flex-1 \n  min-w-0\n"]);return td=function(){return e},e}function tu(){let e=(0,s._)(["\n  flex-1\n  text-[0.75rem]\n  text-text-500\n"]);return tu=function(){return e},e}let tm=e=>{let{item:t,onClick:n,isSelected:s,isHighlighted:i,onMouseOver:l}=e,r=i&&!(0,T.r3)(),c={disabled:t.isDisabled,onClick:t.isDisabled?void 0:n,onMouseOver:l},d=t.isDisabled||"pro"===t.tag||"new chat"===t.tag;return"subheader"===t.type?(0,a.jsx)(tp,{tooltip:t.tooltip,tooltipImage:t.tooltipImage,children:(0,a.jsx)(tx,{...c,children:(0,a.jsx)(tg,{children:t.label})})}):"button"===t.type?(0,a.jsx)(tp,{tooltip:t.tooltip,tooltipImage:t.tooltipImage,children:(0,a.jsxs)(tx,{className:(0,o.Z)("primary"===t.variant&&"justify-center pr-4","primary"===t.variant&&r&&"!bg-accent-secondary-900/50 !text-accent-secondary-100"),isHighlighted:r,...c,children:[(0,a.jsx)(th,{appearsDisabled:d,isHighlighted:r,itemKey:t.key,children:t.icon}),(0,a.jsxs)(tf,{children:[(0,a.jsx)(tv,{isHighlighted:r,appearsDisabled:d,children:t.label}),(0,a.jsx)(ty,{tag:t.tag})]}),t.isExternal&&(0,a.jsx)(ta.O,{size:16,className:"text-text-500 opacity-80"})]})}):"buttonGroup"===t.type?(0,a.jsx)(tp,{tooltip:t.tooltip,tooltipImage:t.tooltipImage,children:(0,a.jsxs)(tx,{...c,isHighlighted:r,children:[(0,a.jsx)(th,{appearsDisabled:d,isHighlighted:r,itemKey:t.key,children:t.icon}),(0,a.jsxs)(tf,{children:[(0,a.jsx)(tv,{isHighlighted:r,appearsDisabled:d,children:t.label}),(0,a.jsx)(ty,{tag:t.tag})]}),(0,a.jsx)(ti.T,{className:"h-4 w-4 text-text-500 opacity-80"})]})}):"toggleGroup"===t.type?(0,a.jsx)(tp,{tooltip:t.tooltip,tooltipImage:t.tooltipImage,children:(0,a.jsxs)(tx,{...c,isHighlighted:r,children:[(0,a.jsx)(th,{appearsDisabled:d,isHighlighted:r,itemKey:t.key,children:t.icon}),(0,a.jsxs)(tf,{children:[(0,a.jsx)(tv,{isHighlighted:r,appearsDisabled:d,children:t.label}),(0,a.jsx)(ty,{tag:t.tag})]}),t.enabledCount>0&&(0,a.jsx)(tc,{count:t.enabledCount}),(0,a.jsx)(ti.T,{className:"h-4 w-4 text-text-500 opacity-80"})]})}):"optionGroup"===t.type?(0,a.jsx)(tp,{tooltip:t.tooltip,tooltipImage:t.tooltipImage,children:(0,a.jsxs)(tx,{...c,isHighlighted:r,children:[(0,a.jsx)(th,{appearsDisabled:d,isHighlighted:r,itemKey:t.key,children:t.icon}),(0,a.jsxs)(tf,{children:[(0,a.jsx)(tv,{isHighlighted:r,appearsDisabled:d,children:t.label}),(0,a.jsx)(ty,{tag:t.tag})]}),(0,a.jsx)("span",{className:"flex-1 text-right shrink text-[0.875rem] text-text-500 opacity-70 text-ellipsis break-words whitespace-nowrap min-w-0 overflow-hidden",children:t.selectedLabel}),(0,a.jsx)(ti.T,{className:"h-4 w-4 text-text-500 opacity-80"})]})}):"toggle"===t.type||"switch"===t.type?(0,a.jsx)(tp,{tooltip:t.tooltip,tooltipImage:t.tooltipImage,children:(0,a.jsxs)(tx,{...c,className:(0,o.Z)("active:!scale-100",s&&"text-primary-500"),isHighlighted:r,children:[(0,a.jsx)(th,{appearsDisabled:d,isHighlighted:r,itemKey:t.key,children:t.icon}),(0,a.jsxs)(tf,{children:[(0,a.jsx)(tv,{isHighlighted:r,appearsDisabled:d,children:t.label}),(0,a.jsx)(ty,{tag:t.tag})]}),"toggle"===t.type?(0,a.jsx)(tn.XZ,{checked:s,label:"",hideLabel:!0,className:(0,o.Z)("!-mt-1",d&&"opacity-50",t.isDisabled&&"!cursor-default")}):(0,a.jsx)("label",{children:(0,a.jsx)(ts.Z,{readOnly:!0,height:16,width:28,checked:t.isChecked,className:(0,o.Z)(!t.isDisabled&&"!cursor-pointer",d&&"opacity-50")})})]})}):"option"===t.type?(0,a.jsx)(tp,{tooltip:t.tooltip,tooltipImage:t.tooltipImage,children:(0,a.jsxs)(tx,{...c,className:(0,o.Z)(s&&"text-primary-500",!!t.subtitle&&"h-[3rem]"),isHighlighted:r,children:[(0,a.jsx)("div",{className:"w-4 h-4 text-accent-secondary-100 shrink-0",children:s&&(0,a.jsx)(tl.J,{weight:"bold"})}),(0,a.jsxs)("div",{className:"flex flex-col flex-1 gap min-w-0",children:[(0,a.jsxs)(tf,{children:[(0,a.jsx)(tv,{isHighlighted:r,appearsDisabled:d,children:t.label}),(0,a.jsx)(ty,{tag:t.tag})]}),!!t.subtitle&&(0,a.jsx)(tj,{children:t.subtitle})]})]})}):"divider"===t.type?(0,a.jsx)("div",{className:"h-[0.5px] my-1.5 mx-0.5 bg-border-300"}):"back"===t.type?(0,a.jsx)(tp,{tooltip:t.tooltip,tooltipImage:t.tooltipImage,children:(0,a.jsxs)(tx,{...c,isHighlighted:r,children:[(0,a.jsx)(th,{itemKey:t.key,children:(0,a.jsx)(to.X,{size:16,className:(0,o.Z)("h-4 w-4",r?"!text-text-400":"!text-text-500")})}),(0,a.jsx)("span",{className:"relative",children:(0,a.jsxs)(tf,{children:[(0,a.jsx)(tv,{className:(0,o.Z)("opacity-100 transition-opacity",r?"!text-text-400":"!text-text-500"),children:t.label}),(0,a.jsx)(ty,{tag:t.tag})]})})]})}):null},tp=e=>{let{tooltip:t,tooltipImage:n,children:s}=e;n&&(new Image().src=n);let i=(0,a.jsx)("div",{className:"",children:s});return t?(0,a.jsx)(Z.u,{sideOffset:10,contentStyle:"inputMenu",tooltipContent:(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[!!n&&(0,a.jsx)("img",{src:n,alt:"",className:"rounded-[6px] overflow-hidden w-[12.5rem]"}),(0,a.jsx)("p",{className:"p-1",children:t})]}),side:"right",children:i}):i},tx=e=>{let{isHighlighted:t,className:n,...s}=e;return(0,a.jsx)("button",{...s,className:(0,o.Z)("group flex w-full items-center text-left gap-2.5 h-[2rem] py-auto px-1.5 text-[0.875rem] text-text-200 rounded-md transition-colors",t&&!s.disabled&&"!bg-bg-200/50 !text-text-000",n,!s.disabled&&"active:scale-[0.995]")})},th=e=>{let{appearsDisabled:t,isHighlighted:n,itemKey:s,children:i,...l}=e,r=U(s),c=L(s),{toggleInputMenuPinned:d}=H();return(0,a.jsx)("div",{className:(0,o.Z)("group/icon h-4 w-4 flex items-center justify-center text-text-500 shrink-0",t&&"opacity-50",n&&!t&&"!text-text-100"),...l,children:r?(0,a.jsxs)("div",{className:"relative w-full h-full",children:[(0,a.jsx)("div",{className:"group-hover/icon:opacity-0 transition",children:i}),(0,a.jsx)("button",{className:"opacity-0 group-hover/icon:opacity-100 transition absolute top-0 left-0 w-full h-full flex items-center justify-center bg-bg-400 rounded",onClick:e=>{r&&(e.stopPropagation(),d(s,!c))},children:(0,a.jsx)(tr.Q,{size:12,weight:c?"fill":"regular"})})]}):i})},tf=i.q.div(td()),tg=e=>{let{className:t,...n}=e;return(0,a.jsx)("p",{...n,className:(0,o.Z)("text-[0.8125rem] text-text-500 text-ellipsis break-words whitespace-nowrap min-w-0 overflow-hidden",t)})},tv=e=>{let{appearsDisabled:t,isHighlighted:n,className:s,...i}=e;return(0,a.jsx)("p",{...i,className:(0,o.Z)("text-[0.9375rem] text-text-300 text-ellipsis break-words whitespace-nowrap min-w-0 overflow-hidden",n&&!t&&"!text-text-100",s,t&&"opacity-50")})},tj=i.q.p(tu()),ty=e=>{let{tag:t}=e;return t?(0,a.jsx)("div",{className:(0,o.Z)("uppercase inline-flex items-center text-[0.5625rem] font-medium border-border-300 border-0.5 h-4 px-2 rounded-2xl ml-2.5 relative top-[1px]","pro"===t&&"text-accent-pro-100 bg-accent-pro-900","new chat"===t&&"text-text-300 bg-bg-500/30","beta"===t&&"text-accent-secondary-100 bg-accent-secondary-900/30"),children:t}):null};var tb=n(19186);let tw=()=>{let e=(0,m.Z)(),t=(0,T.r3)(),{path:n,inputMenuSearchQuery:s,setInputMenuSearchQuery:i}=e2(),l="drive"===n?e.formatMessage({defaultMessage:"Search Drive",id:"cwjgpY/hPP"}):"projects"===n?e.formatMessage({defaultMessage:"Search projects",id:"doPT7U8q21"}):e.formatMessage({defaultMessage:"Search",id:"xmcVZ0BU63"});return(0,a.jsxs)("div",{className:(0,o.Z)("flex flex-row items-center gap-2.5 px-1.5 w-full rounded-md border border-transparent h-[2rem]",t?"focus-within:border focus-within:!border-accent-secondary-100":"border !border-accent-secondary-100"),children:[(0,a.jsx)(tb.Y,{size:16}),(0,a.jsx)("input",{autoFocus:!t,id:eH,className:"block bg-transparent outline-none leading-6 placeholder:text-text-500/70 text-[15px] text-text-300 w-full",placeholder:l,value:s,onChange:e=>i(e.target.value)})]})};var tk=n(75709);let tC=e=>{let{onDoubleClick:t}=e,n=(0,u.useRef)(null),{menuView:{rootItems:s},inputMenuIsOpen:i,setInputMenuIsOpen:l}=e2(),r=(0,T.tq)(),o=s.filter(e=>{let{indicatorActive:t}=e;return t}).length,{setPaprikaMode:c}=(0,v.r)(),{showNux:d,canActivateExtendedThinking:m}=(0,tk.q)();return(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsxs)(z.z,{ref:n,variant:"unstyled",size:"unset",className:"text-text-300 h-7 px-1.5 rounded-lg transition border-0.5 border-border-300 max-xs:w-full flex flex-row items-center gap-0.5 hover:text-text-200/90 hover:bg-bg-100",onClick:()=>{l(!i)},onDoubleClick:e=>{i||(e.preventDefault(),null==t||t())},"aria-expanded":i,"aria-haspopup":"listbox","aria-controls":"input-menu",children:[(0,a.jsx)(ee.v,{size:16}),r&&(0,a.jsx)(tc,{count:o})]}),d&&(0,a.jsx)(tk.c,{anchorRef:n,onClickSelect:()=>{m?c("extended"):l(!0)}})]})},tN={forward:{initial:{x:"20%",opacity:0},animate:{x:0,opacity:1}},back:{initial:{x:"-20%",opacity:0},animate:{x:0,opacity:1}},none:{initial:{x:0,opacity:0},animate:{x:0,opacity:1}}},tM=e=>{let{placement:t}=e,{path:n,menuView:s,highlightedItemKey:i,setHighlightedItemKey:l,handleClickItem:r,inputMenuIsOpen:m,setInputMenuIsOpen:x,actions:h,animationDirection:f}=e2(),g=(0,u.useRef)(null),v=(0,u.useRef)(null),[j,y]=(0,u.useState)(void 0);return(0,u.useEffect)(()=>{if(m&&v.current){let e=eY()(()=>{if(!v.current)return;let e=v.current.getBoundingClientRect();y(Math.max(120,"bottom"===t?e.bottom-76:window.innerHeight-e.top-8))},100);return e(),window.addEventListener("resize",e),window.addEventListener("scroll",e),()=>{window.removeEventListener("resize",e),window.removeEventListener("scroll",e)}}},[m,t]),(0,p.t$)(g,()=>{x(!1)},"mouseup"),(0,p.t$)(g,()=>{x(!1)},"touchend"),(0,a.jsxs)("div",{className:"relative shrink-0",onClick:e=>{e.preventDefault()},ref:g,children:[(0,a.jsx)(tC,{onDoubleClick:h.onUpload}),(0,a.jsx)(c.M,{children:m&&(0,a.jsx)(d.E.div,{ref:v,initial:"closed",exit:"closed",animate:"open",variants:{open:{opacity:1},closed:{opacity:0}},transition:{height:{ease:"easeInOut"}},className:(0,o.Z)("h-auto overflow-y-auto absolute z-dropdown bg-bg-000 rounded-lg overflow-hidden border-border-300 border-0.5 w-[22.5rem] shadow-diffused shadow-[hsl(var(--always-black)/4%)] left-0","bottom"===t?"bottom-9 max-w-[calc(100vw-36px)]":"top-9 max-w-[calc(100vw-44px)]"),onMouseLeave:()=>l(null),style:{maxHeight:j?"".concat(j,"px"):void 0},children:(0,a.jsx)(te,{className:(0,o.Z)("flex flex-col w-full","bottom"===t?"items-end":"items-start"),children:(0,a.jsxs)("div",{className:"p-1.5 flex flex-col gap-1",children:[(0,a.jsx)(tw,{}),(0,a.jsx)(d.E.div,{variants:tN[f],initial:"initial",animate:"animate",className:"flex flex-col",transition:{ease:tt.J.inOutQuart},children:s.currentItems.map(e=>(0,a.jsx)(tm,{item:e,onClick:()=>r(e),isSelected:tS(e,s.parentItem),isHighlighted:i===e.key,onMouseOver:()=>l(e.key)},e.key))},null!=n?n:"root")]})})})})]})},tS=(e,t)=>"toggle"===e.type&&!!e.isChecked||"option"===e.type&&(null==t?void 0:t.type)==="optionGroup"&&e.value===t.selectedValue,t_=e=>{let{placement:t,isDisabled:n}=e,s=(0,m.Z)(),{projectUuid:i,prompt:l,model:r,setModel:o,attachments:c,files:d,syncSourceUuids:p,sendMessage:x,stopSampling:h,conversation:f,isSending:g,paprikaMode:j,setPaprikaMode:y,isChatSyncing:b,isProjectSyncing:w,isModelSelectorOpen:k,setIsModelSelectorOpen:C,isNewConversation:N}=(0,v.r)(),z=b||w?s.formatMessage({defaultMessage:"Syncing knowledge...",id:"QuwefnZNVj"}):void 0,Z=(0,u.useMemo)(()=>{var e;return[...d,...null!==(e=null==f?void 0:f.files)&&void 0!==e?e:[]].some(e=>e.file_kind===M.Y.Image||e.file_kind===M.Y.SanitizedDocument)},[d,f]),A=(0,u.useCallback)(e=>o(e.model),[o]);return(0,a.jsxs)("div",{className:"flex gap-2.5 w-full items-center",children:[(0,a.jsxs)("div",{className:"relative flex-1 flex items-center gap-2 min-w-0",children:[(0,a.jsx)(tM,{placement:t}),(0,a.jsx)(e5,{}),(0,a.jsx)(S.k,{model:r,projectUuid:i,prompt:l,conversation:f})]}),(0,a.jsx)(_.O,{selectedModel:r,onSelect:A,hasMultiModalContent:Z,paprikaMode:j,onPaprikaModeSelect:y,placement:t,open:k,onOpenChange:C,isNewConversation:N}),(0,a.jsx)(E.h,{isSending:g,isDisabled:n,disabledReason:z,prompt:l,files:d,attachments:c,syncSourceUuids:p,conversation:f,onSend:()=>x(),onStop:()=>h()})]})};var tE=n(35354),tz=n(75502),tZ=n(45790);let tA=()=>{let{onDrop:e}=(0,v.r)();return(0,a.jsx)(tE.rE,{onDrop:e,children:(0,a.jsx)(tT,{})})},tT=()=>{let{dragState:e}=(0,tE.EO)(),t=e===tE.h7.DRAGGING_ON_TARGET;return e===tE.h7.DRAGGING_OFF_TARGET||e===tE.h7.DRAGGING_ON_TARGET?(0,a.jsx)("div",{className:"absolute top-0 border border-dashed rounded-2xl min-h-4 h-full w-full border-accent-secondary-100 bg-bg-000 overflow-hidden z-10",children:(0,a.jsx)("div",{className:(0,o.Z)("flex items-center justify-center h-full w-full transition-colors",t?"bg-accent-secondary-900":"bg-accent-secondary-900/50"),children:(0,a.jsxs)("p",{className:"text-accent-secondary-100 flex flex-row items-center gap-2.5",children:[(0,a.jsx)(tz.E,{size:20,className:"opacity-50"}),(0,a.jsx)(tZ.Z,{defaultMessage:"Drop files here to add to chat",id:"IYBR/J+nuA"})]})})}):null};var tI=n(5362),tD=n(52939),tR=n(80151),tP=n(95899),tO=n(92676),tF=n(41139),tU=n(63731);let tL=e=>{let{moveAttachments:t=!1,handleProjectCreated:n,isOpen:s,handleClose:i,syncSources:l=[],attachments:r=[],setSyncSourceUuids:o,setAttachments:c}=e,[d,m]=(0,u.useState)(null),{addError:p}=(0,eE.e)(),x=(0,tF.G)();return tH({project:d,syncSources:l,attachments:r,setSyncSourceUuids:o,setAttachments:c}),(0,a.jsxs)(tD.u_,{isOpen:s,onClose:i,modalSize:"xl",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsx)("h1",{className:"font-copernicus text-text-200 mb-4 text-2xl font-medium tracking-tight",children:t?(0,a.jsx)(tZ.Z,{defaultMessage:"Create a project with attachments",id:"wSxz4Q9mjA"}):(0,a.jsx)(tZ.Z,{defaultMessage:"Create a project",id:"HR5A+UPiIu"})}),(0,a.jsx)(z.z,{onClick:i,size:"icon",variant:"ghost",children:(0,a.jsx)(tR.X,{size:16})})]}),s&&(0,a.jsx)(tU.hK,{syncSources:t?l:void 0,onProjectCreated:e=>{t&&m(e),n(e)},onError:p,onCancel:i,strings:x})]})},tH=e=>{let{project:t,syncSources:n,attachments:s,setSyncSourceUuids:a,setAttachments:i}=e,l=(0,u.useRef)(!1),{addSuccess:r}=(0,eE.e)(),o=(0,m.Z)(),{mutate:c}=(0,tP.u3)(null==t?void 0:t.uuid),{mutate:d}=(0,tO.gr)(null==t?void 0:t.uuid),p=(0,u.useCallback)(()=>{t&&(s.length||n.length&&t.is_private)&&(s.forEach(e=>{let{file_name:t,extracted_content:n}=e;c({file_name:t,content:n})}),t.is_private&&(n.forEach(e=>{let t=(0,em.hJ)(e);t&&d(t)}),a([])),i([]),r(o.formatMessage({defaultMessage:"Attachments successfully added to {projectName}",id:"xw8MJ6Kd/h"},{projectName:t.name||"your project"})))},[t,r,s,c,i,d,a,n,o]);(0,u.useEffect)(()=>{t&&!l.current&&(l.current=!0,p())},[t,p])};var tG=n(3915),tK=n(31275);let tB=()=>{let{projectUuid:e,setProjectUuid:t,setSyncSourceUuids:n,setIsUploadingGithubSync:s,syncSourceUuids:i,attachments:l,setAttachments:r}=(0,v.r)(),{styleModalOpenWithScreen:o,setStyleModalOpenWithScreen:c,createProjectModalIsOpen:d,setCreateProjectModalIsOpen:m,githubModalIsOpen:p,setGithubModalIsOpen:h,actions:f}=e2(),{personalizedStyleOptions:g}=(0,ed.O)(),j=(0,u.useCallback)(e=>{n(t=>[...t,e.uuid]),s(!1)},[n,s]),y=(0,x.aP)(i),b=(0,tI.F9)(y);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(tG.g,{openWithScreen:o,onClose:()=>c(null),styles:g,setChatStyle:e=>f.onStyleChange(e.key)}),(0,a.jsx)(tL,{moveAttachments:!!(null==d?void 0:d.moveAttachments),isOpen:!!(null==d?void 0:d.isOpen),handleClose:()=>m(null),handleProjectCreated:e=>{t(e.uuid),m(null)},syncSources:b,attachments:l,setSyncSourceUuids:n,setAttachments:r}),(0,a.jsx)(tK.U,{location:"chat",projectUuid:e,isOpen:p,onClose:()=>h(!1),onCreated:j,setIsUploadingGithubSync:s})]})};function tq(){let e=(0,s._)(["\n  flex\n  flex-col\n  bg-bg-000\n  border-0.5\n  border-border-300\n  mx-1\n  md:mx-0\n  items-stretch\n  transition-all\n  duration-200\n  relative\n  shadow-[0_0.25rem_1.25rem_hsl(var(--always-black)/3.5%)]\n  focus-within:shadow-[0_0.25rem_1.25rem_hsl(var(--always-black)/7.5%)]\n  hover:border-border-200\n  focus-within:border-border-200\n  cursor-text\n  z-10\n"]);return tq=function(){return e},e}let tY=(0,u.forwardRef)((e,t)=>{var n,s,i,M;let{placement:S,placeholder:_,onSubmit:E}=e,z=(0,m.Z)(),{prompt:Z,tipTapEditorState:A,projectUuid:T,setPrompt:I,setTipTapEditorState:D,setAttachments:R,setFiles:P,attachments:O,files:F,syncSourceUuids:U,isUploadingDriveSync:L,isUploadingGithubSync:H,sendMessage:G,conversation:K,isChatSyncing:B,isProjectSyncing:q,setSyncSourceUuids:Y,isSending:V,focusInput:W,isFocused:Q,setIsFocused:X,promptInputRef:J,willRedirectOnSubmit:$,hasBlockingWarning:ee,isUploadingFile:et,setIsUploadingFile:en,validateMaxUploadLimit:es,onPasteFiles:ea,uploadInputProps:ei,hasAttachments:el,isNewConversation:er}=(0,v.r)();(0,u.useImperativeHandle)(t,()=>({setContent:(e,t,n)=>{I(e,{forceUpdateTiptap:!1}),R("function"==typeof t?t(O):t),P("function"==typeof n?n(F):n)},sendMessage:G,setAttachments:e=>{R("function"==typeof e?e(O):e)},getAttachments:()=>O})),(0,k.v)();let{showNewConversationPrompt:eo,dismissConversationLengthPrompt:ec}=(0,C.a)(null==K?void 0:K.messagesSoFar,null==K?void 0:K.id),{fetchInputAutocompletion:ed}=(0,h.Vl)(null==K?void 0:K.id),eu=(0,b.D)(),em=(0,w.Y)(O,R,en,es,ea,eu),ep=null!==(n=null==K?void 0:K.projectKnowledgebaseTokens)&&void 0!==n?n:0,[ex]=(0,N.X)({conversationUUID:null!==(s=null==K?void 0:K.id)&&void 0!==s?s:null,conversationTokensSoFar:null!==(i=null==K?void 0:K.tokensSoFar)&&void 0!==i?i:0,conversationFiles:null!==(M=null==K?void 0:K.files)&&void 0!==M?M:[],projectKnowledgebaseTokens:ep,input:Z,attachments:O,syncSourceUuids:U}),eh=(0,y.j)(T),{value:ef}=(0,r.F)("test_gated_strings"),eg=(0,p.O_)(),ev=0===Z.length&&0===O.length&&0===F.length&&0===U.length||et||L||H||B||q||ee||"will-exceed"===ex||eh||(null==K?void 0:K.isSampling)===!0,ej=(0,u.useCallback)(async()=>{!ev&&(await G(),E&&E())},[ev,E,G]),ey=(0,u.useCallback)(()=>{X(!0)},[X]),eb=(0,u.useCallback)(()=>{X(!1)},[X]),ew=(0,u.useCallback)(e=>{let t=e.target;"BUTTON"===t.tagName||t.closest("button")||t.closest("[role]")||t.closest("a")||t.closest("input")||t.closest("select")||t.closest("textarea")||W()},[W]),ek=(0,u.useRef)(null),eC=(0,x.aP)(U).map((e,t)=>{let{data:n}=e;return{syncSource:n,uuid:U[t]}}),eN=(0,a.jsx)(c.M,{children:el&&(0,a.jsx)(d.E.div,{className:"overflow-hidden",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},children:(0,a.jsx)(g.F,{isUploadingFile:et,isUploadingSync:L||H,attachments:O,files:F,syncSourceResults:eC,onRemoveAttachment:e=>{R(t=>t.filter((t,n)=>n!==e))},onRemoveFile:e=>{P(t=>t.filter((t,n)=>n!==e))},onRemoveSyncSource:e=>{Y(t=>t.filter(t=>t!==e))}})},"attachments")});if(!eg)return(0,a.jsx)(tV,{className:"rounded-2xl h-[119px]"});let eM=null;return eM=eo?(0,a.jsx)(C.h,{onDismiss:ec,projectUuid:T}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex flex-col gap-3.5 m-3.5",children:[(0,a.jsx)("div",{className:"relative",children:(0,a.jsx)(j.E,{ref:J,prompt:Z,setPrompt:I,tipTapEditorState:A,setTipTapEditorState:D,onSubmit:ej,onFocus:ey,onBlur:eb,placement:S,placeholder:null!=_?_:er?ef?(0,l.lF)({id:"spread_attempt_mind",intl:z}):z.formatMessage({defaultMessage:"How can I help you today?",id:"XLcM6WHfQR"}):ef?(0,l.lF)({id:"window_edge_kiwi",intl:z}):z.formatMessage({defaultMessage:"Reply to Claude...",id:"kSt28+RchS"}),fetchInputAutocompletion:ed})}),(0,a.jsx)(t_,{placement:S,isDisabled:ev})]}),(0,a.jsx)(tA,{}),eN]}),(0,a.jsxs)(e1,{children:[(0,a.jsxs)("fieldset",{className:"flex w-full min-w-0 flex-col",onPasteCapture:e=>{Q&&em(e)},children:[(0,a.jsx)("input",{ref:ek,id:"chat-input-file-upload","data-testid":"file-upload","aria-hidden":"true",tabIndex:-1,className:"absolute -z-10 h-0 w-0 overflow-hidden opacity-0",...ei}),(0,a.jsx)("div",{className:"px-1 md:px-2",children:(0,a.jsx)(f.n,{placement:"bottom"})}),(0,a.jsx)(tV,{onClick:ew,className:(0,o.Z)("rounded-2xl min-h-[119px]",$&&V&&"animated-loading-background","bottom"===S&&"mb-1"),children:eM})]}),(0,a.jsx)(tB,{})]})});tY.displayName="ChatInput";let tV=i.q.div(tq())},768:function(e,t,n){n.d(t,{n:function(){return eE}});var s=n(27573),a=n(6766),i=n(27218),l=n(70354),r=n(6385),o=n(10228),c=n(65683),d=n(97695),u=n(7653),m=n(45790),p=n(8905),x=n(92676),h=n(61377),f=n(15350),g=n(47082),v=n(10607),j=n(7583),y=n(68425);function b(e){let{warning:t,placement:n,theme:a}=e;return(0,s.jsx)(j.M,{children:t&&(0,s.jsx)(y.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},children:(0,s.jsx)("div",{className:(0,v.Z)("border-0.5 relative z-[5] px-3.5","bottom"===n?"-mb-1 rounded-t-xl border-b-0 pb-2.5 pt-2":"-mb-1 -mt-1 rounded-b-xl border-t-0 pb-2 pt-2.5",{"bg-danger-900 border-danger-100/20":"danger"===a,"text-text-200 border-accent-pro-100/20 bg-accent-pro-900":"pro"===a,"bg-bg-200 border-border-300":"info"===a}),children:t})})})}var w=n(91217),k=n(13784),C=n(15992),N=n(67311),M=n(49185),S=n(27895),_=n(11607),E=n(52939),z=n(29670),Z=n(40287),A=n(60509),T=n(2723),I=n(67587),D=n(32151),R=n(5984);function P(e){let{onReady:t,children:n,onSuccess:a}=e,r=(0,D.useStripe)(),o=(0,D.useElements)(),{account:c}=(0,i.t)(),[d,x]=(0,u.useState)(null),[h,f]=(0,u.useState)(!1),[g,v]=(0,u.useState)(!1),{mutateAsync:j}=(0,p.RF)(),y=async()=>{if(!h&&r&&o){f(!0);try{let e=await o.submit();if(e.error){e.error.message&&x(e.error.message);return}let t=await j(),{error:n}=await r.confirmPayment({elements:o,clientSecret:t.clientSecret,redirect:"if_required"});(null==n?void 0:n.message)&&"validation_error"!==n.type&&x(n.message),n||a()}catch(e){x(e.message)}finally{f(!1)}}};return(0,s.jsxs)(R.l0,{onSubmit:()=>{h||y()},children:[(0,s.jsx)(D.PaymentElement,{id:"payment-element",options:{readOnly:h,layout:"tabs",terms:{card:"never"},defaultValues:{billingDetails:{email:null==c?void 0:c.email_address,name:null==c?void 0:c.full_name}}},onReady:()=>{v(!0),t&&t()}}),d&&(0,s.jsx)("div",{className:"text-danger-100 mt-4",id:"payment-message",children:d}),(0,s.jsxs)("div",{className:"mt-5 flex flex-row flex-wrap items-center justify-end gap-3",children:[n,(0,s.jsx)(l.z,{type:"submit",loading:h,variant:"flat",className:"bg-accent-pro-100 hover:bg-accent-pro-200 w-full py-6",disabled:!g,children:(0,s.jsx)(m.Z,{defaultMessage:"Confirm Payment",id:"kpkJdTFTYl"})})]}),(0,s.jsx)("div",{className:"mt-3 text-text-500 text-sm text-center",children:(0,s.jsx)(m.Z,{defaultMessage:"By providing your payment information, you allow Anthropic to charge your card in the amount above. Purchase non-refundable.",id:"0L0VGgMTRs"})})]})}function O(e){let{amount:t,currency:n,children:a,className:i,onSuccess:l}=e,o=(0,A.x)(),[c,d]=(0,u.useState)(!0),{theme:m,mode:p}=(0,I.F)(),x=(0,Z.f)().get(r.cn.COLOR_MODE),h={fontSizeBase:"16px",colorBackground:(0,T.J)(m,p,x,"bg-000"),colorText:(0,T.J)(m,p,x,"text-100")},f={mode:"payment",amount:t,currency:null==n?void 0:n.toLowerCase(),payment_method_types:["card","link"],loader:"never",appearance:{theme:"stripe",variables:h}};return(0,s.jsxs)("div",{className:(0,v.Z)("relative",i),children:[(0,s.jsx)("div",{className:(0,v.Z)("w-full pt-1 transition-opacity duration-1000",{"opacity-0":c}),children:(0,s.jsx)(D.Elements,{options:f,stripe:o,children:(0,s.jsx)(P,{onReady:()=>d(!1),onSuccess:l,children:a})})}),c&&(0,s.jsx)(F,{})]})}let F=()=>(0,s.jsx)("div",{className:"absolute inset-0 flex h-full w-full items-center justify-center",children:(0,s.jsx)(_.Loading,{})});function U(e){var t,n;let a,{isOpen:l,onClose:r,conversationUUID:o}=e,c=(0,S.e)(),{activeOrganization:d}=(0,i.t)(),x=(0,M.n)(),h=(0,u.useCallback)(()=>{c.addSuccess((0,s.jsx)(m.Z,{defaultMessage:"Message limits reset. Lets chat!",id:"LGCoQdVha4"})),(null==d?void 0:d.uuid)&&o&&x({type:"within_limit"},d.uuid,o),r()},[null==d?void 0:d.uuid,o,r,c,x]),{data:f,isLoading:g}=(0,p.w3)();return f&&(a=(0,z.xG)(f.price+(null!==(t=f.taxAmount)&&void 0!==t?t:0),f.currency,{preferWholeNumber:!0})),(0,s.jsx)(E.u_,{isOpen:l,onClose:r,title:(0,s.jsx)("div",{className:"text-text-200 font-copernicus text-xl font-medium tracking-tight mt-2",children:(0,s.jsx)(m.Z,{defaultMessage:"Reset usage limits",id:"YKpO8tTise"})}),hasCloseButton:!0,modalSize:"lg",children:(0,s.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,s.jsxs)("div",{className:"flex p-3 justify-center items-center gap-10 self-stretch rounded-xl border border-accent-pro-100 bg-accent-pro-900 mt-6",children:[(0,s.jsx)("div",{className:"flex flex-col px-5 gap-2",children:g||!f?(0,s.jsx)(_.Loading,{size:"sm"}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("p",{className:"text-text-100 text-3xl/6 font-medium tracking-tighter",children:a}),null===f.taxAmount&&(0,s.jsx)("p",{className:"text-text-500 text-sm/3 tracking-tight text-nowrap",children:(0,s.jsx)(m.Z,{defaultMessage:"+ tax",id:"H/9uGFjKzR"})})]})}),(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)("p",{className:"text-text-200 text-sm tracking-tight",children:(0,s.jsx)(m.Z,{defaultMessage:"Immediately get access to Claude instead of waiting for usage limits to reset.",id:"6Gj58FRZ27"})}),(0,s.jsx)("p",{className:"text-text-200 text-sm tracking-tight",children:(0,s.jsx)(m.Z,{defaultMessage:"This is a one-time payment.",id:"lVfQHZlUq0"})})]})]}),(0,s.jsx)(O,{amount:f?f.price+(null!==(n=f.taxAmount)&&void 0!==n?n:0):500,currency:(null==f?void 0:f.currency)||"USD",onSuccess:h})]})})}function L(e){let{messageLimit:t,placement:n,defaultWarning:a,defaultTheme:i}=e,l=(0,C.useExperiment)("rate_limit_resets").config.get("allow_rate_limit_resets",!1);return l&&("exceeded_limit"===t.type||"approaching_limit"===t.type&&0===t.remaining)?(0,s.jsx)(b,{theme:"pro",placement:n,warning:(0,s.jsx)(G,{messageLimit:t})}):l&&"approaching_limit"===t.type?(0,s.jsx)(b,{theme:"info",placement:n,warning:(0,s.jsx)(H,{messageLimit:t})}):(0,s.jsx)(b,{theme:i,warning:a,placement:n})}let H=e=>{let{messageLimit:t}=e,[n,a]=(0,u.useState)(!1);return(0,s.jsxs)("div",{className:"w-full",children:[(0,s.jsxs)("div",{className:"flex w-full flex-col items-center md:flex-row gap-2",children:[(0,s.jsx)("div",{className:"flex flex-row items-center gap-2 md:w-full",children:(0,s.jsx)("div",{children:(0,s.jsx)("div",{className:"text-sm",children:1===t.remaining?(0,s.jsx)(m.Z,{id:"RoowG4DICE",defaultMessage:"You have 1 message left before hitting usage limits"}):(0,s.jsx)(m.Z,{id:"4rS9S85sm+",defaultMessage:"You have {numMessagesRemaining} messages left before hitting usage limits",values:{numMessagesRemaining:t.remaining}})})})}),(0,s.jsx)("div",{className:"-mt-px w-full whitespace-nowrap md:w-fit",children:(0,s.jsx)(l.z,{variant:"unstyled",className:(0,v.Z)("@lg:w-fit w-full shrink-0","text-sm font-medium","text-accent-pro-100","hover:text-accent-pro-000 hover:bg-bg-500/40"),onClick:()=>{a(!0)},children:(0,s.jsx)(m.Z,{id:"0Lg76lu7jn",defaultMessage:"Reset limits"})})})]}),(0,s.jsx)(U,{isOpen:n,onClose:()=>a(!1),conversationUUID:t.conversationUUID})]})},G=e=>{let{messageLimit:t}=e,n=k.ou.fromSeconds(t.resetsAt),[a,i]=(0,u.useState)(!1);return(0,s.jsxs)(N.P,{minimalUi:!0,actionButton:(0,s.jsxs)(l.z,{variant:"unstyled",size:"sm",className:(0,v.Z)("@lg:w-fit w-full shrink-0","bg-accent-pro-100 text-oncolor-100 font-medium font-styrene transition-colors hover:bg-accent-pro-200"),onClick:()=>{i(!0)},children:[(0,s.jsx)(m.Z,{id:"0Lg76lu7jn",defaultMessage:"Reset limits"}),(0,s.jsx)("span",{className:"inline-block text-[0.65rem] bg-bg-000/20 ml-2 px-1.5 py-0.5 rounded",children:(0,s.jsx)(m.Z,{id:"vroSRZd5vI",defaultMessage:"BETA"})})]}),children:[(0,s.jsx)(m.Z,{id:"74NSYSM2xX",defaultMessage:"You can reset usage limits now or wait until {time}.",values:{time:(0,s.jsx)("span",{className:"inline-block",children:n.toLocaleString(k.ou.TIME_SIMPLE)})}}),(0,s.jsx)(U,{isOpen:a,onClose:()=>i(!1),conversationUUID:t.conversationUUID})]})};var K=n(71912),B=n(90377),q=n(3053),Y=n(81695);function V(e){let{onDismiss:t}=e,n=(0,q.z$)(),a=(0,Y.useRouter)();(0,u.useEffect)(()=>{n.track({event_key:"chat.conversation.too_long_prompt_warning:loaded"})},[n]);let i=(0,u.useCallback)(()=>{n.track({event_key:"chat.conversation.too_long_prompt_warning:accepted"}),a.push("/chats")},[n,a]),r=(0,u.useCallback)(()=>{n.track({event_key:"chat.conversation.too_long_prompt_warning:dismissed"}),t()},[n,t]);return(0,s.jsx)(B.A,{children:(0,s.jsxs)("div",{className:"text-text-200 flex w-full items-center justify-between",children:[(0,s.jsx)("div",{className:"flex items-center gap-1",children:(0,s.jsx)(m.Z,{defaultMessage:"<bold>Tip:</bold> <span>Long chats cause you to reach your usage limits faster.</span>",id:"Kq9VxBpVQk",values:{bold:e=>(0,s.jsx)("b",{children:e}),span:e=>(0,s.jsx)("span",{children:e})}})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("button",{className:"text-accent-pro-000 font-medium hover:underline",onClick:i,children:(0,s.jsx)(m.Z,{defaultMessage:"Start a new chat",id:"c/Hjsh8c90"})}),"\xa0",(0,s.jsx)(l.z,{className:"ml-2 h-4 w-4 translate-y-[0.5px] rounded",size:"unset",variant:"ghost",onClick:r,children:(0,s.jsx)(c.X,{size:12})})]})]})})}var W=n(88146),Q=n(40950);function X(){let e=(0,i.cs)(),t=(0,Q.Z)();return(0,s.jsx)(N.P,{actionButton:null,title:t.formatMessage({defaultMessage:"Team plan canceled",id:"KuqVOfg9/0"}),children:e?(0,s.jsx)(m.Z,{defaultMessage:"You can no longer chat with Claude. To restore full access, <link>renew your subscription</link>.",id:"L2pC0kiNNO",values:{link:e=>(0,s.jsx)(W.default,{className:"whitespace-nowrap font-medium underline",href:"/settings/billing",children:e})}}):(0,s.jsx)(m.Z,{defaultMessage:"You can no longer chat with Claude.",id:"hxcpUUnV0b"})})}var J=n(82056),$=n(64740);let ee=()=>{let e=(0,J.F)($.n,{allowSelfUpgrade:!1});return(0,s.jsx)(N.P,{actionButton:e,children:(0,s.jsx)(m.Z,{defaultMessage:"Due to capacity constraints, chatting with Claude is currently not available. Please try again shortly.",id:"kfyWX0MxKQ"})})};var et=n(85465),en=n(48894),es=n(18145);let ea=e=>{var t;let n,{inaccessibleSyncSources:a}=e,{chatResourceState:i}=(0,g.Y)(),l=(0,et.l)(),{isDrawerExpanded:r,setIsDrawerExpanded:c}=(0,en.b)(),d=a.every(e=>e.status.state===o.co.UNAUTHENTICATED)&&1===new Set(a.map(e=>e.type)).size,u=null===(t=a[0])||void 0===t?void 0:t.type,p=(0,s.jsx)("button",{onClick:()=>{c(!0)},children:(0,s.jsx)(es.r,{children:(0,s.jsx)(m.Z,{defaultMessage:"Show {count, plural, one {# Item} other {# Items}}",id:"1HlfJxfH7H",values:{count:a.length}})})});return d&&null!==u?n=(0,s.jsx)("button",{onClick:()=>l(u),children:(0,s.jsx)(es.r,{children:(0,s.jsx)(m.Z,{defaultMessage:"Reconnect with {sourceName}",id:"dUareRZF9G",values:{sourceName:o.hP[u]}})})}):i.conversationUUID&&!r&&(n=p),(0,s.jsx)(B.A,{children:(0,s.jsx)(m.Z,{defaultMessage:"Some of your content could not be loaded. {actionButton}",id:"Ibsz06ys2B",values:{actionButton:n}})})};var ei=n(75830),el=n(7418),er=n(5161),eo=n(53949),ec=n(95899),ed=n(4746);function eu(e){let{isOpen:t,setIsOpen:n,files:a,isNewConversation:i}=e,l=(0,Q.Z)();return(0,s.jsxs)(E.u_,{isOpen:t,hasCloseButton:!0,title:l.formatMessage({defaultMessage:"Analysis Tool Required",id:"Cp9J2U6ris"}),onClose:()=>n(!1),children:[(0,s.jsxs)("div",{className:"my-4 text-pretty flex flex-col gap-2",children:[(0,s.jsx)("div",{children:(0,s.jsx)(m.Z,{defaultMessage:"Claude requires the analysis tool to be enabled to analyze the following files:",id:"DWgtKtw1y9"})}),(0,s.jsx)("ul",{className:"list-disc pl-4",children:a.map(e=>(0,s.jsx)("li",{children:e.file_name},e.file_uuid))}),(0,s.jsx)("div",{children:i?l.formatMessage({defaultMessage:"If you start this conversation without turning on the analysis tool, these files will not be available to Claude.",id:"0r1iTiKoSi"}):l.formatMessage({defaultMessage:"Please enable the analysis tool and then start a new chat in this project to analyze these files.",id:"YLHCS8L8fc"})})]}),(0,s.jsx)(E.dm,{layout:"right",children:(0,s.jsx)(E.mH,{type:"button",size:"lg",onClick:()=>n(!1),children:(0,s.jsx)(m.Z,{defaultMessage:"OK",id:"kAEQyVFWDv"})})})]})}function em(e){let{files:t,isNewConversation:n}=e,{track:a}=(0,q.z$)(),{openFeaturePreviewModal:i}=(0,ed.h9)(),[l,r]=(0,u.useState)(!1);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eu,{isOpen:l,setIsOpen:r,isNewConversation:n,files:t}),(0,s.jsx)(B.A,{children:(0,s.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(0,s.jsx)("div",{children:(0,s.jsx)(m.Z,{defaultMessage:"Claude cannot access some of the <a>files attached</a> to this conversation",id:"dlrqZaDnOO",values:{a:e=>(0,s.jsx)("a",{className:"underline",href:"#",onClick:()=>r(!0),children:e})}})}),(0,s.jsx)("div",{children:(0,s.jsx)("a",{className:"text-accent-secondary-000 font-medium",href:"#",onClick:()=>{a({event_key:"claudeai.settings.preview_feature.opened",source:"ooc_files_warning"}),i()},children:(0,s.jsx)(m.Z,{defaultMessage:"Enable analysis tool",id:"UDUWEABw3p"})})})]})})]})}var ep=n(60879),ex=n(28266),eh=n(18013),ef=n(80151),eg=n(48912);let ev=e=>{let{config:t}=(0,C.useConfig)("claude_ai_system_alerts"),n=t.get("alert",null),[a,i]=(0,eh.R)("".concat(e,":").concat(null==n?void 0:n.id,":hideAlertOnConversation"),!1),l=null==n?void 0:n.alertForModels,r=(0,ex.wN)(e);return e&&(!l||l.includes(r))&&n&&!a?{systemAlertFromConfig:{alert:n,component:(0,s.jsx)(ej,{alert:n,setHideAlert:i})}}:{}},ej=e=>{let{alert:t,setHideAlert:n}=e,a=(0,i.w7)(),r=(0,J.F)(es.r);return(0,s.jsxs)(B.A,{children:[(0,s.jsx)(ep.J$,{children:(0,s.jsx)(eg.U,{children:t.bodyMd})}),a&&t.proUpsell&&r,t.isDismissable&&(0,s.jsx)(l.z,{className:"ml-2 h-4 w-4 translate-y-[0.5px] rounded",size:"unset",variant:"ghost",onClick:()=>n(!0),children:(0,s.jsx)(ef.X,{size:12})})]})};var ey=n(96933),eb=n(35548);let ew=e=>{let t=(0,eb.ZW)(e.projectKnowledgebaseTokens,e.maxConversationTokens),n=(0,ey.$H)("push");return(0,s.jsx)(N.P,{actionButton:(0,s.jsx)($.n,{onClick:()=>n({projectUuid:e.projectUuid}),children:(0,s.jsx)(m.Z,{defaultMessage:"Start a new conversation",id:"Lc72GmPP25"})}),children:t?(0,s.jsx)(m.Z,{defaultMessage:"This conversation reached its <link>maximum length</link>. You may want to remove some files from your projects knowledge base.",id:"sZG2FSB9gz",values:{link:e=>(0,s.jsx)("a",{className:"underline",target:"_blank",rel:"noreferrer",href:r.jC,children:e})}}):(0,s.jsx)(m.Z,{defaultMessage:"This conversation reached its <link>maximum length</link>.",id:"nYiIfCvMHU",values:{link:e=>(0,s.jsx)("a",{className:"underline",target:"_blank",rel:"noreferrer",href:r.jC,children:e})}})})};var ek=n(74187),eC=n(18409),eN=n(89313);let eM=e=>{let t;let n=(0,ey.$H)("push"),{tokenTotals:a,numAttachments:i,projectKnowledgebaseTokens:l}=e,{conversationTokens:o,msgTokens:c,totalTokens:d,maxConversationTokens:u}=a,p=(0,eb.ZW)(o,u),x=d/u-1;return t=i&&p?(0,s.jsx)(m.Z,{defaultMessage:"Try replacing the attached {numAttachments, plural, one {file} other {files}} with smaller excerpts or removing files from your projects knowledge base.",id:"LZJa/izuge",values:{numAttachments:i}}):i?(0,s.jsx)(m.Z,{defaultMessage:"Try replacing the attached {numAttachments, plural, one {file} other {files}} with smaller excerpts.",id:"doIlMUx6Hu",values:{numAttachments:i}}):p?(0,s.jsx)(m.Z,{defaultMessage:"Try removing files from your projects knowledge base.",id:"rTmS1cuCeD"}):(0,s.jsx)(m.Z,{defaultMessage:"Try shortening your message.",id:"vd0y42PhHK"}),(0,s.jsx)(B.A,{children:(0,s.jsxs)("span",{children:[(0,s.jsx)(m.Z,{defaultMessage:"Conversation is {percentage}% over the <link>length limit</link>.",id:"IGar1JqHAm",values:{percentage:Math.ceil(100*x),link:e=>(0,s.jsx)("a",{className:"underline",target:"_blank",rel:"noreferrer",href:r.jC,children:e})}}),"\xa0",t,"\xa0",c+(null!=l?l:0)<u&&(0,s.jsx)("a",{className:"underline",href:"#",onClick:()=>n({projectUuid:e.projectUuid}),children:(0,s.jsx)(m.Z,{defaultMessage:"Start a new conversation?",id:"8ha4a4N9Uq"})})]})})},eS="claude-3-5-sonnet-20241022",e_=e=>{let{switchToSonnet:t,dismissOpusHint:n,copyText:a}=e;return(0,s.jsx)(B.A,{children:(0,s.jsxs)("div",{className:"text-text-200 flex w-full items-center justify-between",children:[(0,s.jsx)("div",{className:"flex items-center gap-1",children:a}),(0,s.jsxs)("div",{children:[(0,s.jsx)("button",{className:"text-accent-pro-000 font-medium hover:underline",onClick:t,children:(0,s.jsx)(m.Z,{defaultMessage:"Chat with Sonnet",id:"dmG0peqhsi"})}),"\xa0",n&&(0,s.jsx)(l.z,{className:"ml-2 h-4 w-4 translate-y-[0.5px] rounded",size:"unset",variant:"ghost",onClick:n,children:(0,s.jsx)(c.X,{size:12})})]})]})})},eE=e=>{var t,n,l,c,v,j,y,k,N,M,S,_,E,z,Z,A,T,I,D,R;let{placement:P}=e,{prompt:O,model:F,setModel:U,attachments:H,conversation:G,projectUuid:q,syncSourceUuids:Y,files:W}=(0,w.r)(),Q=(0,f.nR)(q),[J,$]=(0,eN.X)({conversationUUID:null!==(t=null==G?void 0:G.id)&&void 0!==t?t:null,conversationTokensSoFar:null!==(n=null==G?void 0:G.tokensSoFar)&&void 0!==n?n:0,conversationFiles:null!==(l=null==G?void 0:G.files)&&void 0!==l?l:[],projectKnowledgebaseTokens:null!==(c=null==G?void 0:G.projectKnowledgebaseTokens)&&void 0!==c?c:Q,input:O,attachments:H,syncSourceUuids:Y,chatInputModel:F}),{exceededMessageLimitWarning:et,approachingMessageLimitWarning:en,messageLimit:es}=(0,el.k)(null!==(v=null==G?void 0:G.id)&&void 0!==v?v:null,q),ed="exceeded"===J?(0,s.jsx)(ew,{projectKnowledgebaseTokens:null!==(j=null==G?void 0:G.projectKnowledgebaseTokens)&&void 0!==j?j:0,maxConversationTokens:$.maxConversationTokens,projectUuid:q}):null,{isRavenCanceled:eu}=(0,p.pV)(),ep=eu?(0,s.jsx)(X,{}):void 0,ex=(0,i.uh)()?(0,s.jsx)(ee,{}):void 0,eh=(()=>{let{chatResourceState:e}=(0,g.Y)();return[...e.syncSources||[],...(0,x.yg)(q).data||[]].filter(e=>{var t;return o.qC.includes(null==e?void 0:null===(t=e.status)||void 0===t?void 0:t.state)})})(),ef=eh.length?(0,s.jsx)(ea,{inaccessibleSyncSources:eh}):void 0,{setStickyModelPreference:eg}=(0,a.M)(),ej=(0,eC.c)(eS),ey=(null==F?void 0:F.toLowerCase())!==eS.toLowerCase()&&("exceeded"===J||"will-exceed"===J)&&$.totalTokens<ej,eb=(0,u.useCallback)(()=>{U(eS),eg(eS)},[U,eg]),eE=ey?(0,s.jsx)(e_,{switchToSonnet:eb,copyText:(0,s.jsx)("span",{children:(0,s.jsx)(m.Z,{defaultMessage:"Your message is over the <link>length limit</link>. Switch to Claude 3.5 Sonnet.",id:"wyTH8wmzSc",values:{link:e=>(0,s.jsx)("a",{className:"underline",target:"_blank",rel:"noreferrer",href:r.jC,children:e})}})})}):void 0,ez="will-exceed"===J?(0,s.jsx)(eM,{tokenTotals:$,numAttachments:H.length,projectKnowledgebaseTokens:null==G?void 0:G.projectKnowledgebaseTokens,projectUuid:q}):null,eZ=$.msgTokens<ek.D?null:(0,s.jsx)(ek.w,{}),eA=(0,h.F4)()?(0,s.jsx)(B.A,{children:(0,s.jsxs)("div",{className:"text-danger-000 flex items-center gap-1",children:[(0,s.jsx)(d.v,{className:"h-4 w-4 shrink-0",weight:"regular"}),(0,s.jsx)("span",{children:(0,s.jsx)(m.Z,{defaultMessage:"Search capabilities limited while Claude catalogs your Google Drive files",id:"xm/VQYLGWM"})})]})}):void 0,eT=(0,K.j)(q)?(0,s.jsx)(B.A,{children:(0,s.jsxs)("div",{className:"text-danger-000 flex items-center gap-1",children:[(0,s.jsx)(d.v,{className:"h-4 w-4 shrink-0",weight:"regular"}),(0,s.jsx)("span",{children:(0,s.jsx)(m.Z,{defaultMessage:"Project knowledge exceeds maximum. Remove files to continue.",id:"IqUMWBoy4d"})})]})}):void 0,[eI,eD]=(0,u.useState)(!1),eR=function(e){let{config:t}=(0,C.useConfig)("prompt_new_conversation_count"),n=t.get("warningCount",null),s=t.get("blockInputCount",null);return void 0!==e&&null!==n&&null!==s&&e>=n&&e<s}(null==G?void 0:G.messagesSoFar)&&!eI,eP=eR?(0,s.jsx)(V,{onDismiss:()=>eD(!0)}):null,{systemAlertFromConfig:eO}=ev(null!==(y=null==G?void 0:G.id)&&void 0!==y?y:null),eF=eO?eO.component:null,eU=function(e,t,n){let{data:a=[]}=(0,ec.pK)(n),i=(0,er.eh)(),l=[...e,...t?t.files:[],...a].filter(e=>e.file_kind===eo.Y.Blob);return!i&&l.length?(0,s.jsx)(em,{files:l,isNewConversation:!t}):null}(W,G,q),eL=function(){let{config:e}=(0,C.useConfig)("claudeai_warning_message"),t=null==e?void 0:e.get("components",void 0);return t?(0,s.jsx)(ei.s,{messageComponents:t}):null}(),eH=null!=eT?eT:null,eG=null!==(R=null!==(D=null!==(I=null!==(T=null!==(A=null!==(Z=null!==(z=null!==(E=null!==(_=null!==(S=null!==(M=null!==(N=null!==(k=null!=eH?eH:et)&&void 0!==k?k:ed)&&void 0!==N?N:ep)&&void 0!==M?M:ex)&&void 0!==S?S:ef)&&void 0!==_?_:eE)&&void 0!==E?E:ez)&&void 0!==z?z:eU)&&void 0!==Z?Z:eZ)&&void 0!==A?A:eP)&&void 0!==T?T:eF)&&void 0!==I?I:eA)&&void 0!==D?D:eL)&&void 0!==R?R:null,eK=eO&&eO.alert.proUpsell||eR,eB=!!(eU||eA),eq=eK?"pro":eB?"info":"danger",eY=(0,i.ZJ)();return!eH&&es&&eY&&(en||et)?(0,s.jsx)(L,{messageLimit:es,defaultWarning:eG,defaultTheme:eq,placement:P}):(0,s.jsx)(b,{warning:eG,placement:P,theme:eq})}},95606:function(e,t,n){n.d(t,{e:function(){return r}});var s=n(27573),a=n(11607),i=n(10607),l=n(68425);let r=e=>{let{isShown:t,className:n}=e;return t?(0,s.jsx)(l.E.div,{className:(0,i.Z)("bg-bg-500/10 -mb-1 grid h-20 w-28 place-items-center rounded-lg flex-shrink-0",n),initial:{opacity:0,scale:.3},animate:{opacity:1,scale:1},children:(0,s.jsx)(a.Loading,{size:"sm"})}):null}},93020:function(e,t,n){n.d(t,{F:function(){return d}});var s=n(27573),a=n(16282),i=n(91887),l=n(96070),r=n(10607),o=n(95606),c=n(89799);let d=e=>{let{attachments:t,files:n,syncSourceResults:d,onRemoveAttachment:u,onRemoveFile:m,onRemoveSyncSource:p,isUploadingFile:x,isUploadingSync:h}=e,f=(0,l.b)(),g=(0,l.a)();return(0,s.jsxs)("div",{className:(0,r.Z)(f?"flex flex-row overflow-x-auto gap-3 px-3.5 py-2.5 -my-1":"flex pb-3 pt-2.5 items-end flex-wrap gap-x-1 gap-y-2 px-4",g?"border-border-300/25 border-t-0.5 rounded-b-2xl bg-bg-100 !p-3.5 !m-0":""),children:[t.map((e,t)=>(0,s.jsx)(a.mB,{file:e,size:"md",onRemoveFile:()=>u(t),isEditable:!0},t)),n.map((e,t)=>(0,s.jsx)(a.mB,{file:e,showWarnings:!0,size:"md",onRemoveFile:()=>m(t),isEditable:!0},e.file_uuid)),f?(0,s.jsx)(i.fz,{isShown:x}):(0,s.jsx)(o.e,{isShown:x,className:"p-0.5"}),d.map(e=>{let{syncSource:t,uuid:n}=e;return(0,s.jsx)(c.Q,{uuid:n,syncSource:t,size:"md",onRemove:()=>p(n),isEditable:!0},n)}),f?(0,s.jsx)(i.fz,{isShown:h}):(0,s.jsx)(o.e,{isShown:h,className:"p-0.5"})]})}},81954:function(e,t,n){n.d(t,{x:function(){return tU}});var s=n(56683),a=n(27573),i=n(76986),l=n(89269),r=n(27218),o=n(27895),c=n(66092),d=n(9677),u=n(9788),m=n(69321),p=n(35354),x=n(52939),h=n(32737),f=n(49167),g=n(1133),v=n(12086),j=n(14448),y=n(53949),b=n(27367),w=n(27137),k=n(77603),C=n(10607),N=n(7583),M=n(7653),S=n(40950),_=n(45790),E=n(77879),z=n(12099),Z=n(94449),A=n(96933),T=n(3053),I=n(70354),D=n(45033),R=n(18691),P=n(66894),O=n(42147),F=n(96346),U=n(85689),L=n(11510),H=n(68425),G=n(88146),K=n(68259),B=n(40051),q=n(3915),Y=n(38312),V=n(92467),W=n(12868);let Q=e=>{let{onClickCreate:t,anchorRef:n}=e,{shouldShow:s,dismiss:i}=(0,W.C)("styles-dropdown-intro-5",{dateAdded:"2024-11-14",priority:V.t.HIGH,showAfterOthersDismiss:!0});return s?(0,a.jsxs)(Y.O,{side:"right",anchorRef:n,onClose:i,accentColor:"pro",introDelay:.5,children:[(0,a.jsx)("p",{className:"font-tiempos tracking-tight font-medium leading-snug pr-1",children:(0,a.jsx)(_.Z,{defaultMessage:"Tailor Claudes writing with preset or custom styles",id:"n5wIZJYTsm"})}),(0,a.jsx)("div",{className:"flex items-center gap-3 mt-2.5",children:(0,a.jsx)(I.z,{variant:"outline",className:"!gap-0 !text-sm !text-accent-pro-000 !border-accent-pro-100/30 !rounded-lg hover:!bg-accent-pro-100 hover:!text-oncolor-100 !px-3",onClick:t,prepend:(0,a.jsx)(R.H,{className:"mr-1.5 w-5 h-5"}),children:(0,a.jsx)(_.Z,{defaultMessage:"Create Your Style",id:"MSHbZ6FPra"})})})]}):null};var X=n(64243),J=n(70027),$=n(69838),ee=n(91217);let et=e=>{let{personalizedStyle:t,onSelect:n,placement:s,isNewConversation:i}=e,l=(0,M.useRef)(null),r=(0,T.z$)(),{data:o}=(0,A.QR)({limit:void 0}),c=!P.cm&&o&&(null==o?void 0:o.length)>=2&&i&&"onpage"===s,{value:d}=(0,j.F)("claude_ai_cayenne"),{data:u}=(0,K.by)(),[p,x]=(0,M.useState)(null),[g,v]=(0,M.useState)(!1),{sortStyles:y}=(0,$.L)(),{filterHiddenStyles:b}=(0,J.C)(),{personalizedStyleOptions:w,setStoredStyle:k,defaultStyle:S,conciseModeEnabled:E}=(0,B.O)(),[z,Z]=(0,M.useState)(),G=y(b(w));if(!w.length)return null;let Y=t&&(0,X.X)(t),V=w.find(e=>Y&&(0,B.g)(e,Y))||S;if(!V)return null;let W="Default"===(0,X.X)(V)&&V.isDefault,ee=e=>{n(e);let t=(0,X.X)(e);k({styleKey:t,timestamp:new Date}),r.track({event_key:"styles.selected",style_key:t})},et=d&&i&&(null==u?void 0:u.conversation_preferences);return(0,a.jsxs)("div",{className:"flex items-center min-w-0 max-w-full",children:[(0,a.jsx)(q.g,{openWithScreen:p,onClose:()=>x(null),styles:w,setChatStyle:ee}),(0,a.jsx)(N.M,{children:c&&(0,a.jsx)(Q,{anchorRef:l,onClickCreate:()=>{setTimeout(()=>{x(O.b.CREATE)},50),r.track({event_key:"styles.nux.create_clicked"})}})}),(0,a.jsxs)(D.Lt,{className:"!rounded-xl w-64 sm:w-[28rem]",align:"center",unstyledTrigger:!0,onCloseAutoFocus:e=>e.preventDefault(),open:g,onOpenChange:e=>{v(e),r.track({event_key:"styles.selector.clicked",open:e})},trigger:(0,a.jsx)(H.E.div,{initial:{opacity:0},animate:{opacity:1},transition:{ease:"easeIn",duration:.25},className:"min-w-24",children:(0,a.jsx)(I.z,{ref:l,variant:"unstyled",size:"unset","data-testid":"style-selector-dropdown",className:(0,C.Z)("max-w-full min-w-0 pl-1.5 pr-1 h-7 ml-0.5 mr-1 hover:bg-bg-200 hover:border-border-400 border-0.5 text-sm rounded-md border-transparent transition",W?"text-text-500 hover:text-text-200":"text-accent-secondary-000"),children:(0,a.jsx)(h.u,{tooltipContent:E&&(0,a.jsx)(_.Z,{defaultMessage:"Due to high demand, a concise response option is available to ensure more messages & faster service. You can switch back to full responses if preferred.",id:"dLFli3WCie"}),side:"bottom",delayDuration:500,children:(0,a.jsxs)("div",{className:"inline-flex items-center gap-1 min-w-0",children:[(0,a.jsx)(R.x,{}),(0,a.jsx)("span",{className:"flex-1 truncate font-tiempos",children:W?(0,a.jsx)(_.Z,{defaultMessage:"Choose style",id:"/EOHq8rYPc"}):"default"===V.type&&V.nameKey?(0,a.jsx)(m.d7,{id:V.nameKey}):V.name}),(0,a.jsx)(F.p,{size:12,className:"text-text-500/80 shrink-0"})]})})})}),children:[(0,a.jsxs)("div",{className:"sm:flex justify-between items-center flex-1 text-xs text-text-400 px-3 pt-2 pb-1.5 min-h-5",children:[(0,a.jsx)("div",{className:"translate-y-[0.5px]",children:(0,a.jsx)(_.Z,{defaultMessage:"How should Claude write responses?",id:"TDXqpm7R8p"})}),et&&(0,a.jsx)(en,{})]}),(0,a.jsxs)("div",{className:"grid sm:grid-cols-2 mt-0.5 pb-1 px-1",children:[(0,a.jsxs)("div",{className:"min-h-0",children:[(0,a.jsx)(f.$,{className:"pr-1 sm:mr-1 pb-1 min-h-40 max-h-64",children:G.map(e=>(0,a.jsx)(D.hP,{onClick:()=>ee(e),className:(0,C.Z)("pr-0 mb-0.5 line-clamp-2 leading-tight",(0,X.X)(V)===(0,X.X)(e)&&"bg-accent-secondary-100/5"),onFocus:()=>Z(e),onMouseEnter:()=>Z(e),onMouseLeave:()=>Z(void 0),children:(0,a.jsxs)("div",{className:"flex items-center justfy-between",children:[(0,a.jsx)("div",{className:"flex-1 text-wrap line-clamp-2",children:"default"===e.type&&e.nameKey?(0,a.jsx)(m.d7,{id:e.nameKey}):e.name}),(0,X.X)(V)===(0,X.X)(e)&&(0,a.jsx)(U.J,{className:"text-accent-secondary-200 mb-0.5 mr-0.5",size:20,weight:"bold"})]})},(0,X.X)(e)))}),(0,a.jsx)(D.hP,{"data-testid":"style-selector-open-modal",className:"bg-transparent border border-border-300 hover:!bg-accent-main-100 hover:!text-oncolor-100 hover:!border-transparent transition mr-1 sm:mr-3 ml-1 mb-1 mt-1 !rounded-lg text-center text-sm font-medium",onClick:()=>{v(!1),x(O.b.LIST),r.track({event_key:"styles.modal",open:!0})},children:(0,a.jsx)(_.Z,{defaultMessage:"Create & Edit Styles",id:"9nlfbc774N"})},"create-and-edit")]}),(0,a.jsx)("div",{className:"flex flex-col",children:(0,a.jsx)("div",{className:(0,C.Z)("flex-1 mr-1 mb-1 text-wrap py-3 px-3.5 gap-2.5 rounded-lg border-0.5 transition max-sm:hidden",(null==z?void 0:z.type)!=="custom"&&(z||"custom"!==V.type)?"bg-bg-100/40 border-border-300":"border-accent-secondary-100/50 bg-gradient-to-b from-accent-secondary-900/60 to-accent-secondary-900/30"),children:(0,a.jsx)(H.E.div,{className:"font-tiempos text-[0.9375rem] leading-snug",initial:{opacity:0,filter:"blur(0.5px)"},animate:{opacity:1,filter:"blur(0px)",transition:{ease:"easeOut",duration:.5,opacity:{duration:.25}}},exit:{opacity:0,transition:{duration:.05}},children:z?"default"===z.type&&z.summaryKey?(0,a.jsx)(m.d7,{id:z.summaryKey}):z.summary:"default"===V.type&&V.summaryKey?(0,a.jsx)(m.d7,{id:V.summaryKey}):V.summary},(0,X.X)(z||V))})})]}),E&&(0,a.jsxs)("div",{className:"text-xs px-2 py-1.5 mx-1 mt-2 mb-1.5 border border-accent-secondary-200/50 rounded-md flex",children:[(0,a.jsx)(L.k,{size:20,className:"shrink-0 mr-2 opacity-80"}),(0,a.jsx)(_.Z,{defaultMessage:"Were experiencing high demand. Choosing Concise responses will help you chat more with Claude.",id:"4KwMOa4y/1"})]})]})]})},en=()=>{let{includeProfilePreferences:e,setIncludeProfilePreferences:t}=(0,ee.r)();return(0,a.jsxs)("label",{className:"inline-flex mt-0.5 font-normal gap-1.5 items-center text-xs text-text-400",children:[(0,a.jsx)("span",{className:"-translate-y-[0.5px]",children:(0,a.jsx)(_.Z,{defaultMessage:"Include <link>preferences</link>",id:"KEjYlGJn5K",values:{link:e=>(0,a.jsx)(G.default,{href:"/settings/profile",className:"underline underline-offset-2 transition-colors hover:text-text-000",children:e})}})}),(0,a.jsx)(d.Z,{checked:e,onChange:()=>t(!e)})]})};var es=n(4746),ea=n(64014),ei=n(768);function el(e){let{children:t,className:n}=e,s=(0,M.useRef)(null),i=(0,M.useRef)(null),[l,r]=(0,M.useState)("auto");(0,M.useEffect)(()=>{var e,t;let n=(null===(e=i.current)||void 0===e?void 0:e.offsetHeight)||0;l!==n?r(n):null===(t=s.current)||void 0===t||t.removeAttribute("style")},[t,l]);let o=0===l?{ease:"easeOut",duration:.1}:{type:"spring",stiffness:1e3,damping:45,mass:1};return(0,a.jsx)(H.E.div,{ref:s,animate:{height:l},transition:o,onAnimationComplete:()=>{setTimeout(()=>{var e;null===(e=s.current)||void 0===e||e.removeAttribute("style")},10)},children:(0,a.jsx)("div",{className:n,ref:i,children:t})})}var er=n(23895),eo=n(86973),ec=n(66605),ed=n(32559),eu=n(74119),em=n(93020),ep=n(19170),ex=n(80151),eh=n(40845),ef=n(11632),eg=n.n(ef);let ev={Other:[{id:"99700868408274280",title:"Polish your prose"},{id:"43114568093822746",title:"Generate interview questions"},{id:"42665171453908646",title:"Write a memo"},{id:"13658107890000882",title:"Summarize meeting notes"},{id:"98710402263724850",title:"Generate excel formulas"},{id:"12345678901234567",title:"Provide stakeholder perspective"},{id:"98765432109876543",title:"Extract insights from report"}],Engineering:[{id:"77006472433045320",title:"Generate Git commands"},{id:"23672783609437165",title:"Detect and fix bugs in my code"},{id:"54709237334922990",title:"Optimize code performance"},{id:"76483481533138620",title:"Explain complex code in plain language"},{id:"49035229639700416",title:"Refactor my code"},{id:"22278195957902858",title:"Help me integrate with an API"},{id:"94299038774707560",title:"Create a Python function"},{id:"31185073020420883",title:"Turn unstructured text into JSON tables"},{id:"28298329876891693",title:"Create a game in a single HTML file"},{id:"41655807803803650",title:"Code translation"}],"Product Management":[{id:"82918428936569660",title:"Prioritize product backlog"},{id:"24170702836678570",title:"Craft a product update announcement"},{id:"49676294185024326",title:"Analyze competitor features"},{id:"25795996224555970",title:"Analyze user feedback"},{id:"79509579700432370",title:"Create catchy product names from descriptions and keywords"},{id:"24508246371842147",title:"Explain complex code in plain language"},{id:"54107552753210730",title:"Transform everyday language into SQL queries"},{id:"46558961414653875",title:"Brainstorm feature ideas"}],Marketing:[{id:"97675156954045180",title:"Craft a compelling product launch announcement"},{id:"64570977187031160",title:"Create product announcement tweets"},{id:"85284883020582100",title:"Develop a social media content calendar"},{id:"7089202722400656",title:"Analyze competitor marketing strategies"},{id:"40167006041527520",title:"Write a campaign performance email"}],Sales:[{id:"90120536939409660",title:"Craft personalized outreach emails"},{id:"69406094485570740",title:"Analyze financial statements"},{id:"5584768640389593",title:"Overcoming common sales objections"},{id:"78193848943320030",title:"Identifying potential partnership opportunities"},{id:"73173993695351400",title:"Create an account plan"}],"Data Science":[],Design:[],"Human Resources":[],Finance:[],Operations:[],Legal:[]};var ej=n(15969);n(43503);var ey=(0,n(99976).$)("f10fe46710f8024ed33f6006aec89cbeef434527");let eb={initial:{opacity:0,scale:.7},animate:{opacity:1,scale:1,transition:{type:"spring",stiffness:400,damping:30,mass:1}}};function ew(e){let{example:t}=e,{track:n}=(0,T.z$)(),{setAttachments:s,setPrompt:i,focusInput:l}=(0,ee.r)(),{mutate:r,isPending:o}=(0,ej.useMutation)({mutationFn:async()=>{n({event_key:"claudeai.conversation.suggestion.applied",suggestion_id:t.id});let{prompt:e,attachment:a}=await ey(t.id),r=null;a&&(r={file_type:"",file_size:new TextEncoder().encode(null==a?void 0:a.extracted_content).length,...a}),r&&s([r]),i(e,{forceUpdateTiptap:!0}),l()}});return(0,a.jsxs)(H.E.div,{variants:eb,className:"text-border-100 hover:text-accent-secondary-100 relative flex-1",children:[(0,a.jsx)(h.u,{tooltipContent:"Try this prompt",side:"bottom",children:(0,a.jsx)("button",{className:"bg-bg-300 from-bg-200/30 to-bg-200/0 border-border-200 md:border-border-300 border-0.5 text-text-300 hover:text-accent-secondary-000 hover:border-accent-secondary-100/80 hover:bg-accent-secondary-900 relative z-[1] flex min-h-12 w-full flex-1 items-center justify-between gap-2 overflow-hidden rounded-xl bg-gradient-to-b px-2.5 text-left text-sm leading-[1.15] transition disabled:opacity-50",disabled:o,onClick:()=>r(),children:(0,a.jsx)("div",{className:"line-clamp-2",children:t.title})})}),(0,a.jsxs)("svg",{className:"pointer-events-none absolute right-full top-full -mr-[0.1875rem] -mt-[0.1875rem] -translate-y-1/2 translate-x-1/2",width:"12",height:"12",viewBox:"0 0 12 12",stroke:"currentColor",fill:"none",xmlns:"http://www.w3.org/2000/svg",strokeWidth:"0.5",children:[(0,a.jsx)("circle",{className:"opacity-70",cx:"7.5",cy:"4.5",r:"4"}),(0,a.jsx)("circle",{className:"opacity-50",cx:"2",cy:"9.5",r:"1.5"})]})]})}let ek={initial:{opacity:0},animate:{opacity:1,transition:{staggerChildren:.05}}};function eC(){let{account:e}=(0,r.t)(),{addSuccess:t}=(0,o.e)(),n=(0,S.Z)(),{mutate:s}=(0,ep.Ck)(),{examples:i,refresh:l}=function(){let{account:e}=(0,r.t)(),t=null==e?void 0:e.settings.work_function,{count:n,increment:s}=(0,E.Cf)(eg()(0,100));return{examples:(0,M.useMemo)(()=>{let e=ev.Other.map(e=>{let{id:t,title:n}=e;return{id:t,title:n}}),s=[];t&&t in ev&&(s=ev[t].map(e=>{let{id:t,title:n}=e;return{id:t,title:n}}));let a=s.concat(e),i=a.concat(a),l=3*n%a.length;return i.slice(l,l+3)},[n,t]),refresh:s}}();return(0,a.jsxs)("div",{className:"flex flex-col gap-2 pb-1.5 pl-3.5 pr-3 pt-2 md:flex-row",children:[(0,a.jsx)(H.E.div,{variants:ek,initial:"initial",animate:"animate",className:"grid min-h-12 min-w-0 flex-1 gap-2 md:grid-cols-3",children:i.map(e=>(0,a.jsx)(ew,{example:e},e.id))}),(0,a.jsxs)("div",{className:"flex flex-row-reverse justify-start gap-0.5 max-md:mt-2 md:flex-col md:justify-center",children:[(0,a.jsx)(h.u,{tooltipContent:n.formatMessage({defaultMessage:"Hide suggestions",id:"8/jokSbxkH"}),side:"right",children:(0,a.jsx)(I.z,{variant:"ghost",size:"unset",className:"text-text-300 h-6 w-6 rounded-md active:scale-90 max-md:ml-2",onClick:()=>{s({...null==e?void 0:e.settings,has_seen_starter_prompts:!0}),t((0,a.jsx)("span",{children:(0,a.jsx)(_.Z,{defaultMessage:"Prompt examples hidden. You can reenable them in <link>profile settings</link>",id:"rGw4+fgPV3",values:{link:e=>(0,a.jsx)(G.default,{href:"/settings/profile",className:"underline",children:e})}})}))},children:(0,a.jsx)(ex.X,{size:16})})}),(0,a.jsx)(h.u,{tooltipContent:n.formatMessage({defaultMessage:"Reload suggestions",id:"q7RmOP22ap"}),side:"right",children:(0,a.jsx)(I.z,{variant:"ghost",size:"unset",className:"text-text-400 h-6 w-6 rounded-md active:scale-90",onClick:l,children:(0,a.jsx)(eh.t,{size:16})})})]})]})}var eN=n(26525),eM=n(5362),eS=n(95899),e_=n(92676),eE=n(19132),ez=n(41139),eZ=n(63731);let eA=()=>{let e=(0,S.Z)(),{conversation:t,projectUuid:n,setProjectUuid:s,attachments:i,setAttachments:l,syncSourceUuids:r,setSyncSourceUuids:c}=(0,ee.r)(),{addError:d,addSuccess:u}=(0,o.e)(),m=(0,eu.U)(),{data:p}=(0,ed.u0)(),h=(0,ec.aP)(r),f=(0,eM.F9)(h),g=null==p?void 0:p.find(e=>e.uuid===n),[v,j]=(0,M.useState)(!1),{mutate:y}=(0,eS.u3)(n),{mutate:b}=(0,e_.gr)(n),w=(0,ez.G)(),k=(0,M.useCallback)(()=>{g&&(i.length||f.length&&g.is_private)&&(i.forEach(e=>{let{file_name:t,extracted_content:n}=e;y({file_name:t,content:n})}),g.is_private&&(f.forEach(e=>{let t=(0,eE.hJ)(e);t&&b(t)}),c([])),l([]),window.location.href.includes("/new")?window.location.href="/project/".concat(g.uuid):u(e.formatMessage({defaultMessage:"Attachments successfully added to {projectName}",id:"xw8MJ6Kd/h"},{projectName:g.name||"your project"})))},[u,i,y,g,l,b,c,f,e]);(0,M.useEffect)(()=>{v&&g&&(j(!1),k())},[g,k,v]);let C=!!(t&&!g||g&&!g.is_private&&r.length),N=!!g;return(0,a.jsxs)("div",{className:"text-text-400 flex-1 whitespace-nowrap pl-1 text-sm h-8 flex items-center",children:[(0,a.jsxs)("span",{className:"text-xs",children:[(0,a.jsx)("span",{className:"hidden sm:inline",children:(0,a.jsx)(_.Z,{defaultMessage:"Maximum attachments reached.",id:"JgUJTAo/mI"})}),m&&!C&&(0,a.jsx)(I.z,{variant:"unstyled",className:"!pl-1.5 !pr-0 !py-0 h-[unset] hover:underline hover:text-text-200 transition-colors",onClick:()=>{j(!0)},children:N?(0,a.jsx)(_.Z,{defaultMessage:"Add {count, plural, one {# document} other {# documents}} documents to project?",id:"4BFn5uAm5d",values:{count:eN.Qe}}):(0,a.jsx)(_.Z,{defaultMessage:"Create project with {count, plural, one {# document} other {# documents}}?",id:"yr9FQT3AJu",values:{count:eN.Qe}})})]}),(0,a.jsxs)(x.u_,{isOpen:v&&!n,onClose:()=>j(!1),modalSize:"xl",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsx)("h1",{className:"font-copernicus text-text-200 mb-4 text-2xl font-medium tracking-tight",children:(0,a.jsx)(_.Z,{defaultMessage:"Create a project with attachments",id:"wSxz4Q9mjA"})}),(0,a.jsx)(I.z,{onClick:()=>j(!1),size:"icon",variant:"ghost",children:(0,a.jsx)(ex.X,{size:16})})]}),(0,a.jsx)(eZ.hK,{syncSources:f,onProjectCreated:e=>{s(e.uuid)},onError:d,onCancel:()=>j(!1),strings:w})]})]})};var eT=n(5984),eI=n(81814),eD=n(38459),eR=n(75457),eP=n(19186),eO=n(50173),eF=n(1036);let eU=e=>{let{hasProjectSelectorOpen:t,setHasProjectSelectorOpen:n,currentProject:s}=e,i=(0,S.Z)();return(0,a.jsx)(h.u,{className:"text-center",tooltipContent:t?"":s?i.formatMessage({defaultMessage:"Change project",id:"5RCPLcgnza"}):i.formatMessage({defaultMessage:"Use projects to organize chats and give Claude knowledge context",id:"tq1yWolgyz"}),side:"bottom",children:(0,a.jsxs)(I.z,{variant:"unstyled",size:"unset",className:(0,C.Z)("border-0.5 border-border-300 hover:bg-bg-500/30 flex h-7 max-w-full items-center gap-1 overflow-hidden whitespace-nowrap rounded-lg pl-2 pr-1.5 text-xs transition-colors",void 0!==s?"text-accent-secondary-000 border-accent-secondary-000":"text-text-300",t&&"bg-bg-300 max-sm:flex-1"),onClick:()=>n(!t),children:[(0,a.jsx)(er.j,{size:14,className:"shrink-0"}),void 0===s?(0,a.jsx)(a.Fragment,{children:t?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(_.Z,{defaultMessage:"Select a project",id:"HC2f2oYjRS"}),(0,a.jsx)(eI.U,{size:12,className:"shrink-0"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(_.Z,{defaultMessage:"Use a project",id:"H/dsl+Px2v"}),(0,a.jsx)(eD.p,{size:12,className:"shrink-0"})]})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"min-w-0 truncate font-medium",children:s.name}),t?(0,a.jsx)(eI.U,{size:12,className:"shrink-0"}):(0,a.jsx)(eD.p,{size:12,className:"shrink-0"})]})]})})},eL=()=>(0,a.jsx)(h.u,{tooltipContent:(0,a.jsx)(_.Z,{defaultMessage:"Create a new project",id:"VbuX/vbFrq"}),side:"bottom",children:(0,a.jsx)("div",{children:(0,a.jsx)(I.z,{href:"/projects/create",variant:"secondary",size:"unset",className:"h-7 w-8 rounded-lg mr-1 hover:bg-bg-300/90",children:(0,a.jsx)(eR.v,{})})})}),eH=(0,M.forwardRef)((e,t)=>{let{query:n,onChange:s}=e,i=(0,S.Z)();return(0,a.jsxs)("label",{className:"ml-1 flex flex-1 items-center gap-[7px] sm:ml-2",children:[(0,a.jsx)(eP.Y,{size:16,className:"text-text-400"}),(0,a.jsx)(eT.oi,{ref:t,placeholder:i.formatMessage({defaultMessage:"Search projects...",id:"Dw9BaeKr5H"}),className:"!h-auto w-full !rounded-none border-0 bg-transparent !px-0 !py-0 placeholder:text-sm placeholder:opacity-75",value:n,onChange:e=>{s(e.target.value)},autoFocus:!0})]})});eH.displayName="ProjectSearchInput";let eG=e=>{let{currentProject:t,matchingProjects:n,hasProjects:s,searchQuery:i,searchInputRef:l,onSelectProject:r}=e,o=(0,M.useRef)(null),c=!n||0===n.length,[d,u]=(0,M.useState)(-1);return((0,M.useEffect)(()=>{-1===d&&(null==l?void 0:l.current)&&l.current.focus()},[l,d]),(0,M.useEffect)(()=>{var e;let t=null===(e=o.current)||void 0===e?void 0:e.children;t&&d>=0&&d<t.length&&t[d].focus()},[l,d]),(0,M.useEffect)(()=>{let e=e=>{c||("ArrowUp"===e.key?(e.preventDefault(),u(e=>e<=0?-1:e-1)):"ArrowDown"===e.key&&(e.preventDefault(),u(e=>e<n.length-1?e+1:n.length-1)))};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[]),c||!s)?(0,a.jsx)("div",{className:"bg-bg-500/20 text-text-300 mx-3.5 mb-1.5 mt-2 flex flex-1 flex-col items-center justify-center gap-1 rounded-lg py-4 text-center text-sm",children:s?(0,a.jsx)("div",{className:"flex flex-col h-[60px] text-text-500 justify-center",children:(0,a.jsx)("p",{children:(0,a.jsx)(_.Z,{defaultMessage:"No projects found",id:"u1zp+cKrUr"})})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{children:(0,a.jsx)(_.Z,{defaultMessage:"Use projects to organize chats and re-use knowledge from files",id:"oxMlRDjWUY"})}),(0,a.jsx)(I.z,{href:"/projects/create",variant:"secondary",children:(0,a.jsx)(_.Z,{defaultMessage:"Create Your First Project",id:"D06tjoyqCr"})})]})}):(0,a.jsx)(H.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:(0,a.jsx)("ul",{ref:o,role:"listbox",className:"mb-1 mt-1 flex min-h-[6.125rem] flex-col gap-px px-1.5 sm:px-2.5",onBlur:()=>u(-1),children:n.map((e,n)=>(0,a.jsx)(eK,{project:e,isSelected:(null==t?void 0:t.uuid)===e.uuid,searchQuery:i,onSelect:r,onFocus:()=>u(n)},e.uuid))})},"projects")},eK=e=>{let{project:t,isSelected:n,searchQuery:s,onSelect:i,onFocus:l}=e,r=(0,M.useRef)(null),o=RegExp("(".concat(s,")"),"gi"),c=t.name.split(o),d=(0,a.jsx)(a.Fragment,{children:c.map((e,t)=>(0,a.jsx)(M.Fragment,{children:e.toLowerCase()===s.toLowerCase()&&""!==e?(0,a.jsx)("span",{className:"text-accent-secondary-100",children:e}):e},t))});return(0,a.jsxs)("li",{ref:r,role:"option","aria-selected":n,tabIndex:0,onClick:()=>{i(t.uuid)},onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&i(t.uuid)},onFocus:l,className:"group relative cursor-pointer rounded-lg px-2 py-1.5 text-sm outline-none",children:[(0,a.jsx)("div",{className:(0,C.Z)("border-0.5 pointer-events-none absolute inset-0 rounded-[inherit] transition",n?"bg-accent-secondary-900 border-accent-secondary-100/20 group-hover:border-accent-secondary-100/50 group-focus-visible:border-accent-secondary-100/50":"bg-bg-400/50 scale-95 border-transparent opacity-0 group-hover:scale-100 group-hover:opacity-100 group-focus-visible:scale-100 group-focus-visible:opacity-100")}),(0,a.jsxs)("div",{className:"relative z-[1] flex items-center gap-1.5",children:[n?(0,a.jsx)(eO.f,{size:16,className:"text-accent-secondary-000 shrink-0"}):(0,a.jsx)(er.j,{size:16,className:"text-text-300 shrink-0"}),(0,a.jsx)("div",{className:(0,C.Z)("font-tiempos line-clamp-1 min-w-0",n?"text-text-100":"text-text-300 group-hover:text-text-100 group-focus-visible:text-text-100 transition-colors"),children:d}),t.creator&&(0,a.jsx)(eF.H,{project:t,className:"text-text-400 flex-1 text-xs max-md:hidden"}),n&&(0,a.jsx)("div",{className:"text-accent-secondary-000 text-xs font-medium opacity-0 group-hover:opacity-100 group-focus-visible:opacity-100",children:(0,a.jsx)(_.Z,{defaultMessage:"Unselect",id:"fZUs0pa0bI"})})]})]})};var eB=n(11607),eq=n(62676),eY=n(85017),eV=n(10690);let eW=e=>{let{directory:t,refreshDirectories:n}=e,[s,i]=(0,M.useState)(!1),l=async()=>{i(!0);try{await (0,eY.y3)(t.uuid),n()}finally{i(!1)}};return(0,a.jsxs)("div",{className:(0,C.Z)("border-0.5 flex h-7 max-w-full items-center gap-1 overflow-hidden whitespace-nowrap rounded-lg pl-2 pr-1 text-xs transition-colors","text-accent-secondary-000 border-accent-secondary-200"),children:[(0,a.jsx)(eq.P,{}),(0,a.jsx)("span",{className:"mb-0.5",children:(0,eV.T7)(t.uri.replace(/\/$/,""))}),s?(0,a.jsx)(eB.Loading,{size:"sm"}):(0,a.jsx)(I.z,{size:"unset",variant:"ghost",className:"!rounded-full w-4 h-4",onClick:l,children:(0,a.jsx)(ex.X,{className:"text-accent-secondary-100"})})]})};var eQ=n(2949),eX=n(89111),eJ=n(83617),e$=n(37499),e0=n(44512),e1=n(6385),e2=n(50294),e5=n(15992);let e3=e=>{let{onNewDirectory:t,disabled:n}=e,s=(0,S.Z)(),{account:i}=(0,r.t)(),{config:l}=(0,e5.useConfig)("harmony_product_strings"),{value:o,setTrue:c,setFalse:d}=(0,E.kt)(!1),[u,m]=(0,e0.nh)(e1.cn.SKIP_HARMONY_INFO_MODAL,!1),p=async()=>{d();try{let e=await window.showDirectoryPicker();t(e)}catch(e){}},f=l.get("modal_image",null);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h.u,{tooltipContent:n?l.get("button_disabled_in_projects",""):(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[l.get("button_tooltip",""),"\xa0",(0,a.jsx)(eJ.C,{color:"secondary",size:"sm",uppercase:!0,children:(0,a.jsx)(_.Z,{defaultMessage:"Beta",id:"riw/yc06Nq"})})]}),(null==i?void 0:i.email_address.endsWith("@anthropic.com"))&&(0,a.jsx)("span",{className:"opacity-65",children:l.get("button_employee_tooltip","")})]}),side:"bottom",children:(0,a.jsx)(I.z,{size:"icon_sm",variant:"ghost",className:"!rounded-lg","aria-label":n?l.get("button_disabled_in_projects",""):l.get("button_tooltip",""),onClick:()=>u?void p():c(),disabled:n,children:(0,a.jsx)(eq.P,{size:16})})}),(0,a.jsxs)(x.u_,{isOpen:o,onClose:d,modalSize:"lg",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-1 mb-4",children:[(0,a.jsxs)("h1",{className:"font-copernicus text-text-200 text-2xl font-medium tracking-tight",children:[l.get("modal_title",""),"\xa0"]}),(0,a.jsx)(eJ.C,{color:"secondary",uppercase:!0,children:(0,a.jsx)(_.Z,{defaultMessage:"Beta",id:"riw/yc06Nq"})})]}),(0,a.jsx)(I.z,{onClick:d,size:"icon",variant:"ghost",children:(0,a.jsx)(ex.X,{size:16})})]}),(0,a.jsx)("p",{className:"text-sm text-text-300 mb-4",children:l.get("modal_description","")}),f&&(0,a.jsx)("div",{className:"rounded-xl mb-4 flex items-center justify-center overflow-hidden",children:(0,a.jsx)(e2.default,{src:f.src,style:{width:"100%",height:"auto"},width:f.width,height:f.height,alt:f.alt})}),(0,a.jsx)("div",{className:"rounded-xl bg-bg-100 border-border-400 p-4 text-xs text-text-400 mb-4",children:(0,a.jsxs)("ul",{className:"list-disc pl-5 space-y-2",children:[l.get("modal_bullets",[]).map(e=>(0,a.jsx)("li",{children:e},e)),(0,a.jsx)("li",{children:(0,a.jsx)(_.Z,{defaultMessage:"Anthropic doesnt train on your content, except in limited cases for safety or with your permission. <link>Learn more</link>.",id:"qkwOxLxehM",values:{link:e=>(0,a.jsx)(G.default,{href:(null==i?void 0:i.memberships.some(e=>e.organization.capabilities.includes("commercial_use")))?"https://privacy.anthropic.com/en/articles/7996868-i-want-to-opt-out-of-my-prompts-and-results-being-used-for-training-models":"https://privacy.anthropic.com/en/articles/10023580-i-want-to-opt-out-of-my-prompts-and-results-being-used-for-training-models",target:"_blank",rel:"noopener",className:(0,C.Z)("underline","hover:text-text-100"),children:e})}})}),(null==i?void 0:i.email_address.endsWith("@anthropic.com"))&&l.get("employee_modal_bullets",[]).map(e=>(0,a.jsx)("li",{children:e},e))]})}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm text-text-400",children:(0,a.jsx)(e$.X,{checked:u,onChange:e=>m(e),label:s.formatMessage({defaultMessage:"Dont show this again",id:"HvFxVsGH2Z"})})}),(0,a.jsx)(I.z,{onClick:p,children:l.get("modal_cta","")})]})]})]})};var e7=n(12459),e4=n(10228),e6=n(31275);let e8=e=>{let{setIsUploadingGithubSync:t}=e,n=(0,S.Z)(),[s,i]=(0,M.useState)(!1),{setSyncSourceUuids:l,projectUuid:r}=(0,ee.r)(),{isGithubAuthenticated:o,initGithubAuth:c}=(0,eX.Yn)({callerIdentifier:"chat",toggleGithubModalOpen:i}),d=(0,M.useCallback)(e=>{l(t=>[...t,e.uuid]),t(!1)},[l,t]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h.u,{tooltipContent:(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(_.Z,{defaultMessage:"GitHub",id:"wO9wb5D8Fn"}),(0,a.jsx)(eJ.C,{color:"secondary",size:"sm",uppercase:!0,children:(0,a.jsx)(_.Z,{defaultMessage:"Beta",id:"riw/yc06Nq"})})]}),side:"bottom",children:(0,a.jsx)(I.z,{size:"icon_sm",variant:"ghost",className:"!rounded-lg","aria-label":n.formatMessage({defaultMessage:"GitHub",id:"wO9wb5D8Fn"}),onClick:()=>{if(o){i(!0);return}c()},children:(0,a.jsx)(e7.j0,{type:e4.Fg.GITHUB,size:16})})}),(0,a.jsx)(e6.U,{location:"chat",projectUuid:r,isOpen:s,onClose:()=>i(!1),onCreated:d,setIsUploadingGithubSync:t})]})};var e9=n(36459);let te=e=>{var t;let{dropdownAlign:n="start",setIsUploadingDriveSync:s,isOpen:i,setIsOpen:l}=e,r=(0,S.Z)(),{isDriveAuthenticated:o,handleDriveTrigger:c,initDriveAuth:d}=(0,eQ.nC)({callerIdentifier:"chat",handleAuthSuccess:e=>l(e)}),{setSyncSourceUuids:u}=(0,ee.r)(),m=null===(t=(0,e5.useConfig)("kingfisher_int_notice").config)||void 0===t?void 0:t.get("notice",""),p=(0,M.useCallback)(e=>{u(t=>[...t,e.uuid]),s(!1)},[u,s]),x=(0,a.jsx)("div",{children:(0,a.jsx)(h.u,{tooltipContent:(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsx)("div",{children:(0,a.jsx)(_.Z,{defaultMessage:"Google Drive <span>(docs)</span>",id:"meYzGN8XEM",values:{span:e=>(0,a.jsx)("span",{className:"opacity-65",children:e})}})}),m.length>0&&(0,a.jsx)("div",{className:"opacity-65 text-center",children:(0,a.jsx)(_.Z,{defaultMessage:"Do not use for sensitive materials e.g. PII, user data and financial data",id:"ywx8mgxChJ"})})]}),side:"bottom",children:(0,a.jsx)(I.z,{size:"icon_sm",variant:"ghost",className:"!rounded-lg","aria-label":r.formatMessage({defaultMessage:"Google Drive",id:"GKdaNw6TF5"}),onClick:()=>{o||d()},children:(0,a.jsx)(e7.j0,{type:e4.Fg.GDRIVE,size:16})})})});return o?(0,a.jsx)(e9.C,{align:n,trigger:x,setIsUploadingDriveSync:s,onCreated:p,isOpen:i,setIsOpen:c}):x};var tt=n(18701),tn=n(5161),ts=n(75140),ta=n(65654),ti=n(88e3),tl=n(43311),tr=n(76203),to=n(66240);let tc="https://modelcontextprotocol.io";function td(e,t){if(!Array.isArray(e))return[];let n=e=>e.split(/(\d+)/).map((e,t)=>{if(t%2==1){let t=parseInt(e,10);return isNaN(t)?e.toLowerCase():t}return e.toLowerCase()}),s=(e,t)=>{if(null===e)return null===t?0:-1;if(null===t)return 1;if("number"==typeof e&&"number"==typeof t)return e-t;let s=String(e),a=String(t),i=n(s),l=n(a);for(let e=0;e<Math.min(i.length,l.length);e++){let t=i[e],n=l[e];if(t!==n){if("number"==typeof t&&"number"==typeof n)return t-n;return String(t).localeCompare(String(n))}}return i.length-l.length};return[...e].sort((e,n)=>{for(let a of t){let t=s(e[a],n[a]);if(0!==t)return t}return 0})}let tu=e=>{let{icon:t,name:n,onClick:s}=e;return(0,a.jsxs)("div",{className:"cursor-pointer p-1.5 transition-colors duration-200 hover:bg-bg-100 flex items-center gap-1.5 text-sm",onClick:s,children:[(0,a.jsx)(t,{size:20,weight:"light"}),"\xa0",(0,a.jsx)("div",{className:"flex-1",children:n})]})},tm=e=>{var t;let{prompt:n,onSubmit:s,onClose:i}=e,[l,r]=(0,M.useState)({});return(0,a.jsxs)(x.u_,{title:(0,a.jsx)("div",{className:"font-medium mb-4",children:(0,a.jsx)(_.Z,{defaultMessage:"Fill Prompt Arguments",id:"X2r7d5780k"})}),isOpen:!0,onClose:i,modalSize:"md",children:[null===(t=n.arguments)||void 0===t?void 0:t.map(e=>(0,a.jsx)(eT.oi,{label:e.name,value:l[e.name]||"",onChange:t=>r(n=>({...n,[e.name]:t.target.value})),className:"mb-4"},e.name)),(0,a.jsx)(I.z,{onClick:()=>{s(l)},children:(0,a.jsx)(_.Z,{defaultMessage:"Submit",id:"wSZR47Y5kj"})})]})},tp=e=>{let{handleUpload:t,mcpClients:n}=e,[s,i]=(0,M.useState)({}),[l,r]=(0,M.useState)({}),[c,d]=(0,M.useState)(!1),[u,m]=(0,M.useState)(null),{addError:p}=(0,o.e)(),{track:g}=(0,T.z$)(),v=(0,S.Z)();(0,M.useEffect)(()=>{let e=!1;async function t(){if(!n)return;let t=await (0,ts.k)(n,{method:"resources/list",params:{}},ta.Ol,{timeout:5e3}),s=await (0,ts.k)(n,{method:"prompts/list",params:{}},ta.ev,{timeout:5e3});if(e)return;let a={},l={};Object.entries(t).forEach(e=>{var t,n,s;let[i,l]=e;g({event_key:"mcp.resources.listed",resource_count_on_server:null!==(n=null===(t=l.resources)||void 0===t?void 0:t.length)&&void 0!==n?n:0}),a[i]=(null!==(s=l.resources)&&void 0!==s?s:[]).sort((e,t)=>e.name.localeCompare(t.name))}),Object.entries(s).forEach(e=>{var t,n,s;let[a,i]=e;g({event_key:"mcp.prompts.listed",prompt_count_on_server:null!==(n=null===(t=i.prompts)||void 0===t?void 0:t.length)&&void 0!==n?n:0}),l[a]=(null!==(s=i.prompts)&&void 0!==s?s:[]).sort((e,t)=>e.name.localeCompare(t.name))}),i(a),r(l)}t();let s=setInterval(()=>void t(),5e3);return()=>{e=!0,clearInterval(s)}},[n,p,g]);let j=async(e,a)=>{var i;let l=null===(i=s[e])||void 0===i?void 0:i.find(e=>e.uri===a);if(!l){p(v.formatMessage({defaultMessage:"Resource not found: {uri}",id:"JVjYOkR48+"},{uri:a}));return}let r=n[e];if(!r){p(v.formatMessage({defaultMessage:"MCP server not known: {serverName}",id:"lULEBllYjg"},{serverName:e}));return}d(!1);try{let e=(await r.request({method:"resources/read",params:{uri:a}},ta.vg,{timeout:15e3})).contents.map(e=>{let t;return"text"in e?(t=String(e.text),g({event_key:"mcp.resources.read",type:"text",mime_type:e.mimeType})):(t=tx(e.blob),g({event_key:"mcp.resources.read",type:"binary",mime_type:e.mimeType})),new File([t],l.name,{type:e.mimeType})});e.length>0&&await t(e)}catch(e){p("Error uploading resource: ".concat(e))}},y=(e,t)=>{d(!1),t.arguments&&t.arguments.length>0?m({serverName:e,prompt:t}):b(e,t,{})},b=async(e,s,a)=>{let i=n[e];if(!i){p("MCP server not known: ".concat(e));return}try{let e=await i.request({method:"prompts/get",params:{name:s.name,arguments:a}},ta.Go,{timeout:15e3});g({event_key:"mcp.prompts.used",argument_count:Object.keys(a).length,assistant_messages:e.messages.filter(e=>"assistant"===e.role).length,user_messages:e.messages.filter(e=>"user"===e.role).length,text_messages:e.messages.filter(e=>"text"===e.content.type).length,image_messages:e.messages.filter(e=>"image"===e.content.type).length});let n=(e,t)=>{let n=e=>{let t=tn.wI[e];if(!t)throw Error("Unsupported MIME type: ".concat(e));return t},a=e=>"".concat(s.name).concat(t?"_".concat(t):"",".").concat(e);switch(e.content.type){case"text":return new File([e.content.text],a("txt"),{type:"text/plain"});case"image":{let t=n(e.content.mimeType);return new File([tx(e.content.data)],a(t),{type:e.content.mimeType})}case"resource":if("text"in e.content.resource){var i;let t=e.content.resource;return new File([t.text],"".concat(t.uri,".txt"),{type:null!==(i=t.mimeType)&&void 0!==i?i:"text/plain"})}if("blob"in e.content.resource){let t=e.content.resource;if(!t.mimeType)throw Error("Missing MIME type for embedded resource");let s=n(t.mimeType);return new File([tx(t.blob)],"".concat(t.uri,".").concat(s),{type:t.mimeType})}throw Error("Invalid resource content")}};if(1===e.messages.length)await t([n(e.messages[0],0)]);else if(e.messages.length>1){let a=e.messages.flatMap((e,t)=>"image"===e.content.type||"resource"===e.content.type&&"blob"in e.content.resource?[n(e,t)]:[]),i=e.messages.filter(e=>"text"===e.content.type||"resource"===e.content.type&&"text"in e.content.resource);if(i.length>0){let e=JSON.stringify(i,null,2);a.push(new File([e],"".concat(s.name,"_messages.json"),{type:"application/json"}))}await t(a)}m(null)}catch(e){p("Error getting prompt: ".concat(e))}},w=(0,M.useMemo)(()=>[...new Set([...Object.keys(s),...Object.keys(l)])].sort(),[s,l]),k=(0,M.useMemo)(()=>Object.fromEntries(Object.entries(n).map(e=>{let[t,n]=e,s=n.getServerVersion();return s?[t,s]:null}).filter(e=>null!==e).sort((e,t)=>{let[n]=e,[s]=t;return n.localeCompare(s)})),[n]);return(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(h.u,{className:"text-center",side:"bottom",tooltipContent:(0,a.jsx)(_.Z,{defaultMessage:"Attach from MCP",id:"CSjaHqajqj"}),children:(0,a.jsx)(I.z,{size:"icon_sm",variant:"ghost",className:"!rounded-lg","aria-label":v.formatMessage({defaultMessage:"Attach from MCP",id:"CSjaHqajqj"}),onClick:()=>d(!0),children:(0,a.jsx)(ti.F,{size:20,className:"text-text-300"})})}),(0,a.jsxs)(x.u_,{title:(0,a.jsx)("div",{className:"font-medium mb-4",children:(0,a.jsx)(_.Z,{defaultMessage:"Share context with Claude",id:"mtl+vwNNdP"})}),isOpen:c,onClose:()=>d(!1),modalSize:"lg",children:[(0,a.jsx)("p",{className:"text-sm mb-2",children:(0,a.jsx)(_.Z,{defaultMessage:"Claude can receive information like prompts and attachments from specialized servers using Model Context Protocol. <link>Learn more about MCP</link>.",id:"X+GLMSGJyU",values:{link:e=>(0,a.jsx)("a",{className:"underline",href:tc,target:"_blank",children:e})}})}),Object.keys(n).length>0?(0,a.jsxs)(a.Fragment,{children:[w.length>0&&(0,a.jsxs)(to.fC,{children:[(0,a.jsxs)(to.xz,{className:"bg-bg-300 rounded px-2 py-1 w-fit",children:[(0,a.jsx)(to.B4,{className:"text-text-000",placeholder:v.formatMessage({defaultMessage:"Choose an integration",id:"5HKIiHkEpc"})}),(0,a.jsx)(to.JO,{className:"text-text-400 icon",children:(0,a.jsx)(F.p,{size:16,className:"inline-block ml-2"})})]}),(0,a.jsx)(to.h_,{children:(0,a.jsx)(to.VY,{className:"border-0.5 border-border-300 bg-bg-200 min-w-72 rounded-lg p-1 shadow-sm z-dropdown cursor-pointer",position:"popper",side:"bottom",align:"start",sideOffset:4,alignOffset:0,avoidCollisions:!0,collisionPadding:8,children:(0,a.jsx)(to.l_,{className:"p-2 ",children:(0,a.jsx)(f.$,{className:"max-h-[40vh] pr-4",children:w.map((e,t)=>{var n,i;return(0,a.jsxs)(to.ZA,{children:[(0,a.jsx)(to.__,{className:(0,C.Z)(0===t?"mb-1":"my-1"),children:e}),null===(n=td(l[e],["name"]))||void 0===n?void 0:n.map(t=>(0,a.jsx)(tu,{icon:tl.N,name:t.name,onClick:()=>y(e,t)},t.name)),null===(i=td(s[e],["name","uri"]))||void 0===i?void 0:i.map(t=>(0,a.jsx)(tu,{icon:tr.$,name:t.name||t.uri,onClick:()=>j(e,t.uri)},t.uri))]},e)})})})})})]}),(0,a.jsx)("div",{className:"mt-4 text-text-400",children:(0,a.jsxs)("details",{children:[(0,a.jsx)("summary",{className:"font-medium mb-2 text-sm cursor-pointer",children:(0,a.jsx)(_.Z,{defaultMessage:"Installed MCP Servers",id:"Tag3Z2GF9p"})}),(0,a.jsx)("ul",{children:Object.entries(k).map(e=>{let[t,n]=e;return(0,a.jsxs)("li",{className:"text-xs flex",children:[(0,a.jsx)("div",{className:"flex-1",children:n.name}),(0,a.jsx)("div",{className:"font-extralight",children:n.version})]},t)})})]})})]}):(0,a.jsx)("p",{children:(0,a.jsx)(_.Z,{defaultMessage:"No servers are installed.",id:"ahF6M7bcp3"})})]}),u&&(0,a.jsx)(tm,{prompt:u.prompt,onSubmit:e=>b(u.serverName,u.prompt,e),onClose:()=>m(null)})]})};function tx(e){let t=window.atob(e),n=new ArrayBuffer(t.length),s=new Uint8Array(n);for(let e=0;e<t.length;e++)s[e]=t.charCodeAt(e);return n}var th=n(9599);let tf=e=>{let{onClick:t}=e,n=(0,S.Z)();return(0,a.jsx)(h.u,{tooltipContent:(0,a.jsx)(_.Z,{defaultMessage:"Capture screenshot",id:"4aPgLNzYUy"}),side:"bottom",children:(0,a.jsx)(I.z,{size:"icon_sm",variant:"ghost",className:"!rounded-lg","aria-label":n.formatMessage({defaultMessage:"Capture screenshot",id:"4aPgLNzYUy"}),onClick:t,children:(0,a.jsx)(th.V,{size:18})})})};var tg=n(11919);let tv=e=>{let t=(0,S.Z)(),n=(0,M.useRef)(null);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("input",{ref:n,"data-testid":"file-upload","aria-hidden":"true",tabIndex:-1,className:"absolute -z-10 h-0 w-0 overflow-hidden opacity-0",...e}),(0,a.jsx)(h.u,{className:"text-center !max-w-96",side:"bottom",tooltipContent:(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(_.Z,{defaultMessage:"Upload files <span>(max {maxUploads}, {maxSize}mb each)</span>",id:"rVUf0Sh1aG",values:{maxUploads:eN.Qe,maxSize:tn.MR/1e6,span:e=>(0,a.jsx)("span",{className:"opacity-65",children:e})}})}),children:(0,a.jsx)(I.z,{size:"icon_sm",variant:"ghost",className:"!rounded-lg","aria-label":t.formatMessage({defaultMessage:"Upload content",id:"aJTtTH1gtt"}),onClick:e=>{var t;e.preventDefault(),null===(t=n.current)||void 0===t||t.click()},children:(0,a.jsx)(tg.p,{size:18})})},"upload-tooltip")]})},tj=e=>{let{preferExpanded:t,location:n,projectUuid:s,mcpClients:i,handleScreenshotCapture:l,handleNewHarmonyDirectory:r,handleUpload:o,showHarmonyButton:c,showScreenshotButton:d,showMcpButton:u,harmonyDisabled:m,uploadInputProps:p,isRightAligned:x}=e,[h,f]=(0,M.useState)(!1),v=(0,eX.H7)(),j=(0,eQ.Aj)(),{userHasHarmony:y}=(0,tt.Y)(s),{setIsUploadingDriveSync:b,setIsUploadingGithubSync:w}=(0,ee.r)(),k=c&&y&&r,N=!(0,g.r3)()&&!t&&[d,k,v,j,u].filter(Boolean).length>=2,S=[];d&&l&&S.push((0,a.jsx)(tf,{onClick:l})),k&&S.push((0,a.jsx)(e3,{onNewDirectory:r,disabled:m})),v&&S.push((0,a.jsx)(e8,{setIsUploadingGithubSync:w})),j&&S.push((0,a.jsx)(te,{dropdownAlign:x?"end":"start",setIsUploadingDriveSync:b,setIsOpen:f,isOpen:h})),u&&i&&S.push((0,a.jsx)(tp,{mcpClients:i,handleUpload:o}));let _=(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(tv,{...p}),(0,a.jsx)(H.E.div,{className:(0,C.Z)("inline-flex gap-0 translate-z-0",x&&"flex-row-reverse",N&&"overflow-hidden opacity-0 pointer-events-none group-hover:opacity-100 group-hover:pointer-events-auto transition duration-150",h&&N&&"opacity-100"),children:S.map((e,t)=>(0,a.jsx)("span",{style:N?{transform:"translateX(".concat(x?"":"-").concat(("associationsBlock"===n?10:100)*(t+1),"%)")}:void 0,className:(0,C.Z)("transition-all duration-300 relative group-hover:!translate-x-0",h&&N&&"!translate-x-0"),children:e},t))})]}),E=(0,M.useMemo)(()=>({animate:{width:h?"auto":x?32:"auto"},whileHover:{width:"auto",transition:{duration:.2,ease:"easeOut"}}}),[h,x]);return(0,a.jsx)("div",{className:(0,C.Z)("relative inline-flex h-8 group",N&&"w-8"),children:N?(0,a.jsx)("div",{className:(0,C.Z)("absolute",x?"right-0":"left-0"),children:(0,a.jsx)(H.E.div,{className:(0,C.Z)("inline-flex gap-0 translate-z-0","border-0.5 -m-0.5 p-0.5","chatInput"===n&&h&&N?"shadow-md border-border-300 bg-bg-000":"border-transparent",x?"flex-row-reverse ":"flex-row","chatInput"===n&&N&&"hover:bg-bg-000 hover:shadow-md hover:border-border-300 rounded-[10px]","associationsBlock"===n&&!x&&"pr-4","associationsBlock"===n&&x&&"pl-4"),initial:!1,...E,children:_})}):(0,a.jsx)("div",{className:(0,C.Z)(x?"flex-row-reverse":"flex-row","inline-flex gap-0 translate-z-0"),children:_})})},ty=e=>{let t=(0,T.z$)(),{addError:n}=(0,o.e)(),{setProjectUuid:s}=(0,ee.r)(),[a,i]=(0,M.useState)([]),[l,r]=(0,M.useState)(),{config:c}=(0,tt.Y)(null==e?void 0:e.uuid),{mutateAsync:d}=(0,ed.Qs)(),{mutate:u}=(0,ed.L8)((null==e?void 0:e.uuid)||""),[m,p]=(0,M.useState)(!1),x=(0,M.useCallback)(async n=>{if(e){if(!e.is_harmony_project)throw Error("Cannot add a synced directory to a project")}else t.track({event_key:"apps.harmony_directory_synced"}),s((await d({name:"[Synced directory] ".concat(n.name.substring(0,12),"..."),description:"This project was generated automatically on ".concat(new Date().toLocaleString()," from ").concat(n.name,". You can safely ignore it."),is_private:!0,is_harmony_project:!0})).uuid);r(n)},[t,d,e,s]);return(0,M.useEffect)(()=>{l&&e&&((0,eV.Zn)(l,e.uuid,c.get("ignore",[])).then(()=>p(!0)).catch(n),r(void 0))},[l,c,e,n]),(0,M.useEffect)(()=>{(null==e?void 0:e.uuid)&&m&&((async()=>{let t=await (0,eY.Zz)(e.uuid);i(t),0===t.length&&(u(),s(void 0))})(),p(!1))},[e,s,m,u]),{syncedDirectories:a,handleNewDirectory:x,setDirectoriesNeedRefresh:p}},tb=e=>{let{isProjectLocked:t,hasProjectSelectorOpen:n,setHasProjectSelectorOpen:s,uploadInputProps:i,isUploadingFile:l,hideExamples:r,handleScreenshotCapture:o,mcpClients:c,handleUpload:d,isReply:u,hasAttachments:m}=e,p=(0,S.Z)(),{projectUuid:x,setProjectUuid:h,attachments:f,setAttachments:g,files:v,setFiles:j,syncSourceUuids:y,setSyncSourceUuids:b,isAtMaxNumUploads:w,prompt:k,isSending:N,isUploadingDriveSync:E,isUploadingGithubSync:z}=(0,ee.r)(),Z=(0,eu.U)(),A=!Z,{data:T}=(0,ed.u0)(),I=(0,ec.aP)(y).map((e,t)=>{let{data:n}=e;return{syncSource:n,uuid:y[t]}}),D=null==T?void 0:T.find(e=>e.uuid===x),{syncedDirectories:R,handleNewDirectory:P,setDirectoriesNeedRefresh:O}=ty(D),[F,U]=(0,M.useState)(""),L=(()=>{if(T&&F.length>1)return new eo.Z(T,{includeScore:!0,isCaseSensitive:!1,ignoreLocation:!0,threshold:.4,keys:["name","description"]}).search(F);let e=null==T?void 0:T.filter(e=>e.uuid!==(null==D?void 0:D.uuid)).map(e=>({item:e,score:0}));return D&&(null==e||e.unshift({item:D,score:0})),e})(),G=L&&Array.isArray(L)?L.filter(e=>e&&e.item&&!e.item.is_harmony_project).slice(0,3).map(e=>e.item):[],K=(0,M.useRef)(null),B=!t&&!r&&0===k.length&&!n&&!m&&!N&&"en-US"===p.locale,q=(0,a.jsxs)(a.Fragment,{children:[n&&(0,a.jsx)(eL,{}),(0,a.jsx)(eU,{currentProject:D,hasProjectSelectorOpen:n,setHasProjectSelectorOpen:e=>{s(e),U("")}})]});if(null==D?void 0:D.is_harmony_project)q=(0,a.jsx)(a.Fragment,{children:R.map(e=>(0,a.jsx)(eW,{directory:e,refreshDirectories:()=>O(!0)},e.uuid))});else if(t){var Y;q=D?(0,a.jsxs)("span",{className:"border-0.5 border-border-300 text-accent-secondary-000 border-accent-secondary-000 flex h-7 max-w-full items-center gap-1 overflow-hidden whitespace-nowrap rounded-lg pl-2 pr-1.5 text-xs",children:[(0,a.jsx)(er.j,{size:14,className:"shrink-0"}),(0,a.jsx)("span",{className:"min-w-0 truncate font-medium",children:null!==(Y=null==D?void 0:D.name)&&void 0!==Y?Y:(0,a.jsx)(_.Z,{defaultMessage:"Unknown Project",id:"p8Wt0i7gby"})})]}):null}return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:(0,C.Z)("mr-px flex gap-2 pl-2.5 pr-2 sm:gap-4",n?"flex-col sm:flex-row-reverse":"flex-row-reverse"),children:[Z&&(0,a.jsx)("div",{className:"flex flex-1 items-center justify-end gap-1",children:!u&&q}),n?(0,a.jsx)(eH,{ref:K,query:F,onChange:e=>U(e)}):(0,a.jsxs)("div",{className:(0,C.Z)("flex min-w-0 items-center gap-0.5",A&&"flex-1 flex-row-reverse"),children:[w?(0,a.jsx)(eA,{}):!u&&(0,a.jsx)(tj,{preferExpanded:!0,location:"associationsBlock",projectUuid:x,mcpClients:c,handleScreenshotCapture:o,handleNewHarmonyDirectory:P,handleUpload:d,isRightAligned:A,showHarmonyButton:!0,showScreenshotButton:!!o,showMcpButton:!!c,harmonyDisabled:!!D&&!D.is_harmony_project,uploadInputProps:i}),!u&&!Z&&!m&&!w&&(0,a.jsx)("div",{className:"text-text-400 flex-1 pl-1 text-xs",children:(0,a.jsx)(_.Z,{defaultMessage:"Collaborate with Claude using <span>documents, images, and more</span>",id:"ZYVvbaBasw",values:{span:e=>(0,a.jsx)("span",{className:"inline-block",children:e})}})})]})]}),(0,a.jsxs)("div",{className:"flex flex-col",children:[B&&(0,a.jsx)(eC,{}),Z&&n?(0,a.jsx)(eG,{currentProject:D,matchingProjects:G,hasProjects:void 0!==T&&T.length>0,searchQuery:F,searchInputRef:K,onSelectProject:e=>{e===(null==D?void 0:D.uuid)?h(void 0):(h(e),s(!1))}}):m?(0,a.jsx)(H.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:(0,a.jsx)(em.F,{isUploadingFile:l,isUploadingSync:E||z,attachments:f,files:v,syncSourceResults:I,onRemoveAttachment:e=>{g(t=>t.filter((t,n)=>n!==e))},onRemoveFile:e=>{j(t=>t.filter((t,n)=>n!==e))},onRemoveSyncSource:e=>{b(t=>t.filter(t=>t!==e))}})},"attachments"):null]})]})};var tw=n(42764),tk=n(29105);let tC=e=>{let{dragState:t,placement:n}=e;return(0,a.jsx)(H.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{ease:"linear",duration:.075},className:(0,C.Z)("absolute inset-0 left-2 right-2 z-10 flex flex-col justify-center border border-dashed transition-colors",t===p.h7.DRAGGING_ON_TARGET?"text-accent-secondary-000 bg-accent-secondary-900 border-accent-secondary-200":"text-text-300 bg-bg-100 border-border-200","bottom"===n?"rounded-t-lg":"rounded-b-lg"),children:(0,a.jsxs)(H.E.div,{initial:{opacity:0,scaleX:.85,scaleY:.9},animate:{opacity:1,scaleX:1,scaleY:1},transition:{delay:.075,type:"spring",stiffness:750,damping:40},className:"py-1.5 text-center",children:[(0,a.jsxs)("div",{className:"font-tiempos inline-flex items-center gap-3.5 text-lg",children:[(0,a.jsx)(tw.f,{size:22,className:"translate-y-0.5 -rotate-12 opacity-60"}),(0,a.jsx)(_.Z,{defaultMessage:"Drop files here to add to chat",id:"IYBR/J+nuA"}),(0,a.jsx)(tk.a,{size:22,className:"translate-y-0.5 rotate-12 opacity-60"})]}),(0,a.jsx)("div",{className:"text-xs opacity-70",children:(0,a.jsx)(_.Z,{defaultMessage:"Max {maxFiles, plural, one {# file} other {# files}} per chat at {maxSize} MB each",id:"x2IA2hhKbk",values:{maxFiles:eN.Qe,maxSize:tn.MR/1e6}})})]})},"drop-zone-overlay")},tN=e=>{let{placement:t}=e,{conversation:n,hasAttachments:s}=(0,ee.r)(),{dragState:i}=(0,p.EO)(),l=i===p.h7.DRAGGING_OFF_TARGET||i===p.h7.DRAGGING_ON_TARGET,r=i===p.h7.DROPPED,o="bottom"===t?"6.375rem":"7.875rem",c=r?{height:o}:{},d=!!n;if(!d||s||l||r)return(0,a.jsx)("div",{className:(0,C.Z)("from-bg-400/10 to-bg-400/30 border-0.5 border-border-300 relative flex bg-gradient-to-b backdrop-blur-md overflow-hidden","bottom"===t?"-mb-2 flex-col-reverse rounded-t-2xl pb-5 pt-2.5":"-mt-1.5 flex-col rounded-b-xl pb-2 pt-3.5 md:rounded-b-2xl","bg-bg-200"),children:(0,a.jsxs)(H.E.div,{animate:{opacity:1,minHeight:l?o:0,transition:l?{type:"spring",stiffness:1e3,damping:60,mass:1}:{ease:"linear",duration:.15}},className:(0,C.Z)("relative flex min-h-0 flex-col transition","bottom"===t?"flex-col-reverse":"flex-col"),style:c,children:[(0,a.jsx)(N.M,{children:l&&(0,a.jsx)(tC,{dragState:i,placement:t})}),(0,a.jsx)(el,{className:(0,C.Z)("flex","bottom"===t?"flex-col-reverse":"flex-col"),children:(0,a.jsx)(tb,{...e,isReply:d,hasAttachments:s})})]},"drop-zone")})};var tM=n(94200),tS=n(29516),t_=n(86098),tE=n(66551),tz=n(71912),tZ=n(33768),tA=n(75870),tT=n(13051),tI=n(98062),tD=n(89313);function tR(){let e=(0,s._)(["\n  cursor-pointer\n  hover:bg-bg-200\n  text-xs\n  text-text-500\n  transition-opacity\n  duration-700\n  flex\n  items-center\n  border-border-200\n  border-0.5\n  rounded-lg\n  gap-0.5\n  pl-1.5\n  pr-2\n  py-0.5\n  ml-2\n  mr-0.5\n  mb-1\n"]);return tR=function(){return e},e}function tP(){let e=(0,s._)(["\n  flex\n  flex-col\n  bg-bg-000\n  gap-1.5\n  border-0.5\n  border-border-300\n  pl-4\n  pt-2.5\n  pr-2.5\n  pb-2.5\n  sm:mx-0\n  items-stretch\n  transition-all\n  duration-200\n  relative\n  shadow-[0_0.25rem_1.25rem_hsl(var(--always-black)/3.5%)]\n  focus-within:shadow-[0_0.25rem_1.25rem_hsl(var(--always-black)/7.5%)]\n  hover:border-border-200\n  focus-within:border-border-200\n  cursor-text\n  z-10\n"]);return tP=function(){return e},e}let tO=["enabled_artifacts_attachments","preview_feature_uses_artifacts","preview_feature_uses_latex","enabled_turmeric"],tF=(0,M.forwardRef)((e,t)=>{var n,s,u,A;let{placement:T,placeholder:I,accountSettings:D,onSubmit:R}=e,P=(0,S.Z)(),{prompt:O,tipTapEditorState:F,model:U,projectUuid:L,personalizedStyle:H,setPrompt:G,setTipTapEditorState:K,setModel:B,setAttachments:q,setFiles:Y,attachments:V,files:W,syncSourceUuids:Q,isUploadingDriveSync:X,isUploadingGithubSync:J,isAtMaxNumUploads:$,sendMessage:en,stopSampling:el,conversation:er,isChatSyncing:eo,isProjectSyncing:ec,isProjectLocked:ed,isSending:eu,focusInput:em,isFocused:ep,setIsFocused:ex,promptInputRef:eh,willRedirectOnSubmit:ef,hasBlockingWarning:eg,setPersonalizedStyle:ev,paprikaMode:ej,setPaprikaMode:ey,isReplyAllowed:eb,isUploadingFile:ew,setIsUploadingFile:ek,validateMaxUploadLimit:eC,onDrop:eN,onPasteFiles:eM,handleUpload:eS,uploadInputProps:e_,isModelSelectorOpen:eE,setIsModelSelectorOpen:ez,isNewConversation:eZ}=(0,ee.r)();(0,M.useImperativeHandle)(t,()=>({setContent:(e,t,n)=>{G(e,{forceUpdateTiptap:!1}),q("function"==typeof t?t(V):t),Y("function"==typeof n?n(W):n)},sendMessage:en,setAttachments:e=>{q("function"==typeof e?e(V):e)},getAttachments:()=>V,openModelSelector:()=>{ez(!0)}}));let{openFeaturePreviewModal:eA}=(0,es.h9)(),eT=(0,ea.i)();(0,tT.v)();let{showNewConversationPrompt:eI,dismissConversationLengthPrompt:eD}=(0,tI.a)(null==er?void 0:er.messagesSoFar,null==er?void 0:er.id),eR=(eT?tO.filter(e=>"preview_feature_uses_artifacts"!==e):tO).reduce((e,t)=>{var n;return e+(void 0===er?D[t]?1:0:(null===(n=er.conversationSettings)||void 0===n?void 0:n[t])?1:0)},0),{fetchInputAutocompletion:eP}=(0,z.Vl)(null==er?void 0:er.id),eO=(0,tZ.D)(),eF=(0,tA.Y)(V,q,ek,eC,eM,eO),{mcpClients:eU,isEnabled:eL,mcpTools:eH}=(0,i.c)(),[eG,eK]=(0,M.useState)(!1),eB=(0,M.useCallback)(e=>{eK(e),!1===e&&em()},[em]),eq=null!==(n=null==er?void 0:er.projectKnowledgebaseTokens)&&void 0!==n?n:0,[eY]=(0,tD.X)({conversationUUID:null!==(s=null==er?void 0:er.id)&&void 0!==s?s:null,conversationTokensSoFar:null!==(u=null==er?void 0:er.tokensSoFar)&&void 0!==u?u:0,conversationFiles:null!==(A=null==er?void 0:er.files)&&void 0!==A?A:[],projectKnowledgebaseTokens:eq,input:O,attachments:V,syncSourceUuids:Q}),eV=(0,tz.j)(L),{value:eW}=(0,j.F)("screen_capture"),{value:eQ}=(0,j.F)("test_gated_strings"),eX=(0,v.Rx)(),eJ=eW&&!eX&&!(0,g.r3)(),{addError:e$}=(0,o.e)(),e0=(0,E.O_)(),[e1,e2]=(0,M.useState)(!1),[e5,e3]=(0,M.useState)(!1),{value:e7}=(0,j.F)("papi_mcp"),{activeOrganization:e4}=(0,r.t)(),{data:e6}=(0,Z.j6)(null==e4?void 0:e4.uuid,e7),{enabledTools:e8,toggleTool:e9,isToolEnabled:te,setEnabledTools:tt}=(0,c.$)();(0,M.useEffect)(()=>{if(e7&&e6){let e=new Set;e6.forEach(t=>{t.tools.forEach(t=>{let n=t.tool_key;e.add(n)})});let t=Object.keys(e8).filter(t=>!e.has(t));if(t.length>0){let e={...e8};t.forEach(t=>{delete e[t]}),tt(e)}}},[e6,e8,e7,tt]);let tn=(0,M.useMemo)(()=>[...eH].sort((e,t)=>e.name.localeCompare(t.name)),[eH]),ts=(0,M.useMemo)(()=>{var e;return[...W,...null!==(e=null==er?void 0:er.files)&&void 0!==e?e:[]].some(e=>e.file_kind===y.Y.Image||e.file_kind===y.Y.SanitizedDocument)},[W,er]),ta=0===O.length&&0===V.length&&0===W.length&&0===Q.length||ew||X||J||eo||ec||eg||"will-exceed"===eY||eV||eb||(null==er?void 0:er.isSampling)===!0,ti=eo||ec?P.formatMessage({defaultMessage:"Syncing knowledge...",id:"QuwefnZNVj"}):void 0,tl=(0,M.useCallback)(async()=>{!ta&&(await en(),R&&R())},[ta,R,en]),tr=(0,M.useCallback)(async()=>{let e=null;try{e=await (0,l.n)({width:1568,height:1568})}catch(e){console.error(e),e$(P.formatMessage({defaultMessage:"Could not capture screen",id:"GT8HkzCHoM"}))}if(!e)return;let t=new File([await fetch(e.imageDataUrl).then(e=>e.blob())],"screenshot.png",{type:"image/png"});await eS([t])},[e$,eS,P]),to=(0,M.useCallback)(e=>B(e.model),[B]),td=(0,M.useCallback)(()=>{eB(!1),ex(!0)},[eB,ex]),tu=(0,M.useCallback)(()=>{ex(!1)},[ex]),tm=(0,M.useCallback)(e=>{let t=e.target;"BUTTON"===t.tagName||t.closest("button")||t.getAttribute("role")||em()},[em]);return eI?(0,a.jsx)(tI.h,{onDismiss:eD,projectUuid:L}):e0?(0,a.jsxs)(p.rE,{onDrop:eN,children:[(0,a.jsxs)("fieldset",{className:(0,C.Z)("flex w-full min-w-0","bottom"===T?"flex-col-reverse":"flex-col"),onPasteCapture:e=>{ep&&eF(e)},children:[(0,a.jsxs)(tH,{onClick:tm,className:(0,C.Z)("bottom"===T?"rounded-t-2xl border-b-0":"rounded-2xl",ef&&eu&&"animated-loading-background"),children:[(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(tE.E,{ref:eh,prompt:O,setPrompt:G,tipTapEditorState:F,setTipTapEditorState:K,onSubmit:tl,onFocus:td,onBlur:tu,placement:T,placeholder:null!=I?I:eZ?eQ?(0,m.lF)({id:"spread_attempt_mind",intl:P}):P.formatMessage({defaultMessage:"How can I help you today?",id:"XLcM6WHfQR"}):eQ?(0,m.lF)({id:"window_edge_kiwi",intl:P}):P.formatMessage({defaultMessage:"Reply to Claude...",id:"kSt28+RchS"}),fetchInputAutocompletion:eP}),"bottom"===T&&!$&&(0,a.jsx)(tj,{isRightAligned:!0,location:"chatInput",projectUuid:L,mcpClients:eU,handleScreenshotCapture:tr,handleUpload:eS,showHarmonyButton:!1,showScreenshotButton:eJ,showMcpButton:eL,harmonyDisabled:!0,uploadInputProps:e_}),(0,a.jsx)(t_.h,{isSending:eu,isDisabled:ta,disabledReason:ti,prompt:O,files:W,attachments:V,syncSourceUuids:Q,conversation:er,onSend:tl,onStop:el})]}),(0,a.jsxs)("div",{className:"flex items-end",children:[(0,a.jsxs)("div",{className:"min-w-0 flex-1 flex max-sm:flex-col-reverse max-sm:gap-1.5 sm:items-center",children:[(0,a.jsxs)("div",{className:"-ml-1.5 flex min-h-4 flex-1 items-center pr-3",children:[(0,a.jsx)(tS.O,{selectedModel:U,onSelect:to,hasMultiModalContent:ts,paprikaMode:ej,onPaprikaModeSelect:ey,open:eE,onOpenChange:ez,isNewConversation:eZ,placement:T}),(0,a.jsx)(et,{personalizedStyle:H,onSelect:ev,placement:T,isNewConversation:eZ})]}),(0,a.jsx)(tM.k,{model:U,projectUuid:L,prompt:O,conversation:er})]}),eR>0&&(0,a.jsx)(h.u,{side:"left",tooltipContent:(0,a.jsx)("p",{children:(0,a.jsx)(_.Z,{defaultMessage:"{numFeatures} experimental {numFeatures, plural, one {feature} other {features}} enabled",id:"Qflfs8ioBf",values:{numFeatures:eR}})}),children:(0,a.jsxs)(tL,{onClick:eA,children:[(0,a.jsx)(b.G,{}),eR]})}),e7&&e6&&(0,a.jsx)(h.u,{side:"left",tooltipContent:(0,a.jsx)("p",{children:(0,a.jsx)(_.Z,{defaultMessage:"Tools",id:"nUT0LvZVOx"})}),children:(0,a.jsxs)(tL,{onClick:()=>e3(!0),children:[(0,a.jsx)(w.v,{}),(0,a.jsx)(_.Z,{defaultMessage:"{numEnabledTools} / {numTools}",id:"9mSAgod1ga",values:{numTools:e6.reduce((e,t)=>e+t.tools.length,0),numEnabledTools:Object.values(e8).filter(Boolean).length}})]})}),eH.length>0&&(0,a.jsx)(h.u,{side:"top",tooltipContent:(0,a.jsx)("p",{children:(0,a.jsx)(_.Z,{defaultMessage:"{numTools} MCP {numTools, plural, one {tool} other {tools}} available",id:"pw7qRsBAsH",values:{numTools:eH.length}})}),children:(0,a.jsxs)(tL,{onClick:()=>e2(!0),children:[(0,a.jsx)(k.v,{}),eH.length]})})]})]}),(0,a.jsxs)("div",{className:(0,C.Z)("flex px-1 md:px-2","bottom"===T?"flex-col-reverse":"flex-col"),children:[(0,a.jsx)(ei.n,{placement:T}),(0,a.jsx)(N.M,{children:(0,a.jsx)(tN,{hasProjectSelectorOpen:eG,setHasProjectSelectorOpen:eB,isProjectLocked:ed,uploadInputProps:e_,isUploadingFile:ew,hideExamples:D.has_seen_starter_prompts,placement:T,handleScreenshotCapture:eJ?tr:void 0,mcpClients:eL?eU:void 0,handleUpload:eS})})]})]}),(0,a.jsxs)(x.u_,{title:(0,a.jsx)("div",{className:"font-medium mb-4",children:(0,a.jsx)(_.Z,{defaultMessage:"Available MCP Tools",id:"XGdPC30aOQ"})}),isOpen:e1,onClose:()=>e2(!1),modalSize:"lg",children:[(0,a.jsx)("p",{className:"text-sm mb-2",children:(0,a.jsx)(_.Z,{defaultMessage:"Claude can use tools provided by specialized servers using Model Context Protocol. <link>Learn more about MCP</link>.",id:"Pmlvrp23XB",values:{link:e=>(0,a.jsx)("a",{className:"underline",href:tc,target:"_blank",children:e})}})}),(0,a.jsx)(f.$,{className:"max-h-[60vh] pr-4",children:tn.map(e=>(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("h3",{className:"font-medium text-sm",children:e.name}),(0,a.jsx)("p",{className:"text-sm text-text-400",children:e.description}),(0,a.jsx)("p",{className:"text-xs text-text-300 mt-1 italic",children:(0,a.jsx)(_.Z,{defaultMessage:"From server: {serverName}",id:"h7f9eQRSUE",values:{serverName:e.serverName}})})]},e.name))})]}),(0,a.jsx)(x.u_,{title:(0,a.jsx)("div",{className:"font-medium mb-4",children:(0,a.jsx)(_.Z,{defaultMessage:"Servers & Tools",id:"dpn4vV9YVt"})}),subtitle:(0,a.jsx)("div",{className:"text-sm mb-4",children:(0,a.jsx)(_.Z,{defaultMessage:"{enabledCount} Enabled",id:"0BBDxuKar3",values:{enabledCount:Object.values(e8).filter(Boolean).length}})}),isOpen:e5,onClose:()=>e3(!1),modalSize:"xl",children:(0,a.jsx)(f.$,{className:"max-h-[60vh] pr-4",children:e6&&e6.length>0?e6.map(e=>(0,a.jsxs)("div",{className:"mb-6 border-b border-border-200 pb-4",children:[(0,a.jsxs)("div",{className:"flex items-start mb-5",children:[(0,a.jsx)("h3",{className:"font-medium mr-4",children:e.server_name}),(0,a.jsx)("div",{className:"flex text-sm",children:e.is_authenticated?(0,a.jsx)(_.Z,{defaultMessage:"Authenticated",id:"DKvxb8O36U"}):(0,a.jsx)("a",{href:"".concat(window.location.origin,"/api/organizations/").concat(null==e4?void 0:e4.uuid,"/mcp/start-auth/").concat(e.server_id),children:(0,a.jsx)(_.Z,{defaultMessage:"Not Authenticated",id:"XEpJdBGEGe"})})})]}),(0,a.jsx)("div",{className:"pl-2 mr-4",children:e.tools.map(e=>{let t=e.tool_key;return(0,a.jsxs)("div",{className:"mb-3 flex items-start gap-2 cursor-pointer",onClick:()=>{e9(t,!te(t))},children:[(0,a.jsx)("div",{className:"flex-shrink-0 flex items-center h-full pt-1",children:(0,a.jsx)(d.Z,{checked:te(t),onChange:e=>{e9(t,e.target.checked)}})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h4",{className:"font-medium text-sm",children:e.name}),(0,a.jsx)("p",{className:"text-sm text-text-400",children:e.description})]})]},t)})})]},e.server_id)):(0,a.jsx)("p",{className:"text-text-400 text-sm",children:(0,a.jsx)(_.Z,{defaultMessage:"No remote MCP servers found.",id:"mmjarUui7Y"})})})})]}):(0,a.jsx)(tH,{className:"rounded-2xl h-32"})});tF.displayName="ChatInput";let tU=(0,M.memo)(tF),tL=u.q.div(tR()),tH=u.q.div(tP())},91217:function(e,t,n){n.d(t,{x:function(){return C},r:function(){return k}});var s=n(27573),a=n(26525),i=n(5161),l=n(64295),r=n(6766),o=n(5362),c=n(7653),d=n(66605),u=n(95899),m=n(92676),p=n(40051),x=n(7680),h=n(18701),f=n(40030),g=n(10690),v=n(18013);let j={type:"doc",content:[{type:"paragraph",content:[]}]},y=e=>!!e&&("INPUT"===e.tagName||"TEXTAREA"===e.tagName||"true"===e.getAttribute("contenteditable")||"textbox"===e.getAttribute("role")),b=e=>{let t=(0,c.useCallback)(t=>{if(!(!e||y(document.activeElement))&&1===t.key.length&&!t.ctrlKey&&!t.altKey&&!t.metaKey){var n;t.preventDefault(),null===(n=e.getEditor())||void 0===n||n.chain().insertContent(t.key).focus().run()}},[e]);(0,c.useEffect)(()=>(document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)),[t])},w=c.createContext({attachments:[],files:[],transitionFiles:[],syncSourceUuids:[],isAtMaxNumUploads:!1,model:"",prompt:"",tipTapEditorState:{},projectUuid:void 0,isChatSyncing:!1,personalizedStyle:void 0,isProjectSyncing:!1,isNewConversation:!1,isProjectLocked:!1,isSending:!1,setPrompt:()=>void 0,setTipTapEditorState:()=>void 0,setAttachments:()=>void 0,setFiles:()=>void 0,setSyncSourceUuids:()=>void 0,setModel:()=>Promise.resolve(),setProjectUuid:()=>void 0,sendMessage:()=>void 0,stopSampling:()=>void 0,conversation:void 0,focusInput:()=>void 0,isFocused:!1,setIsFocused:()=>void 0,promptInputRef:{current:null},willRedirectOnSubmit:!1,hasBlockingWarning:!1,setHasBlockingWarning:()=>void 0,setPersonalizedStyle:()=>void 0,isUploadingDriveSync:!1,isUploadingGithubSync:!1,setIsUploadingDriveSync:()=>void 0,setIsUploadingGithubSync:()=>void 0,includeProfilePreferences:!0,setIncludeProfilePreferences:()=>void 0,paprikaMode:void 0,setPaprikaMode:()=>Promise.resolve(),setPaprikaModeState:()=>void 0,isReplyAllowed:!1,setIsReplyAllowed:()=>void 0,isUploadingFile:!1,setIsUploadingFile:()=>void 0,validateMaxUploadLimit:()=>!1,onDrop:()=>void 0,onPasteFiles:()=>Promise.resolve(),handleUpload:()=>Promise.resolve(),uploadInputProps:{type:"",accept:"",onChange:()=>void 0,multiple:!1,"aria-label":""},hasAttachments:!1,isModelSelectorOpen:!1,setIsModelSelectorOpen:()=>void 0}),k=()=>c.useContext(w),C=e=>{var t,n,y,k,C;let{onSend:N,willRedirectOnSubmit:M,onCreate:S,onStopSampling:_}=e,E=(0,c.useRef)(null),z="conversation"in e,{children:Z,projectUuid:A,namespace:T}=e,I=z?e.conversation:void 0,D=(0,c.useCallback)(()=>{z&&_&&_()},[_,z]);b(E.current);let{tipTapEditorState:R,setTipTapEditorState:P,attachments:O,setAttachments:F,files:U,setFiles:L,syncSourceUuids:H,setSyncSourceUuids:G,clear:K}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,s=n?"".concat(n,":"):"",[a,i,l]=(0,v.R)("".concat(s).concat(e,":attachment"),[]),[r,o,d]=(0,v.R)("".concat(s).concat(e,":files"),[]),[u,m,p]=(0,v.R)("".concat(s).concat(e,":syncSourceUuids"),[]),[x,h,f]=(0,v.R)("".concat(s).concat(e,":textInput"),t?{type:"doc",content:[{type:"paragraph",content:[{type:"text",text:t}]}]}:j);return{attachments:a,setAttachments:i,files:r,setFiles:o,syncSourceUuids:u,setSyncSourceUuids:m,tipTapEditorState:x,setTipTapEditorState:h,clear:(0,c.useCallback)(()=>{f(),l(),d(),p()},[l,f,d,p])}}(null!==(n=null==I?void 0:I.id)&&void 0!==n?n:void 0===A?"new-conversation":"".concat(A,":conversation"),"",T),[B,q]=c.useState(""),Y=(0,c.useCallback)(e=>{P(e),q((0,l.A5)(e))},[P]),V=(0,c.useCallback)(function(e){let{forceUpdateTiptap:t=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(q(e),P({type:"doc",content:[{type:"paragraph",content:[{type:"text",text:e}]}]}),!0===t){var n;null===(n=E.current)||void 0===n||n.setContent(e)}},[P]),W=(0,d.aP)(H),Q=(0,d.Vw)(W),X=(0,o.F9)(W),J=O.length+U.length+H.length>=a.Qe,[$,ee]=c.useState(!1),[et,en]=c.useState(null==I?void 0:I.model),{stickyModelPreference:es}=(0,r.M)(),[ea,ei]=c.useState(null!==(y=null==I?void 0:null===(t=I.conversationSettings)||void 0===t?void 0:t.paprika_mode)&&void 0!==y?y:void 0);(0,c.useEffect)(()=>{!et&&es&&en(es)},[es,et,en]);let[el,er]=c.useState(A),eo=(0,m.AQ)(el),[ec,ed]=c.useState(!1),[eu,em]=c.useState(),[ep,ex]=c.useState(!1),[eh,ef]=c.useState(!1),[eg,ev]=c.useState(!1),{storedStyle:ej,defaultStyle:ey}=(0,p.O)(),[eb,ew]=c.useState(),[ek,eC]=c.useState(!0),[eN,eM]=c.useState(!1);(0,c.useEffect)(()=>{let e=null!=ej?ej:ey;!eb&&e&&ew(e)},[ej,ey,eb]);let eS="setPersonalizedStyleCallback"in e?e.setPersonalizedStyleCallback:null;(0,c.useEffect)(()=>{em(void 0),ed(!1)},[null==I?void 0:I.id]),(0,c.useEffect)(()=>{null==eS||eS(eb)},[eb,eS]);let{projectHasHarmony:e_}=(0,h.Y)(el),{openedFiles:eE,projectDocs:ez,projectUuid:eZ}=(0,f.b)(),{getInstance:eA}=(0,x.s)(),{mutateAsync:eT}=(0,u.u3)(eZ),{mutateAsync:eI}=(0,u.Zy)(eZ),eD=(0,c.useCallback)(async()=>{if(E.current&&(""!==B.trim()||0!==O.length||0!==U.length||0!==H.length)){M&&em([...U]),K(),q(""),M?E.current.setEditable(!1):E.current.setContent(""),ed(!0),e_&&await (null===g.ec||void 0===g.ec?void 0:(0,g.ec)(eE,eZ,ez,eT,eI,eA));try{z&&N?(await N({prompt:B,attachments:O,files:U,syncSources:X,personalized_style:eb}),ed(!1),em(void 0)):await S({prompt:B,attachments:O,files:U,syncSources:X,model:et,project_uuid:el,personalized_style:eb,include_conversation_preferences:ek,paprika_mode:ea})}catch(t){var e;V(B),null===(e=E.current)||void 0===e||e.setContent(B),F(O),L(U),G(H),E.current.setEditable(!0),ed(!1),em(void 0)}}},[O,K,eT,U,eA,eZ,e_,ek,z,et,S,N,eE,ea,eb,ez,el,B,F,L,V,G,H,X,eI,M]),eR=(0,c.useCallback)(async e=>{if(en(e),z){ed(!0);try{await S({prompt:B,attachments:O,files:U,syncSources:X,model:e,project_uuid:el,paprika_mode:ea})}finally{ed(!1)}}},[O,U,z,ea,el,B,S,X]),eP=(0,c.useCallback)(async e=>{if(ei(e),z){ed(!0);try{await S({prompt:B,attachments:O,files:U,syncSources:X,model:et,project_uuid:el,paprika_mode:e})}finally{ed(!1)}}},[z,S,B,O,U,X,et,el]),eO=(0,c.useCallback)(()=>{var e;return null===(e=E.current)||void 0===e?void 0:e.focus()},[E]),[eF,eU]=c.useState(!1),eL=(0,i.eh)(),[eH,eG,eK,eB,eq,eY,eV,eW]=(0,a.kS)({syncSourceCount:H.length,attachments:O,setAttachments:F,numExistingConversationAttachments:null!==(k=null==I?void 0:I.attachmentsSoFar)&&void 0!==k?k:0,files:U,setFiles:L,numExistingConversationFiles:null!==(C=null==I?void 0:I.files.length)&&void 0!==C?C:0,detectSameAttachment:()=>!1,selectedModel:et,blobFileUploadsEnabled:eL}),eQ=O.length+U.length,eX=H.length,eJ=eH||eh||eg,e$=eQ>0||eX>0||eJ,e0=(0,c.useMemo)(()=>{var t;return{prompt:B,tipTapEditorState:R,attachments:O,files:e.willRedirectOnSubmit&&ec?null!=eu?eu:[]:U,syncSourceUuids:H,isAtMaxNumUploads:J,isUploadingDriveSync:eh,isUploadingGithubSync:eg,model:et,projectUuid:el,isChatSyncing:Q,personalizedStyle:eb,isProjectSyncing:eo,isNewConversation:void 0===I||0===I.messagesSoFar,isProjectLocked:void 0!==A||void 0!==I,isSending:ec,setPrompt:V,setTipTapEditorState:Y,setAttachments:F,setFiles:L,setSyncSourceUuids:G,setModel:eR,setProjectUuid:er,sendMessage:eD,stopSampling:D,conversation:I,focusInput:eO,isFocused:ep,setIsFocused:ex,promptInputRef:E,willRedirectOnSubmit:null!==(t=e.willRedirectOnSubmit)&&void 0!==t&&t,hasBlockingWarning:eF,setHasBlockingWarning:eU,setPersonalizedStyle:ew,setIsUploadingDriveSync:ef,setIsUploadingGithubSync:ev,includeProfilePreferences:ek,setIncludeProfilePreferences:eC,paprikaMode:ea,setPaprikaMode:eP,setPaprikaModeState:ei,isReplyAllowed:eN,setIsReplyAllowed:eM,isUploadingFile:eH,setIsUploadingFile:eG,validateMaxUploadLimit:eK,onDrop:eB,onPasteFiles:eq,handleUpload:eY,uploadInputProps:eW,hasAttachments:e$,isModelSelectorOpen:$,setIsModelSelectorOpen:ee}},[O,I,U,eO,A,eF,ek,J,Q,ep,eo,ec,eh,eg,et,ea,eb,el,B,e.willRedirectOnSubmit,eD,F,L,eR,eP,V,G,Y,D,H,R,eu,ei,eN,eM,eH,eG,eK,eB,eq,eY,eW,e$,$,ee]);return(0,s.jsx)(w.Provider,{value:e0,children:Z})}},94200:function(e,t,n){n.d(t,{k:function(){return h}});var s=n(27573),a=n(76220),i=n(45790),l=n(15350),r=n(67762);n(7653);var o=n(2949),c=n(90377);let d=/(?:(?:https?|ftp):\/\/)?(?:www\.)?[a-zA-Z0-9-]+(?:\.[a-zA-Z]{2,})+(?:\/[^\s]*)?/i,u=/(?:(https?|ftp):\/\/)(?!(?:[\w-]+\.)*docs\.google\.com\/document\/d\/)(?:[\w-]+\.)+[\w-]+(?:\/[^\s]*)?/i,m=e=>{let{input:t}=e;return((0,o.Aj)()?u:d).test(t)?{claudeDoesNotReadInternetWarning:(0,s.jsx)(p,{})}:{}},p=()=>(0,s.jsx)(c.A,{children:(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(r.V,{className:"h-3.5 w-3.5 shrink-0"}),(0,s.jsx)("span",{children:(0,s.jsx)("a",{href:"https://support.anthropic.com/en/articles/7996846-does-claude-have-access-to-the-internet",className:"hover:underline",target:"_blank",children:(0,s.jsx)(i.Z,{defaultMessage:"Claude cannot access links",id:"QjqTrkXwnb"})})})]})});var x=n(7418);let h=e=>{var t,n,r,o,c;let{model:d,projectUuid:u,prompt:p,conversation:h}=e,{claudeDoesNotReadInternetWarning:f}=m({input:p}),{approachingMessageLimitWarning:g}=(0,x.k)(null!==(n=null==h?void 0:h.id)&&void 0!==n?n:null),{allModelOptions:v}=(0,a.u)(),j=(0,l.nR)(u),y=(null!=j?j:0)>(null!==(r=null===(t=v.find(e=>e.model===d))||void 0===t?void 0:t.slow_kb_warning_threshold)&&void 0!==r?r:155e3)?(0,s.jsx)("div",{className:"max-md:hidden",children:(0,s.jsx)(i.Z,{defaultMessage:"Large knowledge may slow responses",id:"d6mr4c6d+8"})}):void 0,b=null!==(c=null!==(o=null!=f?f:g)&&void 0!==o?o:y)&&void 0!==c?c:void 0;return(0,s.jsx)("div",{className:"text-text-400 text-xs ml-2",children:b})}},9735:function(e,t,n){n.d(t,{u:function(){return p}});var s=n(27573),a=n(96070),i=n(21223),l=n(32737),r=n(86377),o=n(7583),c=n(68425),d=n(45790);let u=e=>{let{paprikaMode:t}=e;return(0,s.jsx)(o.M,{initial:!1,children:"extended"===t&&(0,s.jsx)(c.E.div,{initial:{width:0,opacity:0},animate:{width:14,opacity:1},transition:{type:"spring",stiffness:400,damping:30,mass:1.2},"aria-label":"Extended thinking enabled",children:(0,s.jsx)(l.u,{className:"mt-1 max-w-[20rem]",side:"bottom",tooltipContent:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{children:(0,s.jsx)(d.Z,{defaultMessage:"Claude will think for longer before responding",id:"fhB1UPtWlj"})}),(0,s.jsx)("div",{className:"opacity-60",children:(0,s.jsx)(d.Z,{defaultMessage:"This may use your rate limits faster",id:"/c6/84qzLd"})})]}),children:(0,s.jsx)(c.E.div,{initial:{scale:0},animate:{scale:1},children:(0,s.jsx)(r.h,{className:"text-text-200 translate-y-[0.5px]",size:14})})})})})};var m=n(22235);let p=e=>{let{model:t,hasMultiModalContent:n,paprikaMode:l}=e,r=t.name.replace("Claude",""),o=(0,m.g)(r,t.model,n),c=(0,a.a)();return(0,s.jsxs)("div",{className:"font-tiempos inline-flex items-center gap-[3px] text-[14px] h-[14px] leading-none items-baseline",children:[(0,s.jsx)(i.l,{className:"claude-logo-model-selector block translate-y-[0.5px]",height:11.5}),(0,s.jsxs)("div",{className:"flex items-center gap-[4px]",children:[(0,s.jsx)("div",{className:"whitespace-nowrap tracking-tight select-none",children:o}),!c&&(0,s.jsx)(u,{paprikaMode:l})]})]})}},29516:function(e,t,n){n.d(t,{O:function(){return q}});var s=n(56683),a=n(27573),i=n(96933),l=n(96070),r=n(28266),o=n(76220),c=n(6766),d=n(27218),u=n(9788),m=n(69321),p=n(7653),x=n(40950),h=n(70354),f=n(45033),g=n(32737),v=n(86377),j=n(1133),y=n(14448),b=n(85689),w=n(96346),k=n(60983),C=n(10607),N=n(81695),M=n(45790),S=n(15992),_=n(9735),E=n(75709),z=n(38312),Z=n(92467),A=n(12868);let T=e=>{let{anchorRef:t}=e,{value:n}=(0,y.F)("claude_ai_paprika"),{shouldShow:s,dismiss:i}=(0,A.C)("thought-process-extended-intro-1",{dateAdded:"2025-02-19",priority:Z.t.HIGH,showAfterOthersDismiss:!0});return((0,p.useEffect)(()=>{let e=setTimeout(()=>{try{let e=document.querySelectorAll(".thought-process-nux-popover");if(e.length>0){let t=e[0];t.style.zIndex="100",t.style.pointerEvents="auto"}}catch(e){}},100);return()=>clearTimeout(e)},[]),s&&n)?(0,a.jsx)(z.O,{side:"right",anchorRef:t,onClose:i,accentColor:"pro",introDelay:.5,spacing:{FROM_ANCHOR:15},className:"thought-process-nux-popover z-[99]",children:(0,a.jsx)("p",{className:"font-tiempos tracking-tight font-medium leading-snug pr-1",children:(0,a.jsx)(M.Z,{defaultMessage:"You will now be using extended thinking.",id:"ny1TWmwyKF"})})}):null};var I=n(22235);function D(){let e=(0,s._)(["\n  uppercase\n  mt-0.3\n  bg-accent-pro-100/10\n  text-accent-pro-000\n  rounded-full\n  px-2\n  ml-2\n  -mr-1\n  border-0.5\n  border-accent-pro-100/10\n  leading-4\n  h-4\n  text-[0.6rem]\n  font-medium\n  max-md:absolute\n  max-md:top-1.5\n  max-md:left-2\n  max-md:mt-px\n"]);return D=function(){return e},e}function R(){let e=(0,s._)(["\n  border-0.5\n  border-border-300\n  -mr-1\n  ml-2\n  translate-y-px\n  rounded-full\n  px-2\n  py-px\n  text-xs\n  text-text-500\n  tracking-tight\n  group-hover:bg-bg-100\n"]);return R=function(){return e},e}let P=u.q.div(D()),O=u.q.div(R()),F="extended",U=(0,a.jsx)(M.Z,{defaultMessage:"Upgrade to Claude Pro to use our best and latest models",id:"GFsmqWxmnh"}),L=(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{children:(0,a.jsx)(M.Z,{defaultMessage:"Claude will think for longer before responding",id:"fhB1UPtWlj"})}),(0,a.jsx)("div",{className:"opacity-60",children:(0,a.jsx)(M.Z,{defaultMessage:"This may use your rate limits faster",id:"/c6/84qzLd"})})]}),H={model:"missing-model",name:"Legacy Model",description:"",inactive:!0},G=e=>{var t;let{model:n,currentModelOption:s,opensInNewChat:i,onSelect:l,hasMultiModalContent:r,tag:o,tooltip:c}=e,d=function(){let e=(0,x.Z)();return(0,p.useMemo)(()=>({"claude-3-5-haiku-20241022":e.formatMessage({defaultMessage:"Fastest model for daily tasks",description:"A description of the AI model",id:"75wJbzj8Tm"}),"claude-3-7-sonnet-20250219":e.formatMessage({defaultMessage:"Our most intelligent model yet",description:"A description of the AI model",id:"WW0Apyq96E"})}),[e])}(),u=n.model===(null==s?void 0:s.model),m=(0,I.g)(n.name,n.model,r);return(0,a.jsx)(g.u,{tooltipContent:c,children:(0,a.jsxs)(f.hP,{onClick:()=>{u||l(n)},className:(0,C.Z)("group pr-1 py-1.5"),children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-1 text-sm",children:(0,a.jsx)("div",{className:"flex items-center gap-1.5",children:(0,a.jsx)("div",{children:m})})}),o&&!u&&(0,a.jsx)(P,{children:o}),!u&&i&&!o&&(0,a.jsx)(O,{children:(0,a.jsx)(M.Z,{defaultMessage:"New chat",id:"ATDyLPIoxz"})})]}),(0,a.jsx)("div",{className:"text-text-500 pr-4 text-xs",children:null!==(t=d[n.model])&&void 0!==t?t:n.description})]}),u&&(0,a.jsx)(b.J,{className:"text-accent-main-100 mb-1 mr-1.5",size:16,weight:"bold"})]})})},K=e=>{let{mode:t,title:n,description:s,onSelect:i,opensInNewChat:l,selected:r,disabled:o,tag:c,tooltip:d,extendedModelItemRef:u,highlightBorder:m}=e,x=t===F,[h,j]=(0,p.useState)(m);return p.useEffect(()=>{if(m){j(!0);let e=setTimeout(()=>{j(!1)},2e3);return()=>clearTimeout(e)}j(!1)},[m]),(0,a.jsx)(g.u,{tooltipContent:d,side:"right",children:(0,a.jsxs)(f.hP,{onClick:()=>{r||i(t)},ref:x?u:void 0,className:(0,C.Z)("group pr-1 py-1.5 rounded-md border-2","transition-[border-color] duration-[2000ms] ease-out",h?"border-accent-pro-100/25":"border-transparent"),disabled:o,children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:(0,C.Z)("flex-1 text-sm",r?"text-text-100":"text-text-300 group-hover:text-text-100"),children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-1 text-sm",children:(0,a.jsxs)("div",{className:"flex items-center gap-1.5",children:[n,x&&(0,a.jsx)(v.h,{className:"text-text-100",size:14})]})}),c&&!r&&(0,a.jsx)(P,{children:c})]})}),!r&&l&&!c&&(0,a.jsx)(O,{children:(0,a.jsx)(M.Z,{defaultMessage:"New chat",id:"ATDyLPIoxz"})})]}),(0,a.jsx)("div",{className:"text-text-500 pr-4 text-xs",children:s})]}),r&&(0,a.jsx)(b.J,{className:"text-accent-main-100 mb-1 mr-1.5",size:16,weight:"bold"})]})})},B=e=>{let{paprikaMode:t,handlePaprikaModeSelect:n,supportedPaprikaModes:s,opensInNewChat:i,upsellMode:l,extendedModelItemRef:r,highlightOption:o}=e,{config:c}=(0,S.useConfig)("paprika_config"),{config:d}=(0,S.useConfig)("frontend_fallback_paprika_config"),u=c.get("modes",[]),p=d.get("modes",[]),x=u.length>0?u:p;return(0,a.jsxs)(a.Fragment,{children:[x.length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f.u2,{}),(0,a.jsx)("div",{className:"text-xs text-text-500 pt-2 pb-1 px-2",children:(0,a.jsx)(M.Z,{defaultMessage:"Thinking mode",id:"WdfKUp+Rhf"})})]}),x.map(e=>(0,a.jsx)(K,{mode:e.paprika_mode_value,title:e.title,description:!e.paprika_mode_value||(null==s?void 0:s.includes(e.paprika_mode_value))?e.description_key?(0,a.jsx)(m.d7,{id:e.description_key}):e.description:(0,a.jsx)(M.Z,{defaultMessage:"Switch to 3.7 Sonnet to use this feature",id:"6go2oa6h0d"}),onSelect:n,opensInNewChat:i,disabled:e.paprika_mode_value&&!(null==s?void 0:s.includes(e.paprika_mode_value)),selected:t===e.paprika_mode_value,tag:l&&t!==e.paprika_mode_value?"PRO":void 0,tooltip:"extended"===e.paprika_mode_value?L:l&&t!==e.paprika_mode_value?U:void 0,extendedModelItemRef:r,highlightBorder:void 0!==o&&o===e.paprika_mode_value},e.id))]})},q=e=>{let{selectedModel:t,conversationUUID:n,onSelect:s,disabled:u,placement:m,hasMultiModalContent:x,paprikaMode:g,onPaprikaModeSelect:v,open:b,onOpenChange:S,isNewConversation:z}=e,Z=!z,A=(0,N.useRouter)(),{allModelOptions:I,mainModels:D,overflowModels:R}=(0,o.u)(),P=(0,r.wN)(n||null),O=null!=t?t:P,L=(0,p.useRef)(null),K=(0,p.useRef)(null),{data:q}=(0,i.QR)({limit:void 0}),Y=q&&q.length>=1&&z,V=I.find(e=>e.model===O);V||(V=H);let{value:W}=(0,y.F)("model_selector_enabled"),Q=u||!W,X=(0,d.rW)(),J=Q&&!X,$=!Q||J,{setStickyModelPreference:ee}=(0,c.M)(),[et,en]=(0,p.useState)(!1),es=(0,l.a)(),ea=()=>{A.push("/upgrade/pro")},ei=e=>{if(!Q){var t;!g||(null===(t=e.paprika_modes)||void 0===t?void 0:t.includes(g))||null==v||v(void 0),ee(e.model),s(e)}},el=e=>e.map(e=>(0,a.jsx)(G,{model:e,currentModelOption:V,opensInNewChat:Z,onSelect:J?ea:ei,hasMultiModalContent:x,tag:J&&e.model!==(null==V?void 0:V.model)?"PRO":void 0,tooltip:J&&e.model!==(null==V?void 0:V.model)?U:void 0},e.model));return(0,a.jsxs)(a.Fragment,{children:[Y&&!es&&(0,a.jsx)(E.c,{anchorRef:L,onClickSelect:()=>{var e;null==S||S(!0),!J&&(null===(e=V.paprika_modes)||void 0===e?void 0:e.includes(F))&&(null==v||v(F),en(!0))}}),b&&et&&null!==K.current&&(0,a.jsx)(T,{anchorRef:K}),(0,a.jsxs)(f.Lt,{className:(0,C.Z)("!min-w-[17rem]",es&&"relative"),...es?"bottom"===m?{side:"top",sideOffset:4}:{side:"bottom",sideOffset:4}:null,align:es?"end":"start",unstyledTrigger:!0,onCloseAutoFocus:e=>e.preventDefault(),open:b,onOpenChange:e=>{S&&S(e),e||en(!1)},trigger:(0,a.jsx)("div",{className:"overflow-hidden shrink-0 p-1 -m-1",children:(0,a.jsxs)(h.z,{ref:L,variant:"unstyled",size:"unset","data-testid":"model-selector-dropdown",className:(0,C.Z)("h-7 border-0.5 text-text-100 ml-1.5 inline-flex items-start gap-[0.175em] rounded-md border-transparent text-sm opacity-80 transition hover:opacity-100 disabled:!opacity-80 sm:ml-0 sm:pb-1 sm:pl-1.5 sm:pr-1 sm:pt-1",es?"hover:bg-bg-100 hover:border-border-400":"hover:bg-bg-200 hover:border-border-400"),disabled:!$,children:[(0,a.jsx)(_.u,{model:V,hasMultiModalContent:x,paprikaMode:g}),$&&(0,a.jsx)(w.p,{size:12,className:"text-text-500 shrink-0"})]})}),children:[el(D),!es&&(0,a.jsx)(B,{paprikaMode:g,supportedPaprikaModes:null==V?void 0:V.paprika_modes,handlePaprikaModeSelect:e=>J?ea():null==v?void 0:v(e),opensInNewChat:Z,upsellMode:J,extendedModelItemRef:K,highlightOption:et?F:void 0}),R.length>0&&((0,j.tq)()?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f.u2,{}),(0,a.jsx)("div",{className:"text-xs text-text-500 pt-2 pb-1 px-2",children:(0,a.jsx)(M.Z,{defaultMessage:"More models",id:"9yxvA9+l6B"})}),el(R)]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f.u2,{}),(0,a.jsxs)(f.Vy,{children:[(0,a.jsxs)(f.WR,{className:"pl-2 py-1.5 gap-2",children:[(0,a.jsx)("div",{className:"group-hover:text-text-100  text-sm",children:(0,a.jsx)(M.Z,{defaultMessage:"More models",id:"9yxvA9+l6B"})}),(0,a.jsx)(k.T,{className:"text-text-500 group-hover:text-text-300 mr-1",size:16})]}),(0,a.jsx)(f.nI,{children:(0,a.jsx)(f.A2,{sideOffset:4,children:el(R)})})]})]}))]})]})}},75709:function(e,t,n){n.d(t,{c:function(){return f},q:function(){return h}});var s=n(27573),a=n(96933),i=n(28266),l=n(76220),r=n(27218),o=n(70354),c=n(38312),d=n(14448),u=n(45790),m=n(92467),p=n(12868),x=n(91217);let h=()=>{var e;let{isNewConversation:t,conversation:n,model:s,paprikaMode:o}=(0,x.r)(),{allModelOptions:c}=(0,l.u)(),u=(0,i.wN)((null==n?void 0:n.id)||null),m=null!=s?s:u,p=c.find(e=>e.model===m),h=null==p?void 0:null===(e=p.paprika_modes)||void 0===e?void 0:e.includes("extended"),{data:f}=(0,a.QR)({limit:void 0}),g=f&&f.length>=1&&t&&!o,{value:v}=(0,d.F)("model_selector_enabled"),j=(0,r.rW)();return{showNux:g,canActivateExtendedThinking:h&&!(!v&&!j)}},f=e=>{let{onClickSelect:t,anchorRef:n}=e,{value:a}=(0,d.F)("claude_ai_paprika"),{shouldShow:i,dismiss:l}=(0,p.C)("model-selector-intro-1",{dateAdded:"2025-02-19",priority:m.t.HIGH,showAfterOthersDismiss:!0});return i&&a?(0,s.jsxs)(c.O,{side:"right",anchorRef:n,onClose:l,accentColor:"pro",introDelay:.5,children:[(0,s.jsx)("p",{className:"font-tiempos tracking-tight font-medium leading-snug pr-1",children:(0,s.jsx)(u.Z,{defaultMessage:"Claude can extend its thinking for complex tasks like coding and math.",id:"QmYnRdW4iQ"})}),(0,s.jsx)("div",{className:"flex items-center gap-3 mt-2.5",children:(0,s.jsx)(o.z,{variant:"outline",className:"!gap-0 !text-sm !text-accent-pro-000 !border-accent-pro-100/30 !rounded-lg hover:!bg-accent-pro-100 hover:!text-oncolor-100 !px-3",onClick:()=>{t(),l()},children:(0,s.jsx)(u.Z,{defaultMessage:"Try extended thinking",id:"BtPKzDmGdC"})})})]}):null}},86098:function(e,t,n){n.d(t,{h:function(){return f}});var s=n(27573),a=n(96070),i=n(94872),l=n(70354),r=n(32737),o=n(15595),c=n(25075),d=n(12403),u=n(7583),m=n(68425),p=n(7653),x=n(40950),h=n(45790);let f=e=>{let{prompt:t,files:n,attachments:a,syncSourceUuids:i,conversation:l,onSend:r,onStop:o,isSending:c,isDisabled:d,disabledReason:m}=e,p=(null==l?void 0:l.isStoppingSampling)===!0&&(null==l?void 0:l.isSampling)===!0?"stopping":(null==l?void 0:l.isSampling)===!0?"sampling":t.length>0||n.length>0||a.length>0||i.length>0?"drafting":"empty";return(0,s.jsx)(u.M,{children:"sampling"===p||"stopping"===p?(0,s.jsx)(g,{onStop:o,isLoading:"stopping"===p},"stop"):(0,s.jsx)(v,{isSending:c,isDisabled:d,disabledReason:m,onSend:r},"send")})},g=e=>{let{onStop:t,isLoading:n}=e,a=(0,x.Z)();return(0,p.useEffect)(()=>{let e=e=>{"Escape"!==e.key||n||t()};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[t,n]),(0,s.jsx)(r.u,{tooltipContent:(0,s.jsxs)("div",{className:"inline-flex items-center justify-center gap-1",children:[(0,s.jsx)(h.Z,{defaultMessage:"Stop Claude response",id:"BonFmr6O3r"}),(0,s.jsx)("div",{className:"border-border-200 rounded-md border px-0.5 py-px text-center font-mono",children:(0,s.jsx)(h.Z,{defaultMessage:"ESC",description:"The escape key",id:"xoF0kR5Fua"})})]}),children:(0,s.jsx)(l.z,{variant:"secondary",size:"icon_sm",className:"!rounded-xl",onClick:()=>t(),"aria-label":a.formatMessage({defaultMessage:"Stop Response",id:"qBLKRjyKOp"}),children:n?(0,s.jsx)(o.U,{className:"animate-spin",size:18}):(0,s.jsx)(c.P,{weight:"bold",size:16})})})},v=e=>{let{isSending:t,isDisabled:n,disabledReason:c,onSend:u}=e,m=(0,x.Z)(),h=(0,p.useCallback)(()=>{(0,i.bq)("event","msg_sent",{location:"chat_input"}),u()},[u]);return(0,a.a)()?(0,s.jsx)(j,{children:(0,s.jsx)(r.u,{tooltipContent:c,children:(0,s.jsx)("div",{children:(0,s.jsx)(l.z,{variant:"flat",size:"icon_sm",className:"!rounded-lg !h-7 !w-7",disabled:n,onClick:()=>h(),"aria-label":m.formatMessage({defaultMessage:"Send Message",id:"yJAKR0Ngpn"}),children:t?(0,s.jsx)(o.U,{className:"animate-spin",weight:"bold",size:16}):(0,s.jsx)(d.a,{weight:"bold",size:16})})})})}):(0,s.jsx)(j,{children:(0,s.jsx)(r.u,{tooltipContent:c,children:(0,s.jsx)("div",{children:(0,s.jsx)(l.z,{variant:"flat",size:"icon_sm",className:"!rounded-xl",disabled:n,onClick:()=>h(),"aria-label":m.formatMessage({defaultMessage:"Send Message",id:"yJAKR0Ngpn"}),children:t?(0,s.jsx)(o.U,{className:"animate-spin",weight:"bold",size:16}):(0,s.jsx)(d.a,{weight:"bold",size:16})})})})})},j=e=>{let{children:t}=e;return(0,s.jsx)(m.E.div,{initial:{width:0},animate:{width:"auto"},transition:{ease:"linear",duration:.125},children:(0,s.jsx)(m.E.div,{initial:{scale:.3,opacity:0},animate:{scale:1,opacity:1,transition:{delay:.15,scale:{type:"spring",stiffness:600,damping:30},opacity:{duration:.1}}},children:t})})}},66551:function(e,t,n){n.d(t,{E:function(){return Q}});var s=n(27573),a=n(7653);let i=(0,a.createContext)({setOverrideSubmit:()=>!1});var l=n(96070),r=n(1133),o=n(17845),c=n(81631),d=n(10761),u=n(93785),m=n(51716),p=n(81165),x=n(96633),h=n(19021),f=n(29860),g=n.n(f);let v=new d.H$("inputAutocomplete"),j=()=>({decoration:null,completion:null}),y=(e,t)=>d.Y1.atEnd(e).$anchor.pos===t.$anchor.pos,b=e=>{let{editor:t}=e;if(!y(t.state.doc,t.state.selection))return!1;let n=v.getState(t.state);return!!n.decoration&&(t.view.dispatch(t.state.tr.insertText(n.completion.content)),!0)},w=(e,t,n,s)=>{let a=e.getMeta(v);if(a&&a.prompt===s.doc.textContent&&(t.completion=a),!y(s.doc,s.selection)||!t.completion||t.completion.prompt!==s.doc.textContent)return t.decoration=null,t;let i=document.createElement("span");i.className="text-text-500",i.textContent=t.completion.content;let l=document.createElement("span");l.className="ml-1 px-1 border rounded-lg align-[1px] font-medium text-xs text-text-500",l.textContent="Tab";let r=s.selection.$head.pos,o=h.p.widget(r,i),c=h.p.widget(r,l),d=h.EH.create(s.doc,[o,c]);return t.decoration=d,t},k=u.hj.create({name:"inputAutocompletion",addOptions:()=>({fetchInputAutocompletion:e=>Promise.resolve("")}),addProseMirrorPlugins(){let e=g()(async(e,t)=>{try{let n=this.options.fetchInputAutocompletion,s=await n(t);s&&e.dispatch(e.state.tr.setMeta(v,{prompt:t,content:s}))}catch(e){}},300);return[new d.Sy({key:v,state:{init:j,apply:w},props:{decorations(e){return this.getState(e).decoration}},view:t=>{let{textContent:n}=t.state.doc;return n.length>=3&&e(t,n),{update:(t,n)=>{var s;let{state:a}=t,{doc:i}=a;!n.doc.eq(i)&&(null===(s=v.getState(a).completion)||void 0===s?void 0:s.prompt)!==i.textContent&&i.textContent.length>=3&&e(t,i.textContent)}}}})]},addKeyboardShortcuts:()=>({Tab:b})});var C=n(64295);let N=e=>0===e.state.selection.$from.parentOffset,M=e=>"codeBlock"===e.state.selection.$from.parent.type.name,S=e=>e.state.selection.$from.marks().some(e=>"code"===e.type.name),_=e=>"heading"===e.state.selection.$from.parent.type.name,E=e=>e.state.selection.$from.marks().some(e=>"bold"===e.type.name),z=e=>e.state.selection.$from.marks().some(e=>"italic"===e.type.name),Z=e=>e.state.selection.$from.marks().some(e=>"strike"===e.type.name),A=e=>{let t=e.state.selection.$from;return t.parentOffset===t.parent.nodeSize-2},T=e=>{let t=e.state.tr;t.setStoredMarks([]),t.insertText(""),e.view.dispatch(t)},I=e=>!(e.state.selection.$from.before()>0)&&(T(e),!0),D=e=>!(e.state.selection.$from.after()<e.state.doc.content.size)&&(T(e),!0),R=e=>!(e.state.selection.$from.before()>0)&&e.chain().insertContentAt(0,"<p></p>").run(),P=e=>!(e.state.selection.$from.after()<e.state.doc.content.size)&&e.chain().insertContent("<p></p>").run(),O=u.hj.create({name:"CodeBlockKeyboardNavExtension",addKeyboardShortcuts:()=>({ArrowUp:e=>{let{editor:t}=e;return!!(M(t)&&N(t))&&R(t)}})}),F=u.hj.create({name:"InlineCodeKeyboardNavExtension",addKeyboardShortcuts:()=>({ArrowUp:e=>{let{editor:t}=e;return!!(S(t)&&N(t))&&R(t)},ArrowDown:e=>{let{editor:t}=e;return!!(S(t)&&A(t))&&P(t)},ArrowRight:e=>{let{editor:t}=e;return!!(S(t)&&A(t))&&D(t)},ArrowLeft:e=>{let{editor:t}=e;return!!(S(t)&&N(t))&&I(t)}})}),U=u.hj.create({name:"HeadingKeyboardNavExtension",addKeyboardShortcuts:()=>({ArrowUp:e=>{let{editor:t}=e;return!!(_(t)&&N(t))&&R(t)},ArrowDown:e=>{let{editor:t}=e;return!!(_(t)&&A(t))&&P(t)}})}),L=u.hj.create({name:"BoldKeyboardNavExtension",addKeyboardShortcuts:()=>({ArrowRight:e=>{let{editor:t}=e;return!!(E(t)&&A(t))&&D(t)}})}),H=u.hj.create({name:"ItalicKeyboardNavExtension",addKeyboardShortcuts:()=>({ArrowRight:e=>{let{editor:t}=e;return!!(z(t)&&A(t))&&D(t)}})}),G=u.hj.create({name:"StrikeKeyboardNavExtension",addKeyboardShortcuts:()=>({ArrowRight:e=>{let{editor:t}=e;return!!(Z(t)&&A(t))&&D(t)}})}),K=u.hj.create({name:"PTagShiftEnterCreateExtension",addKeyboardShortcuts:()=>({"Shift-Enter":e=>{let{editor:t}=e;return t.commands.enter(),t.commands.scrollIntoView(),!0},"Alt-Enter":e=>{let{editor:t}=e;return t.commands.enter(),t.commands.scrollIntoView(),!0}})}),B=u.hj.create({name:"pasteCodeAsPlainText",addProseMirrorPlugins:()=>[new d.Sy({key:new d.H$("pasteCodeAsPlainText"),props:{handlePaste:(e,t,n)=>{let{schema:s}=e.state;if(!t.clipboardData||!t.clipboardData.types.includes("vscode-editor-data"))return!1;let a=t.clipboardData.getData("text/plain"),i=s.text(a);return e.dispatch(e.state.tr.replaceSelectionWith(i)),!0}}})]}),q=()=>(0,s.jsx)(m.T5,{className:"code-block",children:(0,s.jsx)("pre",{className:"my-4 block rounded-md bg-[#282c34] p-2 text-[0.875rem] text-[#abb2bf]",children:(0,s.jsx)(m.ms,{as:"code"})})}),Y=e=>{let{tipTapEditorState:t,setTipTapEditorState:n,onReady:s,placeholder:a,extraEditorAttributes:i={},fetchInputAutocompletion:l}=e,d=[p.Z.configure({codeBlock:!1,blockquote:!1,hardBreak:!1,heading:!1,horizontalRule:!1}),o.Z.extend({addNodeView:()=>(0,m.fW)(q)}).configure({lowlight:x.$}),L,O,U,F,H,G,B,K,c.Z.configure({placeholder:a,emptyEditorClass:"is-editor-empty before:!text-text-500 before:whitespace-nowrap"}),k.configure({fetchInputAutocompletion:l})];return{editor:(0,m.jE)({editorProps:{attributes:{enterkeyhint:"enter",class:"break-words max-w-[60ch]",...i}},onCreate:()=>{null==s||s()},autofocus:!(0,r.tq)()&&"end",extensions:d,content:t,onUpdate(e){let{editor:t}=e,s=t.isEmpty,a=t.getJSON();n((0,C._B)(a)),s&&t.commands.focus("end")}})}};var V=n(10607),W=n(40950);let Q=(0,a.forwardRef)((e,t)=>{let{disabled:n,prompt:o,tipTapEditorState:c,setTipTapEditorState:u,placeholder:p,onSubmit:x,onReady:h,onFocus:f,onBlur:g,placement:v,fetchInputAutocompletion:j}=e,y=(0,W.Z)(),{editor:b}=Y({tipTapEditorState:c,setTipTapEditorState:u,onReady:h,placeholder:p,fetchInputAutocompletion:j}),[w,k]=(0,a.useState)(!1);(0,a.useImperativeHandle)(t,()=>({setContent(e){e!==o&&(null==b||b.commands.setContent(e,!1,{preserveWhitespace:"full"}))},setEditable(e){b.setOptions({editable:e})},focus(){null==b||b.commands.focus()},getPosition:()=>null==b?void 0:b.state.selection.$anchor,getEditor:()=>b,getIsAtEnd(){if(!b)return;let e=b.state.selection.$anchor.pos;return d.Y1.atEnd(b.state.doc).$anchor.pos===e}}),[b,o]),(0,a.useEffect)(()=>{null==b||b.setOptions({editable:!n})},[b,n]),(0,a.useEffect)(()=>{if(null!==b&&""!==p){let e=b.extensionManager.extensions.filter(e=>"placeholder"===e.name)[0];e&&(e.options.placeholder=p,b.view.dispatch(b.state.tr))}},[b,p]);let C=(0,l.a)();return(0,s.jsx)(i.Provider,{value:{setOverrideSubmit:k},children:(0,s.jsx)(m.kg,{"aria-label":y.formatMessage({defaultMessage:"Write your prompt to Claude",id:"Lxn7p6AQvE"}),className:(0,V.Z)("max-h-96 w-full overflow-y-auto break-words",C?"min-h-[3rem]":"bottom"!==v&&"min-h-[4.5rem]"),editor:b,onKeyDownCapture:e=>{"Enter"===e.key&&(!x||w||e.shiftKey||e.altKey||e.nativeEvent.isComposing||(0,r.tq)()&&!e.metaKey&&!e.ctrlKey||(e.preventDefault(),x(e)))},onFocus:f,onBlur:g})})});Q.displayName="PromptInput"},90377:function(e,t,n){n.d(t,{A:function(){return i}});var s=n(56683);function a(){let e=(0,s._)(["\n  font-normal\n  text-[0.65rem]\n  sm:text-xs\n  w-full\n  flex\n  gap-1.5\n  items-center\n  justify-between\n"]);return a=function(){return e},e}let i=n(9788).q.div(a())},18145:function(e,t,n){n.d(t,{r:function(){return i}});var s=n(27573),a=n(10607);n(7653);let i=e=>{let{className:t,...n}=e;return(0,s.jsx)("a",{className:(0,a.Z)("text-text-100 font-medium hover:underline",t),...n})}},67311:function(e,t,n){n.d(t,{P:function(){return o}});var s=n(27573),a=n(30070),i=n(10607),l=n(7653),r=n(91217);let o=e=>{let{children:t,actionButton:n,title:o,minimalUi:c}=e,{hasBlockingWarning:d,setHasBlockingWarning:u}=(0,r.r)();return(0,l.useEffect)(()=>(u(!0),()=>{u(!1)}),[d,u]),(0,s.jsx)("div",{className:"w-full",children:(0,s.jsxs)("div",{className:"flex w-full flex-col items-center md:flex-row gap-2",children:[(0,s.jsxs)("div",{className:(0,i.Z)("flex flex-row items-center gap-2 md:w-full",c?null:"text-danger-000"),children:[c?null:(0,s.jsx)(a.v,{className:"h-4 w-4 shrink-0",weight:"regular"}),(0,s.jsxs)("div",{children:[o&&(0,s.jsx)("div",{className:"text-sm font-medium",children:o}),(0,s.jsx)("div",{className:"text-sm",children:t})]})]}),!!n&&(0,s.jsx)("div",{className:"-mt-px w-full whitespace-nowrap md:w-fit",children:n})]})})}},75830:function(e,t,n){n.d(t,{s:function(){return r}});var s=n(27573),a=n(70354),i=n(88146),l=n(90377);function r(e){let{messageComponents:t}=e;return(0,s.jsx)(l.A,{children:(0,s.jsx)(o,{messageComponents:t})})}function o(e){let{messageComponents:t}=e;return(0,s.jsx)("div",{children:t.map((e,t)=>e.button?(0,s.jsx)(a.z,{href:e.href,target:"_blank",children:e.text},t):e.href?(0,s.jsx)(i.default,{href:e.href,className:"underline",target:"_blank",children:e.text},t):(0,s.jsx)("span",{children:e.text},t))})}},98062:function(e,t,n){n.d(t,{a:function(){return v},h:function(){return j}});var s=n(56683),a=n(27573),i=n(96070),l=n(3053),r=n(18013),o=n(9788),c=n(70354),d=n(35919),u=n.n(d),m=n(81695),p=n(7653),x=n(45790),h=n(15992);function f(){let e=(0,s._)(["\n  flex\n  flex-row\n  gap-2\n  justify-between\n  items-center\n  p-6\n  mt-6\n  -mx-1\n  sm:mx-0\n  flex\n  items-start\n  transition-all\n  focus-within:border-border-200\n  relative\n  z-[5]\n"]);return f=function(){return e},e}function g(){let e=(0,s._)(["\n  flex\n  flex-row\n  gap-2\n  justify-between\n  items-center\n  bg-bg-000\n  rounded-t-2xl\n  border-t-0.5\n  border-x-0.5\n  border-border-300\n  p-6\n  mt-6\n  -mx-1\n  sm:mx-0\n  flex\n  items-start\n  transition-all\n  focus-within:border-border-200\n  relative\n  z-[5]\n  shadow-[0_0.25rem_1.25rem_hsl(var(--always-black)/5%),0_0_0.75rem_0.5rem_hsl(var(--bg-100))]\n"]);return g=function(){return e},e}function v(e,t){let[n]=(0,p.useState)(null!=e?e:0),{config:s}=(0,h.useConfig)("prompt_new_conversation_count"),[a,i]=(0,r.R)("disissed-prompt-length-warnings",{});if(void 0===e||void 0===t||t in a)return{showNewConversationPrompt:!1,dismissConversationLengthPrompt:u()};let l=s.get("blockInputCount",null);return{showNewConversationPrompt:null!==l&&n>=l,dismissConversationLengthPrompt:()=>{i(e=>({...e,[t]:!0}))}}}function j(e){let{onDismiss:t,projectUuid:n}=e,s=(0,l.z$)(),r=(0,m.useRouter)();(0,p.useEffect)(()=>{s.track({event_key:"chat.conversation.too_long_prompt:loaded"})},[s]);let o=(0,p.useCallback)(()=>{s.track({event_key:"chat.conversation.too_long_prompt:accepted"}),n?r.push("/project/".concat(n)):r.push("/chats")},[s,r,n]),d=(0,p.useCallback)(()=>{s.track({event_key:"chat.conversation.too_long_prompt:dismissed"}),t()},[s,t]),u=(0,i.a)(),h=(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:(0,a.jsx)(x.Z,{defaultMessage:"The chat is getting long.",id:"bkaK5uVbky"})}),(0,a.jsx)("p",{className:"text-xs",children:(0,a.jsx)(x.Z,{defaultMessage:"Long chats cause you to reach your usage limits faster.",id:"QsXKYzHfxO"})})]}),(0,a.jsxs)("div",{className:"flex flex-col justify-center gap-4 md:flex-row",children:[(0,a.jsx)(c.z,{onClick:d,variant:"secondary",children:(0,a.jsx)(x.Z,{defaultMessage:"Continue chat",id:"/XpmIDW6G2"})}),(0,a.jsx)(c.z,{onClick:o,children:(0,a.jsx)(x.Z,{defaultMessage:"Start new chat",id:"KcA+xo4hhh"})})]})]});return u?(0,a.jsx)(y,{children:h}):(0,a.jsx)(b,{children:h})}let y=o.q.div(f()),b=o.q.div(g())},64740:function(e,t,n){n.d(t,{n:function(){return l}});var s=n(27573),a=n(70354),i=n(10607);n(7653);let l=e=>{let{className:t,isPro:n=!1,...l}=e;return(0,s.jsx)(a.z,{variant:"secondary",size:"sm",className:(0,i.Z)("@lg:w-fit w-full shrink-0",n&&"!bg-accent-pro-100 hover:!bg-accent-pro-000 !text-oncolor-100",t),...l})}},82056:function(e,t,n){n.d(t,{F:function(){return r}});var s=n(27573),a=n(8571),i=n(27218);n(7653);var l=n(45790);function r(e){let{allowSelfUpgrade:t=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(function(e){let t=(0,i.w7)(),n=(0,i.z6)(),s=(0,a.Z)();return t?s?e&&!n?"subscribe-pro-only":"subscribe":"contact-sales":"none"}(t)){case"contact-sales":return(0,s.jsx)(o,{Elem:e});case"subscribe":return(0,s.jsx)(c,{Elem:e});case"subscribe-pro-only":return(0,s.jsx)(d,{Elem:e});case"none":return null}}function o(e){let{Elem:t}=e,{websiteBaseUrl:n}=(0,a.m)();return(0,s.jsx)(t,{href:"".concat(n,"/contact-sales"),children:(0,s.jsx)(l.Z,{defaultMessage:"Contact us to upgrade",id:"VifKcG4Va9"})})}function c(e){let{Elem:t}=e;return(0,s.jsx)(t,{href:"/upgrade",isPro:!0,children:(0,s.jsx)(l.Z,{defaultMessage:"Subscribe",id:"gczcC5Leue"})})}function d(e){let{Elem:t}=e;return(0,s.jsx)(t,{href:"/upgrade/pro",isPro:!0,children:(0,s.jsx)(l.Z,{defaultMessage:"Subscribe to Pro",id:"/sbPIW+aJK"})})}},7418:function(e,t,n){n.d(t,{j:function(){return _},k:function(){return k}});var s=n(27573),a=n(96933),i=n(28266),l=n(76220),r=n(49185),o=n(3053),c=n(27218),d=n(70354),u=n(6385),m=n(14448),p=n(51432),x=n(10607),h=n(13784),f=n(7653),g=n(45790),v=n(90377),j=n(18145),y=n(67311),b=n(82056),w=n(64740);let k=(e,t)=>{let{messageLimit:n}=(0,c.t)(),a=(null==n?void 0:n.type)==="within_limit",l=(0,i.wN)(e),r=a?null:null==n?void 0:n.conversationUUID,o=(0,i.wN)(null!=r?r:null);return(null==n?void 0:n.type)!=="within_limit"&&(null==n?void 0:n.perModelLimit)&&l!==o?{}:(null==n?void 0:n.type)==="exceeded_limit"||(null==n?void 0:n.type)==="approaching_limit"&&0===n.remaining?{messageLimit:n,exceededMessageLimitWarning:(0,s.jsx)(C,{currentModelId:l,messageLimit:n,projectUUID:t})}:(null==n?void 0:n.type)==="approaching_limit"?{messageLimit:n,approachingMessageLimitWarning:(0,s.jsx)(N,{messageLimit:n})}:{}};function C(e){let{currentModelId:t,messageLimit:n,projectUUID:a}=e,i=(0,c.Cf)(),l=(0,c.ZJ)(),r=(0,b.F)(w.n),{value:o}=(0,m.F)("model_selector_enabled"),d=h.ou.fromSeconds(n.resetsAt);return o?(0,s.jsx)(M,{currentModelId:t,messageLimit:n,projectUUID:a,children:(0,s.jsx)(S,{messageLimit:n})}):(0,s.jsxs)(y.P,{actionButton:r,children:[l||i?(0,s.jsx)(g.Z,{defaultMessage:"You are out of <link>messages</link> until {time}",id:"sqvsjJNE8n",values:{time:(0,s.jsx)("span",{className:"inline-block",children:d.toLocaleString(h.ou.TIME_SIMPLE)}),link:e=>(0,s.jsx)("a",{className:"underline",target:"_blank",rel:"noreferrer",href:u.pz,children:e})}}):(0,s.jsx)(g.Z,{defaultMessage:"You are out of free <link>messages</link> until {time}",id:"PKaisys/Ji",values:{time:(0,s.jsx)("span",{className:"inline-block",children:d.toLocaleString(h.ou.TIME_SIMPLE)}),link:e=>(0,s.jsx)("a",{className:"underline",target:"_blank",rel:"noreferrer",href:u.pz,children:e})}}),(0,s.jsx)(S,{messageLimit:n})]})}let N=e=>{let{messageLimit:t}=e,n=(0,b.F)(j.r),a=(0,c.rW)()?u.m7:u.pz,i=h.ou.fromSeconds(t.resetsAt);return(0,s.jsxs)(v.A,{children:[(0,s.jsx)("span",{children:(0,s.jsx)(g.Z,{defaultMessage:"{remaining, plural, one {# message} other {# messages}} <link>remaining</link> until {time}",id:"E+zOwQdJ1F",values:{remaining:t.remaining,time:(0,s.jsx)("span",{className:"inline-block",children:i.toLocaleString(h.ou.TIME_SIMPLE)}),link:e=>(0,s.jsx)("a",{className:"underline",target:"_blank",rel:"noreferrer",href:a,children:e})}})}),n]})},M=e=>{let{currentModelId:t,messageLimit:n,projectUUID:i,children:r}=e,{allModelOptions:c,activeModelOptions:d}=(0,l.u)(),u=(0,o.z$)();(0,f.useEffect)(()=>{u.track({event_key:"apps.nudge_banner_shown",conversation_uuid:n.conversationUUID,banner_name:"USE_NEXT_MODEL_AFTER_LIMIT"})},[n.conversationUUID,u]);let m=c.find(e=>e.model===t),v=(null==m?void 0:m.name)||"this model",j=d.filter(e=>e.model!==t),b=j.find(e=>e.name.toLowerCase().includes("haiku"))||j.pop(),k=null==b?void 0:b.name,C=(0,f.useMemo)(()=>(0,p.H)(),[]),N=(0,a.$H)("push",C),M=h.ou.fromSeconds(n.resetsAt);return(0,s.jsxs)(y.P,{actionButton:b&&(0,s.jsx)(w.n,{onClick:()=>{b&&(u.track({event_key:"apps.nudge_banner_clicked",conversation_uuid:n.conversationUUID,new_conversation_uuid:C,banner_name:"USE_NEXT_MODEL_AFTER_LIMIT"}),N({model:b.model,projectUuid:i}))},children:(0,s.jsx)(g.Z,{defaultMessage:"Start {modelName} chat",id:"X/NcGuEKQY",values:{modelName:k}})}),children:[(0,s.jsx)(g.Z,{defaultMessage:"Message limit reached for {modelName} until {time}.",id:"3Nf2wpbccC",values:{modelName:v,time:(0,s.jsx)("span",{className:"inline-block",children:M.toLocaleString(h.ou.TIME_SIMPLE)})}}),b&&(0,s.jsx)("div",{className:(0,x.Z)("text-text-300"),children:(0,s.jsx)(g.Z,{defaultMessage:"You may still be able to continue on {modelName}",id:"A4w0Rd3E7j",values:{modelName:k}})}),r]})},S=e=>{let{messageLimit:t}=e,{mutate:n}=(0,r.I)(t.conversationUUID),{value:a}=(0,m.F)("can_reset_rate_limits");return a?(0,s.jsx)(d.z,{className:"ml-2",variant:"secondary",size:"sm",onClick:()=>n(),children:(0,s.jsx)(g.Z,{defaultMessage:"Reset limits",id:"0Lg76lu7jn"})}):null},_=e=>{var t;let{messageLimit:n,activeOrganization:s}=(0,c.t)(),a=(0,r.n)(),l=(0,i.wN)(e),o=(null==n?void 0:n.type)!=="within_limit"&&null!==(t=null==n?void 0:n.conversationUUID)&&void 0!==t?t:null,d=(0,i.wN)(o);(0,f.useEffect)(()=>{(null==s?void 0:s.uuid)&&n&&"within_limit"!==n.type&&d!==l&&a({type:"within_limit"},s.uuid,e)},[e,d,s,n,l,a])}},74187:function(e,t,n){n.d(t,{D:function(){return l},w:function(){return r}});var s=n(27573),a=n(45790),i=n(90377);let l=1e5,r=()=>(0,s.jsx)(i.A,{className:"!justify-center",children:(0,s.jsx)("span",{className:"font-semibold",children:(0,s.jsx)(a.Z,{defaultMessage:"Long prompts or documents may take multiple minutes to respond",id:"bw4uiEG/kB"})})})},89313:function(e,t,n){n.d(t,{X:function(){return r}});var s=n(53949),a=n(66605),i=n(18409),l=n(35548);let r=e=>{let{conversationUUID:t,conversationTokensSoFar:n,conversationFiles:r,projectKnowledgebaseTokens:o,input:c,attachments:d,syncSourceUuids:u,chatInputModel:m}=e;o=null!=o?o:0;let p=r.filter(e=>e.file_kind===s.Y.Image),x=n+(0,l.hn)(p)+r.filter(e=>e.file_kind===s.Y.SanitizedDocument).reduce((e,t)=>e+(0,l.ZJ)(t),0)+o,h=(0,l.y1)(c,p,d),f=x+h+(0,a.fg)(u),g=(0,i.e)(t,m),v=null;return x>g?v="exceeded":f>g&&(v="will-exceed"),[v,{conversationTokens:x,msgTokens:h,totalTokens:f,maxConversationTokens:g}]}},71912:function(e,t,n){n.d(t,{j:function(){return a}});var s=n(15350);let a=e=>{let t=(0,s.nR)(e),n=(0,s.mo)();return void 0!==t&&t>n}},22235:function(e,t,n){n.d(t,{g:function(){return o}});var s=n(27573),a=n(32737),i=n(14448),l=n(30070),r=n(45790);function o(e,t,n){let{value:o}=(0,i.F)("claude_ai_cinnamon"),{value:c}=(0,i.F)("claude_ai_chili");return o&&c&&void 0!==n&&"claude-3-5-haiku-20241022"===t&&n?(0,s.jsxs)(s.Fragment,{children:[e.replace("3.5 Haiku","3 Haiku"),(0,s.jsx)(a.u,{tooltipContent:(0,s.jsx)("div",{className:"text-center",children:(0,s.jsx)(r.Z,{defaultMessage:"Claude 3.5 Haiku does not support images",id:"VkrkeY0z6g"})}),children:(0,s.jsx)(l.v,{className:"inline-block ml-1 translate-y-[-1px]"})})]}):e}},33768:function(e,t,n){n.d(t,{D:function(){return h}});var s=n(27573),a=n(26525),i=n(27895),l=n(10228),r=n(7653),o=n(40950),c=n(45790),d=n(66605),u=n(2949),m=n(91217),p=n(70712),x=n(56767);let h=()=>{let{setSyncSourceUuids:e,isAtMaxNumUploads:t,setIsUploadingDriveSync:n,prompt:h}=(0,m.r)(),f=(0,u.Aj)(),{addError:g}=(0,i.e)(),v=(0,o.Z)(),{mutate:j}=(0,d.cE)({onMutate:()=>{n(!0)},onSuccess:t=>{e(e=>[...e,t.uuid]),n(!1)},onError:e=>{n(!1),g((0,x.A)(e))},meta:{noToast:!0}}),{isDriveAuthenticated:y,initDriveAuth:b}=(0,u.nC)({callerIdentifier:"chat-input",handleAuthSuccess:()=>{for(let e of h.match(/(https?:\/\/[^\s]+)/gi)||[]){let t=(0,p.g)(e);t&&w(t,!0)}}}),w=(0,r.useCallback)(function(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(f||n){if(!y&&!n){g((0,s.jsx)("span",{children:(0,s.jsx)(c.Z,{defaultMessage:"<button>Authenticate</button> to paste link as attachment",id:"85AH1hyv0s",values:{button:e=>(0,s.jsx)("button",{className:"underline",onClick:b,children:e})}})}));return}if(t){g(v.formatMessage({defaultMessage:"You can add at most {maxUploads, plural, one {# attachment} other {# attachments}} to a message.",id:"wvnM4s8976"},{maxUploads:a.Qe}));return}j({sync_source_type:l.Fg.GDRIVE,sync_source_config:{uri:e}})}},[f,y,t,j,b,g,v]);return w}},75870:function(e,t,n){n.d(t,{Y:function(){return x}});var s=n(27573),a=n(87683),i=n(5362),l=n(27218),r=n(27895),o=n(14448),c=n(45144),d=n(7653),u=n(45790),m=n(26525),p=n(70712);function x(e,t,n,x,h,f){let g=function(e,t,n,p){let{addError:x}=(0,r.e)(),h=(0,d.useCallback)(e=>{n(!1),e&&x(e)},[x,n]),{activeOrganization:f}=(0,l.t)(),g=null==f?void 0:f.uuid,v=(0,i.OJ)(),j=(0,d.useCallback)(async e=>{let t;if(!g)return h((0,s.jsx)(u.Z,{defaultMessage:"Invalid login",id:"m0+xd2UWTk"}));new URL("/api/organizations/".concat(g,"/fetch_url"),window.location.origin).searchParams.set("url",e);try{t=await v("/api/organizations/".concat(g,"/fetch_url?url=").concat(encodeURIComponent(e)))}catch(e){return(0,c.Tb)(e),h((0,s.jsx)(u.Z,{defaultMessage:"One or more fetches have failed. Try again.",id:"anYsv8zeLR"}))}if(429===t.status)return h("Too many fetch attempts. Please wait and try again later.");if(!t.ok)return"fetch_unsupported_filetype"===(await t.json()).error.code?h():h((0,s.jsx)(u.Z,{defaultMessage:"Fetching failed for one of the URLs. Please try again.",id:"Evnb9+Woth"}));let n=await t.json();return n&&0!==Object.keys(n).length&&n.extracted_content?n:h((0,s.jsx)(u.Z,{defaultMessage:"Text extraction failed for one of the URLs.",id:"Pl7Qm8W+aN"}))},[v,g,h]),{value:y}=(0,o.F)("hatch_use_web_fetcher");return(0,d.useCallback)(async s=>{if(!y)return;let i=[],l=(0,a.Yl)(s);if(0!==l.length&&p({numNewPotentialAttachments:l.length})){for(let t=0;t<l.length;t++){let s=l[t];if(e.some(e=>s.endsWith(e.file_name)))continue;n(!0);let a=await j(s);if(!a)return;i.push(a)}i.forEach(e=>(0,m.Ch)(e)),i.length>0&&t(e=>[...e,...i]),n(!1)}},[y,p,j,n,t,e])}(e,t,n,x),[v,j]=(0,d.useState)(!1);return(0,d.useEffect)(()=>{let e=e=>{"Shift"===e.key&&j(!0)},t=e=>{"Shift"===e.key&&j(!1)};return window.addEventListener("keydown",e),window.addEventListener("keyup",t),()=>{window.removeEventListener("keydown",e),window.removeEventListener("keyup",t)}},[]),(0,d.useCallback)(e=>{var n,s,a;let i=null===(s=e.clipboardData)||void 0===s?void 0:null===(n=s.files)||void 0===n?void 0:n.length,l=null===(a=e.clipboardData)||void 0===a?void 0:a.getData("text/plain"),r=null==l?void 0:l.length;if(r&&!i){let e=(0,p.g)(l);e&&f(e)}if(i&&!r){x({newUploads:Array.from(e.clipboardData.files)})&&h(e.clipboardData.files),e.preventDefault();return}if(x({numNewPotentialAttachments:1,showError:!1})){if(g(l).catch(console.error),!r||l.length<4e3||v)return;e.preventDefault(),t(e=>{let t="paste.txt",n=1;for(;e.some(e=>e.file_name===t);)n+=1,t="paste-".concat(n,".txt");return[...e,{file_name:t,file_size:l.length,file_type:"txt",extracted_content:l}]})}},[x,t,g,h,f,v])}},13051:function(e,t,n){n.d(t,{v:function(){return l}});var s=n(28266),a=n(7653),i=n(91217);let l=()=>{let{setPrompt:e,setAttachments:t,setFiles:n}=(0,i.r)(),{failedStreamRetryData:l,setFailedStreamRetryData:r}=(0,s.Qk)();(0,a.useEffect)(()=>{null!==l&&(e(l.prompt),t(l.attachments),n(l.files),r(null))},[l,t,r,n,e])}},48894:function(e,t,n){n.d(t,{d:function(){return d},b:function(){return c}});var s=n(27573),a=n(18013),i=n(81695),l=n(7653),r=n(20355);let o=(0,l.createContext)({isDrawerExpanded:!1,setIsDrawerExpanded:()=>void 0});function c(){return(0,l.useContext)(o)}function d(e){let{children:t,conversationUUID:n}=e,c=function(e){let t=!!(0,i.useSearchParams)().get("controls")&&!(window.matchMedia&&window.matchMedia("(max-width: 767px)").matches),[n]=(0,a.R)("".concat(e,":chatControlsSidebarIsOpen"),t);return n}(n),{isExpanded:d,setIsExpanded:u}=(0,r.S)(),[m,p]=(0,l.useState)(c),x=(0,l.useRef)({reopenMain:!1});return(0,s.jsx)(o.Provider,{value:{isDrawerExpanded:m,setIsDrawerExpanded:e=>{e&&(d&&(x.current.reopenMain=!0),u(!1)),!e&&x.current.reopenMain&&(x.current.reopenMain=!1,u(!0)),p(e)}},children:t})}},40051:function(e,t,n){n.d(t,{O:function(){return r},g:function(){return l}});var s=n(18013),a=n(14448),i=n(42814);let l=(e,t)=>"default"===e.type&&e.key===t||"custom"===e.type&&e.uuid===t,r=()=>{let{value:e}=(0,a.F)("concise_mode_enabled"),{data:t,isLoading:n}=(0,i.h9)(),r=(null==t?void 0:t.defaultStyles)||[],o=[...r,...((null==t?void 0:t.customStyles)||[]).map(e=>({...e,key:e.key||e.uuid}))],[c,d,u]=(0,s.R)("claude_personalized_style",null);if(n||!(null==o?void 0:o.length))return{personalizedStyleOptions:[],defaultStyle:null,storedStyle:null,setStoredStyle:d,clearStoredStyle:u,conciseModeEnabled:e};let m=r.length?r.find(e=>!0===e.isDefault)||r[0]:null;if(e&&(m=r.find(e=>"Concise"===e.key)||m),!c)return{personalizedStyleOptions:o,defaultStyle:m,storedStyle:c,setStoredStyle:d,clearStoredStyle:u,conciseModeEnabled:e};let p=o.find(e=>l(e,c.styleKey)),x=Date.now()-new Date(c.timestamp).getTime()>432e5;return{personalizedStyleOptions:o,storedStyle:p&&!x?p:null,defaultStyle:m,setStoredStyle:d,clearStoredStyle:u,conciseModeEnabled:e}}},1399:function(e,t,n){n.d(t,{NuxProvider:function(){return l},s:function(){return i}});var s=n(27573),a=n(7653);let i=(0,a.createContext)(null);function l(e){let{children:t}=e,[n,l]=(0,a.useState)({items:{},currentlyShowing:null}),o=(0,a.useCallback)((e,t)=>{l(n=>{if(n.items[e])return n;let s={...n.items,[e]:t};return{items:s,currentlyShowing:r(s,!0)}})},[]),c=(0,a.useCallback)(e=>{l(t=>{let{[e]:n,...s}=t.items;return{items:s,currentlyShowing:t.currentlyShowing===e?r(s):t.currentlyShowing}})},[]),d={items:n.items,currentlyShowing:n.currentlyShowing,registerNux:o,unregisterNux:c};return(0,s.jsx)(i.Provider,{value:d,children:t})}let r=(e,t)=>{let n=Object.entries(e).sort((e,t)=>{let n=e[1].priority||0,s=t[1].priority||0;return n!==s?s-n:new Date(t[1].dateAdded).getTime()-new Date(e[1].dateAdded).getTime()});if(t){var s,a;return null!==(a=null===(s=n[0])||void 0===s?void 0:s[0])&&void 0!==a?a:null}for(let[e,t]of n)if(t.showAfterOthersDismiss)return e;return null}},92467:function(e,t,n){var s,a;n.d(t,{t:function(){return s}}),(a=s||(s={}))[a.HIGH=30]="HIGH",a[a.MEDIUM=20]="MEDIUM",a[a.LOW=10]="LOW",a[a.NONE=0]="NONE"},12868:function(e,t,n){n.d(t,{C:function(){return l}});var s=n(7653),a=n(21878),i=n(1399);function l(e,t){let{dateAdded:n,priority:l,showAfterOthersDismiss:r}=t,o=(0,s.useContext)(i.s),{dismiss:c,isDismissed:d}=(0,a.K)();if(!o)throw Error("useNux must be used within a NuxProvider");let{registerNux:u,unregisterNux:m,currentlyShowing:p}=o;return(0,s.useEffect)(()=>{if(!d(e))return u(e,{dateAdded:n,priority:l,showAfterOthersDismiss:r}),()=>m(e)},[e,n,l,r,d,u,m]),{shouldShow:p===e&&!d(e),dismiss:()=>{c(e),m(e)}}}},63731:function(e,t,n){n.d(t,{Y7:function(){return j},hK:function(){return b},qg:function(){return y}});var s=n(27573),a=n(27218),i=n(5984),l=n(70354),r=n(10228),o=n(64047),c=n(7533),d=n(72243),u=n(10607),m=n(7653),p=n(45790),x=n(40950),h=n(59016),f=n(32559),g=n(57393),v=n(53545);let j=(0,s.jsx)(p.Z,{defaultMessage:"Everyone in your organization can view and use this project",id:"o6dyBu92Ad"}),y=(0,s.jsx)(p.Z,{defaultMessage:"Only invited members can view and use this project",id:"r65HKpZU8I"});function b(e){var t,n,b,w,k,C;let{syncSources:N=[],onProjectCreated:M,onError:S,onCancel:_,strings:E}=e,z=(0,x.Z)(),Z=(0,a.Cf)(),A=(0,v.DU)(),{customInstructions:T,type:I,subtype:D}=null!=A?A:{},[R,P]=(0,m.useState)({name:"",description:null!==(t=E.createProjectDescriptionDefault)&&void 0!==t?t:"",type:I,subtype:D,is_private:!0}),[O,F]=(0,m.useState)({}),[U,L]=(0,m.useState)(!1),H=N.length>0,G=N.some(e=>e.type===r.Fg.GITHUB),K=N.some(e=>e.type===r.Fg.GDRIVE),B=G&&K?(0,s.jsx)(p.Z,{defaultMessage:"Github and GDrive attachments can only be added to private projects",id:"rqNebqAfPF"}):G?(0,s.jsx)(p.Z,{defaultMessage:"Github attachments can only be added to private projects",id:"eyujXWQfg4"}):K?(0,s.jsx)(p.Z,{defaultMessage:"GDrive attachments can only be added to private projects",id:"DMBgAV43lL"}):(0,s.jsx)(p.Z,{defaultMessage:"Some of these attachments can only be added to private projects",id:"2ssKO1VReL"}),{mutateAsync:q}=(0,f.Qs)(),{activeOrganization:Y}=(0,a.t)(),{data:V}=(0,f.Kn)(),{account:W}=(0,a.t)(),{data:Q,isLoading:X}=(0,f.O3)(),{data:J}=(0,h.KJ)(),$=J&&!H,ee=null==Q?void 0:Q.filter(e=>{var t;return(null===(t=e.creator)||void 0===t?void 0:t.uuid)===(null==W?void 0:W.uuid)&&!e.is_starter_project}),et=!X&&(null==ee?void 0:ee.length)===0,en=e=>t=>{P(n=>({...n,[e]:t.target.value})),F(t=>({...t,[e]:null}))},es=e=>{P(t=>({...t,is_private:e.target.checked&&"private"===e.target.value}))},ea=()=>{let e={};return""===R.name.trim()&&(e.name=z.formatMessage({defaultMessage:"Project name is required",id:"n5cqkMmIMW"})),F(e),0===Object.keys(e).length},ei=async e=>{if(e.preventDefault(),!U&&ea()){L(!0);try{let e={...R};T&&(e.prompt_template=T.replaceAll("{{PROJECT_NAME}}",R.name));let t=await q(e);M(t)}catch(e){S(e)}finally{L(!1)}}};return(0,s.jsxs)("form",{className:"grid grid-cols-1 gap-4",onSubmit:e=>ei(e),children:[et&&!A&&(0,s.jsxs)("div",{className:"bg-bg-300 border-border-400/10 text-text-300 flex w-full flex-col items-start justify-start gap-2 rounded-xl border px-5 pb-5 pt-4 text-sm",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1 font-medium",children:[(0,s.jsx)(o.j,{size:16}),(0,s.jsx)(p.Z,{defaultMessage:"How to use projects",id:"moKJkVk/qB"})]}),Z?(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)("div",{children:(0,s.jsx)(p.Z,{defaultMessage:"Use Projects with your team to do things like:",id:"fcUpqajVgl"})}),(0,s.jsxs)("ul",{className:"list-disc pl-4",children:[(0,s.jsx)("li",{children:(0,s.jsx)(p.Z,{defaultMessage:"Query and analyze information about customers, sales calls, and project plans",id:"1YyB53/KOc"})}),(0,s.jsx)("li",{children:(0,s.jsx)(p.Z,{defaultMessage:"Upload files from your codebase to understand, improve, and contribute",id:"HXj87AQH0P"})}),(0,s.jsx)("li",{children:(0,s.jsx)(p.Z,{defaultMessage:"Generate analysis and reports from one consistent set of materials",id:"3XvEQYrcUv"})}),(0,s.jsx)("li",{children:(0,s.jsx)(p.Z,{defaultMessage:"Create content informed by company policies and documentation",id:"HrODk029zr"})})]}),(0,s.jsx)("p",{children:(0,s.jsx)(p.Z,{defaultMessage:"Start by creating a memorable title and description to organize your project. You can always edit it later.",id:"qEWJMy5mr7"})})]}):(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)("p",{children:(0,s.jsx)(p.Z,{defaultMessage:"Projects help organize your work and leverage knowledge across multiple conversations. Upload docs, code, and files to create themed collections that Claude can reference again and again.",id:"7HFalNigyO"})}),(0,s.jsx)("p",{children:(0,s.jsx)(p.Z,{defaultMessage:"Start by creating a memorable title and description to organize your project. You can always edit it later.",id:"qEWJMy5mr7"})})]}),V&&(0,s.jsx)("div",{children:(0,s.jsx)(p.Z,{defaultMessage:"Curious to learn more? <link>Try an example project</link>",id:"+AcqvUzRry",values:{link:e=>(0,s.jsx)(l.z,{variant:"underline",size:"unset",href:"/project/".concat(V),children:e})}})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(i.oi,{autoFocus:!0,name:"name",className:"w-full",label:null!==(n=E.createProjectNameLabel)&&void 0!==n?n:z.formatMessage({defaultMessage:"What are you working on?",id:"R2IogQsIBI"}),placeholder:null!==(b=E.createProjectNamePlaceholder)&&void 0!==b?b:z.formatMessage({defaultMessage:"Name your project",id:"BtIbm/e/WX"}),size:"lg",onChange:en("name"),error:!!O.name,"data-1p-ignore":!0}),O.name&&(0,s.jsx)("div",{className:"text-danger-100 mt-1 text-right text-xs font-medium",children:O.name})]}),!A&&(0,s.jsx)("div",{children:(0,s.jsx)(i.Kx,{name:"description",className:"w-full",label:null!==(w=E.createProjectDescriptionLabel)&&void 0!==w?w:z.formatMessage({defaultMessage:"What are you trying to achieve?",id:"RPsTh+NBxY"}),placeholder:null!==(k=E.createProjectDescriptionPlaceholder)&&void 0!==k?k:z.formatMessage({defaultMessage:"Describe your project, goals, subject, etc...",id:"WStTnUWlP8"}),minRows:3,onChange:en("description"),error:O.description})}),Z?(0,s.jsxs)("fieldset",{children:[(0,s.jsx)("div",{className:"mb-2 text-sm font-medium",children:(0,s.jsx)(p.Z,{defaultMessage:"Visibility",id:"JAkIqbzRj5"})}),(0,s.jsxs)("label",{className:(0,u.Z)("mb-2 flex w-full gap-2",!$&&"opacity-40"),children:[(0,s.jsx)("input",{name:"visibility",className:"mt-0.5",type:"radio",value:"open",checked:!R.is_private,onChange:es,disabled:!$}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"text-sm",children:[(0,s.jsx)(c.$,{size:16,className:"-mt-1 mr-1 inline-block"}),null!==(C=null==Y?void 0:Y.name)&&void 0!==C?C:(0,s.jsx)(p.Z,{defaultMessage:"Organization",id:"K56Dims7Up"})]}),(0,s.jsx)("div",{className:"text-text-300 text-xs",children:J?H?B:j:(0,s.jsx)(p.Z,{defaultMessage:"Public projects are disabled by your organization",id:"c2HBgZtgDR"})})]})]}),(0,s.jsxs)("label",{className:"flex w-full gap-2",children:[(0,s.jsx)("input",{name:"visibility",className:"mt-0.5",type:"radio",value:"private",checked:R.is_private,onChange:es}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"text-sm",children:[(0,s.jsx)(d.$,{size:16,className:"-mt-1 mr-1 inline-block"}),(0,s.jsx)(p.Z,{defaultMessage:"Private",id:"viXE3205/2"})]}),(0,s.jsx)("div",{className:"text-text-300 text-xs",children:y})]})]})]}):null,(0,s.jsx)("div",{className:"mt-2 flex justify-end",children:(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(l.z,{onClick:_,href:_?void 0:"/projects",variant:"secondary",disabled:U,children:(0,s.jsx)(p.Z,{defaultMessage:"Cancel",id:"47FYwba+bI"})}),(0,s.jsx)(g.e,{children:(0,s.jsx)(l.z,{type:"submit",loading:U,children:(0,s.jsx)(p.Z,{defaultMessage:"Create Project",id:"9cabk2BEKt"})})})]})})]})}},20355:function(e,t,n){n.d(t,{A:function(){return u},S:function(){return d}});var s=n(27573),a=n(44512),i=n(1133),l=n(6385),r=n(7653),o=n(77879);let c=(0,r.createContext)({isExpanded:!1,setIsExpanded:()=>void 0,isMobile:!1});function d(){return(0,r.useContext)(c)}function u(e){let{children:t}=e,[n,d]=(0,a.nh)(l.cn.SIDEBAR_PINNED,!1),{width:u=0}=(0,o.iP)(),m=0!==u&&u<768;(0,o.OR)("keydown",e=>{var t;let n=(0,i.V5)()?e.metaKey:e.ctrlKey;(null===(t=e.key)||void 0===t?void 0:t.toLowerCase())==="."&&n&&(e.preventDefault(),d(e=>!e))});let p=(0,r.useMemo)(()=>({isExpanded:n,setIsExpanded:d,isMobile:m}),[n,d,m]);return(0,s.jsx)(c.Provider,{value:p,children:t})}},3915:function(e,t,n){n.d(t,{g:function(){return e_}});var s,a,i=n(27573),l=n(3053),r=n(5984),o=n(69321),c=n(70354),d=n(52939),u=n(32737),m=n(42147),p=n(47666),x=n(80022),h=n(80151),f=n(85689),g=n(7583),v=n(7653),j=n(40950),y=n(45790),b=n(42814),w=n(5161),k=n(45033),C=n(35354),N=n(73107),M=n(42755),S=n(34505),_=n(32598),E=n(30729),z=n(10607),Z=n(68425),A=n(64070),T=n(27895),I=n(30947);let D=()=>{let{addError:e}=(0,T.e)();return{handleRateLimitError:(t,n)=>{t instanceof I.Hx&&429===t.statusCode?e("Youve reached the limit for Claude messages at this time. Please wait before trying again."):e(n)}}};var R=n(5362),P=n(27218);let O=(0,A.default)(()=>n.e(8446).then(n.bind(n,38446)).then(e=>({default:e.WritingAnimation})),{loadableGenerated:{webpack:()=>[38446]},ssr:!1}),F={default:{type:"spring",stiffness:650,damping:60},opacity:{type:"tween",ease:"easeOut",duration:.35}},U=(0,v.forwardRef)((e,t)=>{let{setScreen:n,onStyleChange:s,animateBoolRef:a}=e,r=(0,j.Z)(),o=(0,l.z$)(),[d,u]=(0,v.useState)(!1),[p,x]=(0,v.useState)(""),{handleRateLimitError:h}=D(),{mutateAsync:f}=(0,b.GB)(),E=(0,v.useRef)(null),z=(0,v.useRef)(null);(0,v.useEffect)(()=>{d&&setTimeout(()=>{var e;return null===(e=z.current)||void 0===e?void 0:e.focus()},50)},[d]);let[A,I]=(0,v.useState)(!1),[U,G]=(0,v.useState)(!1),K=(0,v.useRef)(null),B=(0,v.useRef)(null),q=4e3,{handleFileUpload:Y,handleTextUpload:V}=function(e){let[t,n]=(0,v.useState)(!1),{activeOrganization:s}=(0,P.t)(),{addError:a}=(0,T.e)(),i=(0,R.OJ)();return{handleFileUpload:async l=>{if(t||!s)return;if(n(!0),!(0,w.dF)(l))try{let t=await (0,w.CL)(l);await e(t),n(!1);return}catch(e){}let r=new FormData;r.append("file",l);try{let t=await i("/api/organizations/".concat(s.uuid,"/convert_document"),{method:"POST",body:r});if(!t.ok)throw Error("Document conversion failed");let n=await t.json();if(!(null==n?void 0:n.extracted_content))throw Error("Document conversion failed: No extracted content");await e(n.extracted_content)}catch(e){a(e instanceof Error?e.message:"Error uploading file")}finally{n(!1)}},handleTextUpload:async a=>{!t&&s&&0!==a.trim().length&&(n(!0),await e(a),n(!1))},isUploading:t}}(async e=>{try{let t=await f({content_example:e});K.current=t}catch(e){h(e,r.formatMessage({defaultMessage:"Failed to create style. Please try again.",id:"GF2W10J5zb"})),I(!1)}}),W=()=>{K.current?s(K.current,!0):(q=1e3,B.current=setTimeout(W,q))},Q=async()=>{$(),await V(p)},X=async e=>{let t=Array.from(e.dataTransfer.files);t&&(G(!0),setTimeout($,20),await Y(t[0]))},J=async e=>{let t=e.target.files;t&&($(),await Y(Array.from(t)[0])),e.target.value=""},$=()=>{I(!0),B.current=setTimeout(W,q)};return(0,i.jsx)(Z.E.div,{ref:t,className:"w-full h-full grid place-items-center",exit:{opacity:0,scale:.8},transition:a.current?F:{duration:0},children:(0,i.jsxs)(g.M,{mode:"popLayout",children:[A&&(0,i.jsx)(Z.E.div,{className:"w-full h-full grid place-items-center",initial:{opacity:0},animate:{opacity:1},transition:F,children:(0,i.jsx)(H,{})},"CreateStyleAnalyzingContentScreen"),!A&&(0,i.jsxs)(Z.E.div,{className:"w-full h-full pt-1 flex flex-col sm:grid sm:grid-cols-2 sm:gap-4",children:[(0,i.jsxs)(Z.E.div,{exit:{opacity:0,y:40,transition:F},className:"sm:h-full text-center flex flex-col gap-2 items-center justify-center px-2 pt-8 pb-8 sm:pt-14 sm:pb-20",children:[(0,i.jsx)("div",{className:"relative pb-2 w-full flex items-center justify-center",children:(0,i.jsx)(O,{})}),(0,i.jsx)("p",{className:"text-text-300 font-tiempos sm:text-lg",children:(0,i.jsx)(y.Z,{defaultMessage:"Share a writing example or describe your style and Claude will make a custom writing style tailored just for you.",id:"2qm6Zfzfx3"})})]},"CreatStyleStartScreenExplainer"),(0,i.jsx)(Z.E.div,{className:"h-full flex-1",exit:{opacity:0,x:0,scale:.8,transition:{basicTransition:F}},children:d?(0,i.jsxs)("div",{className:"h-full flex flex-col gap-2 p-2 rounded-xl border-0.5 border-border-300",children:[(0,i.jsx)("textarea",{ref:z,className:" flex-1 min-h-0 bg-bg-000 border border-border-200 p-3 leading-5 rounded-lg transition-colors hover:border-border-100 placeholder:text-text-500 focus:border-accent-secondary-100 focus:ring-0 focus:outline-none disabled:cursor-not-allowed disabled:opacity-50 whitespace-pre-wrap resize-none",name:"inputText",placeholder:r.formatMessage({defaultMessage:"Paste at least a few paragraphs of example writing, including from multiple various sources if youd like, for Claude to analyze and the match style of...",id:"mC+9IzmmMY"}),value:p,onChange:e=>x(e.target.value),required:!0}),(0,i.jsxs)("div",{className:"flex gap-2 justify-center",children:[(0,i.jsx)(c.z,{variant:"secondary",onClick:()=>u(!1),children:(0,i.jsx)(y.Z,{defaultMessage:"Cancel",id:"47FYwba+bI"})}),(0,i.jsx)(c.z,{onClick:Q,children:(0,i.jsx)(y.Z,{defaultMessage:"Create Style",id:"Zvrodgqci1"})})]})]}):(0,i.jsxs)(C.rE,{className:"w-full h-full text-center border-dashed border border-border-300 bg-bg-000 rounded-xl relative grid place-items-center",onDrop:X,children:[(0,i.jsx)(L,{showDropCover:U},"DropZoneOverlay"),(0,i.jsx)("input",{ref:E,type:"file",className:"hidden",accept:(0,w.tB)({imagesEnabled:!1}).join(","),onChange:J,multiple:!0}),(0,i.jsxs)("div",{children:[(0,i.jsxs)(k.Lt,{trigger:(0,i.jsx)(c.z,{variant:"flat",className:"mt-2 font-medium !text-accent-secondary-100 bg-accent-secondary-900 hover:!bg-accent-secondary-100/15 gap-2",prepend:(0,i.jsx)(N.$,{weight:"bold"}),children:(0,i.jsx)(y.Z,{defaultMessage:"Add Writing Example",id:"T/URy3xJoz"})}),children:[(0,i.jsx)(k.hP,{children:(0,i.jsxs)("div",{className:"flex items-center gap-2",onClick:()=>{E.current&&E.current.click()},children:[(0,i.jsx)(M.p,{size:16}),(0,i.jsx)(y.Z,{defaultMessage:"Upload from device",id:"vMaZk5Jcnv"})]})}),(0,i.jsx)(k.hP,{onClick:()=>u(!0),children:(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(S.P,{size:16}),(0,i.jsx)(y.Z,{defaultMessage:"Paste text content",id:"nVQ9XcjUIh"})]})})]}),(0,i.jsxs)("div",{className:"text-xs text-text-400 mt-3 flex flex-col gap-1 max-sm:pb-8",children:[(0,i.jsx)("p",{children:window.innerWidth<=640?(0,i.jsx)(y.Z,{defaultMessage:"Select or paste existing doc, post, message, etc.",id:"7oFd31Vmu3"}):(0,i.jsx)(y.Z,{defaultMessage:"Select, drop, or paste existing doc, post, message, etc.",id:"ugXnNZ7Ix/"})}),(0,i.jsx)("p",{children:(0,i.jsx)(y.Z,{defaultMessage:"Content is not stored after matching style.",id:"bLEGIyr72h"})})]})]}),(0,i.jsx)("div",{className:"absolute w-full bottom-6",children:(0,i.jsx)(c.z,{variant:"underline",size:"inline",className:"text-sm gap-1.5",prepend:(0,i.jsx)(_.x,{}),onClick:()=>{o.track({event_key:"styles.custom.describe_clicked"}),n(m.b.CREATE_MANUALLY)},children:(0,i.jsx)(y.Z,{defaultMessage:"Describe style instead",id:"p6hP+KeXkD"})})})]})},"CreatStyleStartScreenDropZone")]},"CreatStyleStartScreen")]})})});U.displayName="CreateStyle";let L=e=>{let{showDropCover:t}=e,{dragState:n}=(0,C.EO)(),s=n===C.h7.DRAGGING_OFF_TARGET||n===C.h7.DRAGGING_ON_TARGET||t;return(0,i.jsx)(g.M,{children:s&&(0,i.jsx)(Z.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:(0,z.Z)("absolute -inset-px z-10 flex flex-col justify-center rounded-xl border border-dashed transition-colors",n===C.h7.DRAGGING_ON_TARGET||t?"bg-accent-secondary-900 border-accent-secondary-200 text-accent-secondary-000":"bg-bg-100 border-border-200 text-text-300"),children:(0,i.jsxs)("div",{className:"py-1.5 text-center",children:[(0,i.jsx)("div",{className:"relative inline-block opacity-60",children:(0,i.jsx)(E.y,{size:36,weight:"thin"})}),(0,i.jsx)("div",{className:"font-tiempos pt-2 pb-4 italic tracking-tight",children:(0,i.jsx)(y.Z,{defaultMessage:"Drop example writing here to match the style",id:"VcDT1Dt8dq"})})]})},"drop-zone-overlay")})},H=()=>(0,i.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,i.jsx)(O,{animate:!0}),(0,i.jsx)(Z.E.div,{className:"font-tiempos italic text-lg",initial:{opacity:0,y:-15},animate:{opacity:1,y:0},transition:{opacity:{delay:.2,ease:"easeOut",duraation:.6},y:{delay:.2,type:"spring",stiffness:230,damping:20}},children:(0,i.jsx)(y.Z,{defaultMessage:"Analyzing your writing...",id:"AnDnGKCn6M"})})]});var G=n(30028),K=n(17764),B=n(96346),q=n(99851),Y=n(24038);let V={objective:{label:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(G.V,{})," ",(0,i.jsx)(y.Z,{defaultMessage:"Define style objective",id:"gJB/90MGQ7"})]}),description:"Describe the main purpose and goal of this writing style  whether to teach, analyze, persuade, inspire, etc.",placeholder:"Try something like:\nI want to teach complex topics step-by-step, with a focus on building understanding.",promptPrepend:"Id like the writing to serve this purpose:"},audience:{label:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Y.E,{})," ",(0,i.jsx)(y.Z,{defaultMessage:"Tailor to an audience",id:"TYdBxyl/f3"})]}),description:"Describe details of the target audience youd like Claude to write for including relevant information, needs, or preferences.",placeholder:"Try something like:\nWrite for marketing professionals. Theyre tech-savvy and appreciate a dash of humor with their data.",promptPrepend:"Id like to tailor this style to a specific audience:"},voicetone:{label:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(K.i,{})," ",(0,i.jsx)(y.Z,{defaultMessage:"Use specific voice & tone",id:"1Vo908p7lJ"})]}),description:"Think about characteristics like formality, emotion, personality, and how you want the written responses to feel.",placeholder:"Try something like:\nWrite in a warm, approachable tone with light professional humor - like a friendly mentor.",promptPrepend:"Id like to write in this voice and tone:"},general:{label:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(_.x,{})," ",(0,i.jsx)(y.Z,{defaultMessage:"Describe generally",id:"f3JnPS+B3+"})]}),description:"Describe in detail how you would like Claude to write. Be as specific as you can.",placeholder:"Try something like:\nWrite like an excited scientist explaining fascinating discoveries - technical but energetic.",promptPrepend:"Id like to write like this:"},custom:{label:(0,i.jsx)(y.Z,{defaultMessage:"Use custom instructions (advanced)",id:"hSfu0Sz47T"}),description:"Write exact custom instructions for this style instead of generating a style prompt automatically. Claude will ignore instructions that dont follow our guidelines.",placeholder:"Write style custom instructions here...",promptPrepend:""}},W=(0,v.forwardRef)((e,t)=>{let{setScreen:n,onStyleChange:s}=e,a=(0,j.Z)(),r=(0,l.z$)(),[o,d]=(0,v.useState)(!1),[p,x]=(0,v.useState)(""),[h,f]=(0,v.useState)(Object.keys(V)[0]),{handleRateLimitError:w}=D(),{mutateAsync:C}=(0,b.GB)(),N=(0,v.useRef)(null);(0,v.useEffect)(()=>{setTimeout(()=>{var e;return null===(e=N.current)||void 0===e?void 0:e.focus()},50)},[h]);let M=p.replace(/\s/g,"").length>24,S=async()=>{if(!o&&M){d(!0);try{let e="custom"===h?{prompt:p}:{input_text:V[h].promptPrepend+"\n"+p},t=await C(e);s(t,!1)}catch(e){w(e,a.formatMessage({defaultMessage:"Failed to create style. Please try again.",id:"GF2W10J5zb"}))}finally{d(!1)}}},_=e=>{r.track({event_key:"styles.custom.describe_selected",key:e}),f(e)};return(0,i.jsxs)(Z.E.div,{ref:t,className:"w-full h-full flex flex-col sm:grid sm:grid-cols-2 gap-4 pt-3",children:[(0,i.jsxs)("div",{className:"flex flex-col sm:h-full sm:pr-3",children:[(0,i.jsxs)("div",{className:"flex-1 text-text-300",children:[(0,i.jsx)("p",{className:"mb-1 sm:mb-2 text-sm font-medium",children:(0,i.jsx)(y.Z,{defaultMessage:"Generate style from a starting point:",id:"cz09/5alWg"})}),(0,i.jsx)("ul",{className:"hidden sm:flex flex-col gap-1.5",children:Object.keys(V).map(e=>(0,i.jsx)("li",{children:(0,i.jsxs)("button",{className:(0,z.Z)("flex gap-1.5 items-center font-styrene h-11 rounded-lg border border-border-400 hover:border-border-300 px-3 w-full text-left transition active:scale-[1.015] hover:bg-bg-200",h===e&&"!bg-accent-secondary-900 text-accent-secondary-000 !border-accent-secondary-100/80","custom"===e&&"mt-2 text-sm"),onClick:()=>_(e),children:[(0,i.jsx)("div",{className:"w-4 h-4 rounded-full bg-bg-100 grid place-items-center border border-border-300 mr-1",children:h===e&&(0,i.jsx)("div",{className:"w-2.5 h-2.5 rounded-full bg-accent-secondary-100"})}),V[e].label]})},e))}),(0,i.jsx)("div",{className:"sm:hidden",children:(0,i.jsx)(k.Lt,{trigger:(0,i.jsx)(c.z,{variant:"ghost",append:(0,i.jsx)(B.p,{}),className:"w-full !border !border-border-300",children:(0,i.jsx)("div",{className:"flex-1 text-left flex items-center gap-1",children:V[h].label})}),children:Object.keys(V).map(e=>(0,i.jsx)(k.hP,{onSelect:()=>_(e),children:(0,i.jsx)("div",{className:"flex items-center gap-1",children:V[e].label})},e))})})]}),(0,i.jsx)("div",{className:"mb-4 max-sm:hidden",children:(0,i.jsx)(c.z,{variant:"underline",size:"inline",className:"text-sm gap-1",onClick:()=>n(m.b.CREATE),prepend:(0,i.jsx)(q.D,{}),children:(0,i.jsx)(y.Z,{defaultMessage:"Never mind, Ill add an example",id:"PpPoeCEz4X"})})})]}),(0,i.jsxs)("form",{className:"flex flex-col h-full rounded-xl border-0.5 border-border-300 bg-bg-200 px-3 py-2 gap-2",onSubmit:e=>{e.preventDefault(),S()},children:[(0,i.jsx)("p",{className:"pt-0 p-1 text-text-300 font-tiempos max-sm:text-sm",children:V[h].description}),(0,i.jsxs)("div",{className:"relative flex-1 w-full",children:[(0,i.jsx)("textarea",{ref:N,className:" min-h-0 w-full h-full bg-bg-000 border border-border-200 p-3 leading-snug rounded-lg transition-colors hover:border-border-100 placeholder:text-text-500 focus:border-accent-secondary-100 focus:ring-0 focus:outline-none disabled:cursor-not-allowed disabled:opacity-50 whitespace-pre-wrap resize-none",name:"inputText",placeholder:V[h].placeholder,value:p,required:!0,onChange:e=>x(e.target.value)}),(0,i.jsx)(g.M,{children:p.length>0&&!M&&(0,i.jsx)(Z.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{ease:"easeIn",duration:.1},className:"absolute bottom-1 right-1 left-1 py-2 px-2 rounded-md text-sm bg-accent-secondary-900 text-text-200 text-center",children:(0,i.jsx)(y.Z,{defaultMessage:"Be as descriptive as possible to help Claude generate the best possible style for you",id:"3ObAHHjHgF"})})})]}),(0,i.jsx)(u.u,{tooltipContent:M?"":a.formatMessage({defaultMessage:"More description needed in order to generate style",id:"vX4dBOsKs3"}),side:"bottom",className:"text-center",children:(0,i.jsx)("div",{className:"flex items-center w-full justify-center pb-1",children:(0,i.jsx)(c.z,{className:"w-full",type:"submit",loading:o,disabled:!M,children:"custom"===h?(0,i.jsx)(y.Z,{defaultMessage:"Create Style",id:"Zvrodgqci1"}):(0,i.jsx)(y.Z,{defaultMessage:"Generate Style",id:"9M07kHsajF"})})})})]})]})});W.displayName="CreateStyleManually";var Q=n(60879),X=n(72538),J=n(49167),$=n(14448),ee=n(42253),et=n(11510),en=n(59308),es=n(87896),ea=n(34141),ei=n(26608),el=n(52681),er=n(38459),eo=n(15992),ec=n(40051),ed=n(64243),eu=n(70027);(s=a||(a={})).VIEW="view",s.EDIT="edit",s.EDIT_MANUALLY="edit_manually";let em=()=>{let{config:e}=(0,eo.useConfig)("claude_style_previews");return e.get("previewExamples",[])},ep=e=>{let{isSaveButton:t,children:n}=e;return(0,i.jsx)("div",{className:(0,z.Z)("flex gap-1.5",t?"sm:absolute sm:top-5 sm:right-16 max-sm:mt-3 max-sm:-mb-2":"absolute top-5 right-16"),children:n})},ex=(0,v.forwardRef)((e,t)=>{let{animateBoolRef:n,style:s,setCurrentStyle:a,returnToListScreen:l,setChatStyle:r,setIsEditing:o,setIsEditingName:d}=e,u=(0,j.Z)(),m=(0,ed.X)(s),p="default"===s.type,[x,h]=(0,v.useState)("view"),{mutateAsync:f}=(0,b.fq)(m,p),{handleRateLimitError:g}=D(),w=async e=>{let{prompt:t,editInput:n}=e;try{let e=await f({prompt:t,edit_instructions:n});e&&a(e)}catch(e){throw g(e,u.formatMessage({defaultMessage:"Failed to edit style. Please try again.",id:"1WkY08RVLW"})),Error}},k=e=>{o("edit"===e||"edit_manually"===e),h(e)};return(0,i.jsxs)(Z.E.div,{className:"flex-1 min-h-0 grid sm:grid-cols-2 gap-3 pt-3",ref:t,children:["view"===x&&(0,i.jsxs)(ep,{children:[(0,i.jsx)(c.z,{variant:"secondary",className:"text-sm max-sm:hidden",onClick:()=>r(s),children:(0,i.jsx)(y.Z,{defaultMessage:"Use Style",id:"Pm98cQu6rS"})}),(0,i.jsx)(ej,{style:s,returnToListScreen:l,onRename:()=>d(!0),setStateToManualEdit:()=>k("edit_manually")})]}),(0,i.jsxs)(Z.E.div,{className:"min-h-0",initial:!!n.current&&{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{scale:{type:"spring",stiffness:230,damping:15,delay:.1},opacity:{duration:.3,delay:.1}},children:["view"===x&&(0,i.jsx)(eg,{style:s,onClick:()=>k("edit")}),"edit"===x&&(0,i.jsx)(eh,{style:s,updateStyle:w,onClose:()=>k("view")}),"edit_manually"===x&&(0,i.jsx)(ef,{style:s,updateStyle:w,onClose:()=>k("view")})]}),(0,i.jsx)(ev,{style:s,animateBoolRef:n})]})});ex.displayName="EditStyle";let eh=e=>{let{style:t,updateStyle:n,onClose:s}=e,a=(0,j.Z)(),l=(0,v.useRef)(t.prompt),o=(0,v.useRef)(null),[d,u]=(0,v.useState)(!1),[m,p]=(0,v.useState)(!1),[x,h]=(0,v.useState)([]),[f,b]=(0,v.useState)(""),w=async e=>{if(e.preventDefault(),d||m)return!1;await k(f)},k=async e=>{b(""),u(!0),h([...x,e]);try{await n({editInput:e})}catch(e){b(f),h(e=>e.slice(0,-1))}u(!1)},C=async()=>{x.length&&(p(!0),await n({prompt:l.current}),p(!1)),s()},N=(0,v.useMemo)(()=>{if(!t.attributes)return[];let e=Math.floor(Math.random()*t.attributes.length),n=e+1<t.attributes.length?e+1:e-1;return[a.formatMessage({defaultMessage:"A bit more {attribute}",id:"au1WTQvqDg"},{attribute:t.attributes[e].name.toLowerCase()}),a.formatMessage({defaultMessage:"Much less {attribute}",id:"dIbq/Ow8Zn"},{attribute:t.attributes[n].name.toLowerCase()})]},[t.attributes,a]);return(0,v.useEffect)(()=>{if(x.length>0){var e;null===(e=o.current)||void 0===e||e.scrollTo({top:o.current.scrollHeight,behavior:"smooth"})}},[x,t.summary]),(0,i.jsxs)("div",{className:"h-full flex flex-col",children:[(0,i.jsxs)("div",{className:"flex-1 min-h-0 flex flex-col gap-2 p-2.5 rounded-xl border border-accent-secondary-100/50 bg-bg-100 ",children:[(0,i.jsxs)("div",{className:(0,z.Z)("border-0.5 rounded-lg p-3 pt-2.5 mb-2 relative transition bg-gradient-to-b",d?"border-border-300 from-accent-secondary-900/50 to-accent-secondary-900/10":"border-accent-secondary-100/50 from-accent-secondary-900/75 to-accent-secondary-900/25"),children:[(0,i.jsx)("div",{className:(0,z.Z)("font-tiempos font-normal text-pretty leading-snug tracking-tight text-text-200 transition",d?"opacity-0 scale-[0.975]":"delay-150 duration-150 ease-out"),children:t.summary}),(0,i.jsx)(g.M,{children:d&&(0,i.jsx)(Z.E.div,{className:"absolute inset-0 grid place-items-center",initial:{scale:.75,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.75,opacity:0},children:(0,i.jsx)(X.p,{state:"thinking"})})})]}),(0,i.jsx)("ul",{ref:o,className:"flex-1 min-h-0 overflow-y-auto flex flex-col gap-2",children:x.map(e=>(0,i.jsx)("li",{children:(0,i.jsx)("div",{className:"inline-block py-2 px-3 rounded-lg bg-bg-300 text-sm",children:e})},e))}),x.length>0?(0,i.jsx)("div",{className:"text-sm text-center text-text-500",children:(0,i.jsx)(y.Z,{defaultMessage:"Ask for more edits, save, or discard changes",id:"zOxoAYYCog"})}):(0,i.jsxs)("div",{className:"mb-2",children:[(0,i.jsx)("div",{className:"text-sm text-text-500 mb-2",children:(0,i.jsx)(y.Z,{defaultMessage:"Describe how youd like to edit the style, like:",id:"PRDvfjUkNA"})}),(0,i.jsx)("ul",{className:"flex flex-col gap-2",children:N.map((e,t)=>(0,i.jsx)("li",{children:(0,i.jsx)("button",{onClick:t=>{t.preventDefault(),k(e)},className:"text-sm font-medium h-8 px-3 rounded-full border-0.5 border-border-200 text-text-200 bg-gradient-to-b hover:text-text-000 hover:from-bg-400/0 hover:to-bg-400/50 hover:border-border-100 active:scale-x-[0.985] active:scale-y-[0.995] transition",children:e})},t))})]}),(0,i.jsx)("form",{className:"mb-1.5 mx-0.5",onSubmit:e=>w(e),children:(0,i.jsx)(r.oi,{autoFocus:!0,className:"w-full",name:"inputText",placeholder:a.formatMessage({defaultMessage:"Ask Claude to edit the style...",id:"5D1Fao75P8"}),size:"lg",value:f,onChange:e=>b(e.target.value),append:(0,i.jsx)(g.M,{children:f.length>0&&(0,i.jsx)(Z.E.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.85,opacity:0,transition:{ease:"easeIn",duration:.1}},children:(0,i.jsx)(c.z,{type:"submit",size:"icon_sm",variant:"flat",disabled:d||m,children:(0,i.jsx)(ee.a,{})})})})})})]}),(0,i.jsxs)(ep,{isSaveButton:!0,children:[(0,i.jsx)(c.z,{onClick:s,disabled:d||m||f.length>0||0===x.length,children:(0,i.jsx)(y.Z,{defaultMessage:"Save Changes",id:"3VI9mt1zm0"})}),(0,i.jsx)(c.z,{onClick:C,disabled:d,loading:m,variant:"secondary",children:x.length>0?(0,i.jsx)(y.Z,{defaultMessage:"Discard",id:"nmpevlUATU"}):(0,i.jsx)(y.Z,{defaultMessage:"Cancel",id:"47FYwba+bI"})})]})]})},ef=e=>{let{style:t,updateStyle:n,onClose:s}=e,[a,l]=(0,v.useState)(!1),[r,o]=(0,v.useState)(t.prompt),d=(0,j.Z)(),u=async e=>{e.preventDefault(),l(!0),await n({prompt:r}),l(!1),s()};return(0,i.jsxs)("form",{className:"flex flex-col gap-2 h-full min-h-0 p-3 pt-2 rounded-xl border-0.5 border-border-200",onSubmit:e=>u(e),children:[(0,i.jsx)("div",{className:"text-center text-sm text-text-200 font-medium",children:(0,i.jsx)(y.Z,{defaultMessage:"Edit style instructions manually",id:"+qSf1b/LLJ"})}),(0,i.jsx)("textarea",{className:" flex-1 min-h-0 bg-bg-000 border border-border-200 p-3 leading-5 rounded-lg transition-colors hover:border-border-100 placeholder:text-text-500 focus:border-accent-secondary-100 focus:ring-0 focus:outline-none disabled:cursor-not-allowed disabled:opacity-50 whitespace-pre-wrap resize-none",name:"inputText",placeholder:d.formatMessage({defaultMessage:"Describe your style instructions",id:"nk7EX3l+b4"}),value:r,disabled:a,onChange:e=>o(e.target.value),autoFocus:!0}),(0,i.jsxs)(ep,{isSaveButton:!0,children:[(0,i.jsx)(c.z,{type:"submit",loading:a,children:(0,i.jsx)(y.Z,{defaultMessage:"Save Changes",id:"3VI9mt1zm0"})}),(0,i.jsx)(c.z,{onClick:()=>{o(t.prompt),s()},disabled:a,variant:"secondary",children:(0,i.jsx)(y.Z,{defaultMessage:"Cancel",id:"47FYwba+bI"})})]})]})},eg=e=>{let{style:t,onClick:n}=e,s="default"===t.type;return(0,i.jsxs)("div",{className:(0,z.Z)("flex flex-col items-center h-full px-6 gap-4 rounded-lg sm:rounded-xl max-sm:mx-1.5",!s&&"bg-gradient-to-b from-accent-secondary-900/75 to-accent-secondary-900/25 border border-accent-secondary-100/50",s&&"bg-bg-300 border border-border-300"),children:[(0,i.jsx)("div",{className:"flex-1",children:(0,i.jsx)("div",{className:(0,z.Z)("w-fit px-4 py-2 pb-2.5 gap-2.5 rounded-b-lg font-medium text-xs tracking-tight",s?"bg-bg-400 text-text-300":"bg-accent-secondary-200/10 text-accent-secondary-100"),children:s?(0,i.jsx)(y.Z,{defaultMessage:"Preset style",id:"qwpRSZtBAV"}):(0,i.jsx)(y.Z,{defaultMessage:"Your custom style",id:"o/vLK7B7mw"})})}),(0,i.jsxs)("div",{className:"flex flex-col items-center gap-1.5 pb-4",children:[!s&&(0,i.jsx)(u.u,{className:"text-center",tooltipContent:(0,i.jsx)(y.Z,{defaultMessage:"Full style instructions are generated and include more than shown in summary. You can edit instructions manually from the options menu",id:"R5PMcY1ELo"}),children:(0,i.jsxs)("div",{className:"flex items-center gap-1 cursor-help opacity-50 hover:opacity-60",children:[(0,i.jsx)("span",{className:"text-sm font-medium",children:(0,i.jsx)(y.Z,{defaultMessage:"Style summary",id:"hVmQ4DO8io"})}),(0,i.jsx)(et.k,{size:12,className:"translate-y-px",weight:"bold"})]})}),(0,i.jsx)("div",{"data-testid":"style-summary",className:"font-tiempos text-xl font-normal text-pretty leading-snug tracking-tight text-center flex-1 flex items-center",children:"default"===t.type&&t.summaryKey?(0,i.jsx)(o.d7,{id:t.summaryKey}):t.summary})]}),(0,i.jsx)("div",{className:"flex-1 flex items-center text-sm",children:s?(0,i.jsx)(y.Z,{defaultMessage:"Preset styles are not editable",id:"qjKy0s/reb"}):(0,i.jsx)(c.z,{variant:"outline",onClick:n,className:"!border-accent-secondary-200 !text-accent-secondary-000 hover:!bg-accent-secondary-100/10",prepend:(0,i.jsx)(el.A,{weight:"bold"}),children:(0,i.jsx)(y.Z,{defaultMessage:"Edit with Claude",id:"wdKoWlVN+G"})})})]})},ev=e=>{let{style:t,animateBoolRef:n}=e,s=(0,j.Z)(),[a,l]=(0,v.useState)(""),[r,d]=(0,v.useState)(),u=(0,v.useRef)(t.prompt),m=(0,v.useRef)(r),p=em(),{handleRateLimitError:x}=D(),{isPending:h,mutateAsync:f}=(0,b.HK)(),w=(0,v.useCallback)(async()=>{if(r)try{let e=await f({style_prompt:t.prompt,example_key:r.key,example_text:r.textKey?(0,o.Gc)({id:r.textKey,intl:s}):r.text});l(e)}catch(e){x(e,s.formatMessage({defaultMessage:"Failed to preview style. Please try again.",id:"B2A4x/wbTg"}))}},[x,f,r,t.prompt,s]);(0,v.useEffect)(()=>{var e;(u.current!==t.prompt||(null===(e=m.current)||void 0===e?void 0:e.key)!==(null==r?void 0:r.key))&&(u.current=t.prompt,m.current=r,w())},[w,r,t.prompt]);let{value:C}=(0,$.F)("use_in_house_latex_transformer");return(0,i.jsx)(Z.E.div,{className:(0,z.Z)("max-sm:hidden flex flex-col gap-2 h-full min-h-0 p-2 rounded-xl border-0.5 border-border-300 transition-colors",r?"bg-bg-000/70":"bg-bg-000/20"),initial:!!n.current&&{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{scale:{type:"spring",stiffness:230,damping:15,delay:.2},opacity:{duration:.3,delay:.2}},children:r?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"flex items-center text-sm px-2 font-medium text-text-200",children:[(0,i.jsx)(y.Z,{defaultMessage:"Previewing with",id:"tNFdPqESDT"}),(0,i.jsx)(k.Lt,{align:"center",trigger:(0,i.jsx)(c.z,{variant:"ghost",size:"unset",className:"!px-1 !py-0.5 gap-0.5 !text-accent-secondary-100 hover:!bg-accent-secondary-900",append:(0,i.jsx)(er.p,{className:"translate-y-px"}),children:r?r.nameKey?(0,i.jsx)(o.d7,{id:r.nameKey}):r.name:(0,i.jsx)(y.Z,{defaultMessage:"Example",id:"xrCRnH/mKK"})}),children:p.map(e=>(0,i.jsx)(k.hP,{disabled:h,onClick:()=>d(e),children:e.nameKey?(0,i.jsx)(o.d7,{id:e.nameKey}):e.name},e.key))})]}),(0,i.jsxs)(J.$,{className:"p-2 pt-0 min-h-0 overflow-y-scroll",children:[(0,i.jsx)("div",{className:"bg-bg-300 -mx-0.5 mb-2 py-1.5 px-2 text-sm rounded-lg text-pretty",children:r.textKey?(0,i.jsx)(o.d7,{id:r.textKey}):r.text}),(0,i.jsx)(g.M,{children:h?(0,i.jsx)("div",{className:"pt-2",children:(0,i.jsx)(X.p,{state:"writing"})}):(0,i.jsx)(Z.E.div,{initial:{opacity:0},animate:{opacity:1},transition:{ease:"easeIn",duration:.25},children:(0,i.jsx)(Q.ux,{className:"font-tiempos flex-1 flex flex-col gap-2",text:a,useInHouseLatexPlugin:C})})})]})]}):(0,i.jsx)("div",{className:"flex-1 grid place-items-center text-center",children:(0,i.jsxs)("div",{className:"w-full",children:[(0,i.jsx)("div",{className:"text-sm text-text-500 font-medium mb-4",children:(0,i.jsx)(y.Z,{defaultMessage:"Preview with an example...",id:"YdUmd5z6YL"})}),(0,i.jsx)("div",{className:"flex flex-wrap justify-center gap-2 w-full",children:p.map(e=>(0,i.jsx)("button",{onClick:()=>d(e),className:"\n                    rounded-full\n                    border-0.5\n                    border-border-300\n                    text-sm\n                    text-text-400\n                    font-medium\n                    h-8\n                    px-3\n                    flex\n                    items-center\n                    bg-gradient-to-b\n                    from-always-black/0\n                    to-always-black/5\n                    hover:bg-accent-secondary-900\n                    hover:text-accent-secondary-000\n                    hover:border-accent-secondary-100/50\n                    transition-colors",children:e.nameKey?(0,i.jsx)(o.d7,{id:e.nameKey}):e.name},e.key))})]})})})},ej=e=>{let{style:t,returnToListScreen:n,onRename:s,setStateToManualEdit:a}=e,l=(0,ed.X)(t),r="default"===t.type,{isPending:o,mutateAsync:d}=(0,b.KM)(l),{addHiddenPresetStyle:u}=(0,eu.C)(),{clearStoredStyle:m,storedStyle:p}=(0,ec.O)(),{addError:x}=(0,T.e)(),h=(0,j.Z)(),f=async()=>{if(r)u(t),setTimeout(()=>{n()},500);else try{await d(),p&&"uuid"in p&&p.uuid===t.uuid&&m(),n()}catch(e){x(h.formatMessage({defaultMessage:"Failed to delete style. Please try again.",id:"4eIHICfKCI"}))}};return(0,i.jsxs)(k.Lt,{align:"end",unstyledTrigger:!0,trigger:(0,i.jsxs)(c.z,{variant:"ghost",className:"max-sm:min-w-8 max-sm:px-2 sm:pl-3 sm:pr-2",children:[(0,i.jsxs)("span",{className:"hidden sm:flex items-center gap-1",children:[(0,i.jsx)(y.Z,{defaultMessage:"Options",id:"NDV5MqT9ww"}),"\xa0",(0,i.jsx)(er.p,{})]}),(0,i.jsx)("span",{className:"sm:hidden",children:(0,i.jsx)(en.F,{weight:"bold",size:20})})]}),children:[!r&&(0,i.jsx)(k.hP,{disabled:o,onClick:()=>{s()},children:(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)(es.z,{className:"mr-2"}),(0,i.jsx)(y.Z,{defaultMessage:"Rename Style",id:"GD/UyiqjoD"})]})}),"Concise"===l?(0,i.jsx)(k.AZ,{className:"text-sm",children:(0,i.jsx)(y.Z,{defaultMessage:"Concise style cant be hidden",id:"zTztS+Om9I"})}):(0,i.jsx)(k.hP,{className:"pr-0 !text-danger-000",disabled:o,onClick:f,children:r?(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(ea.M,{}),(0,i.jsx)(y.Z,{defaultMessage:"Hide preset style",id:"z44N28JZYv"})]}):(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(ei.r,{}),(0,i.jsx)(y.Z,{defaultMessage:"Delete style",id:"fAqSoPl78t"})]})}),!r&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(k.u2,{}),(0,i.jsx)(k.hP,{onClick:a,children:(0,i.jsx)(y.Z,{defaultMessage:"Edit style manually",id:"H+z4uo2Wfn"})})]})]})};var ey=n(18691),eb=n(39973),ew=n(92655),ek=n(13344),eC=n(16804),eN=n(69838);let eM=(0,v.forwardRef)((e,t)=>{let{setScreen:n,styles:s,onStyleChange:a}=e,{hiddenPresetStyles:l,resetHiddenPresetStyles:r}=(0,eu.C)(),{sortStyles:o,setOrder:d}=(0,eN.L)(),[u,p]=(0,v.useState)([]),x=(0,v.useCallback)(e=>{let t=[...l,"Default"];return o(e.filter(e=>!t.includes((0,ed.X)(e))))},[l,o]);(0,v.useEffect)(()=>{p(x(s))},[s,x]);let h=(0,v.useCallback)(e=>{Array.isArray(e)&&(p(e),d(e))},[d]),f=(0,v.useMemo)(()=>s.some(e=>"custom"===e.type),[s]);return(0,i.jsxs)(Z.E.div,{exit:{opacity:0,transition:{duration:0}},ref:t,className:"flex-1 min-h-0 flex flex-col -mx-3",children:[(0,i.jsxs)("div",{className:"flex-1 min-h-0",children:[(0,i.jsx)(ek.t.Group,{as:"ul",axis:"y",values:u,onReorder:h,layoutScroll:!0,className:"pl-3 pr-3 pb-2 overflow-y-auto max-h-full [mask-image:linear-gradient(to_top,hsl(var(--always-black)/0%)_0%,_hsl(var(--always-black)/100%)_3%)]",children:u.map(e=>(0,i.jsx)(eS,{style:e,onClick:()=>a(e,!1)},(0,ed.X)(e)))}),!f&&(0,i.jsxs)(Z.E.div,{initial:{opacity:0,scale:.985},animate:{opacity:1,scale:1,transition:{delay:.3,ease:"easeOut",duration:.3}},exit:{opacity:0},className:"flex bg-gradient-to-b from-accent-pro-900/20 to-accent-pro-900/50 py-3 pl-3.5 pr-5 mx-3 rounded-lg border-0.5 border-border-300 text-text-300 text-sm",children:[(0,i.jsx)("div",{className:"font-copernicus font-medium mr-4 text-accent-pro-000 mt-px whitespace-nowrap",children:(0,i.jsx)(y.Z,{defaultMessage:"Tip",id:"4j1TGZubAJ"})}),(0,i.jsx)("p",{children:(0,i.jsx)(y.Z,{defaultMessage:"Choose from preset styles or create your own custom style to tailor elements of Claudes written responses such as tone, voice, vocabulary, detail level, and more. <link>Learn about styles</link>",id:"pwT6iI4QV7",values:{link:e=>(0,i.jsx)("a",{href:"https://support.anthropic.com/en/articles/10181068-configuring-and-using-styles",className:"underline hover:text-text-000",target:"_blank",children:e})}})})]})]}),(0,i.jsxs)("div",{className:"flex justify-between items-center mt-4 mx-3",children:[(0,i.jsx)(c.z,{onClick:()=>n(m.b.CREATE),prepend:(0,i.jsx)(ey.H,{}),children:(0,i.jsx)(y.Z,{defaultMessage:"Create Custom Style",id:"CuiOFkdtyF"})}),l.length>0&&(0,i.jsx)(c.z,{variant:"underline",onClick:r,children:(0,i.jsx)(y.Z,{defaultMessage:"Reset preset styles",id:"EITqrHaUNi"})})]})]})});eM.displayName="ListStyles";let eS=e=>{let{style:t,onClick:n}=e,s="default"===t.type,a=(0,eC.o)(),[l,r]=(0,v.useState)(!1);return(0,i.jsxs)(ek.t.Item,{value:t,dragListener:!1,dragControls:a,dragTransition:{bounceStiffness:500,bounceDamping:40},onDragStart:()=>r(!0),onDragEnd:()=>r(!1),className:"relative my-2 min-w-0",children:[(0,i.jsxs)("button",{className:(0,z.Z)("\n          flex\n          items-center\n          w-full\n          h-11\n          py-4\n          pl-1\n          pr-3\n          min-w-0\n          rounded-lg\n          transition\n          border-0.5\n          border-border-300\n          bg-bg-100\n          bg-gradient-to-b\n          from-bg-300/0\n          to-bg-300/50\n          select-none\n          relative\n        ",l?"scale-y-[1.015] scale-x-[1.0025] shadow-md":"group hover:enabled:from-accent-secondary-200/0 hover:enabled:to-accent-secondary-200/10 hover:enabled:border-accent-secondary-200/50"),onClick:n,children:[(0,i.jsx)("div",{className:"flex min-w-0 items-center flex-1 pl-7 truncate",children:"default"===t.type&&t.nameKey?(0,i.jsx)(o.d7,{id:t.nameKey}):t.name}),s&&(0,i.jsx)("div",{className:"mr-0.5 rounded-full px-2 py-0.5 bg-text-300/5 text-text-400 font-medium text-[0.625rem]",children:(0,i.jsx)(y.Z,{defaultMessage:"Preset",id:"EucS2pAMVS"})}),(0,i.jsx)("div",{className:"text-accent-secondary-200 opacity-0 scale-50 transition group-hover:scale-100 group-hover:opacity-100",children:s?(0,i.jsx)(eb.o,{}):(0,i.jsx)(es.z,{})})]}),(0,i.jsx)("div",{onPointerDown:e=>a.start(e),onClick:e=>e.stopPropagation(),className:"w-7 h-7 absolute left-1 top-1/2 -translate-y-1/2 grid place-items-center cursor-move text-text-500 hover:text-accent-secondary-000",children:(0,i.jsx)(ew.f,{size:16,weight:"bold"})})]})},e_=e=>{let{openWithScreen:t,onClose:n,styles:s,setChatStyle:a}=e,r=(0,j.Z)(),h=!!t,f=(0,l.z$)(),[b,w]=(0,v.useState)(t||m.b.LIST),[k,C]=(0,v.useState)(),[N,M]=(0,v.useState)(!1),[S,_]=(0,v.useState)(!1),E=(0,v.useRef)(!1);(0,v.useEffect)(()=>{t&&w(t)},[t]);let z=()=>{E.current=!1,w(m.b.LIST),M(!1),_(!1)},Z=()=>{(!N||window.confirm(r.formatMessage({defaultMessage:"Are you sure? Closing while editing may not synchronize changes.",id:"0XdWZrmwXu"})))&&(f.track({event_key:"styles.modal",open:!1}),z(),n())},A=(e,t)=>{E.current=t,C(e),w(m.b.EDIT),M(!1),_(!1)};return(0,i.jsx)(d.u_,{modalSize:"xl",title:(e=>{switch(e){case m.b.CREATE:return(0,i.jsx)("div",{className:"font-copernicus font-normal",children:(0,i.jsx)(y.Z,{defaultMessage:"Create a style",id:"/pKvFi9Ak4"})});case m.b.CREATE_MANUALLY:return(0,i.jsx)("div",{className:"font-copernicus font-normal",children:(0,i.jsx)(y.Z,{defaultMessage:"Describe your style",id:"Ntblq5cSRe"})});case m.b.LIST:return(0,i.jsx)("div",{className:"font-copernicus font-normal",children:(0,i.jsx)(y.Z,{defaultMessage:"Customize your styles",id:"dn3MiW/vUH"})});case m.b.EDIT:return(0,i.jsx)("div",{className:"w-10/12 sm:w-5/12 md:w-7/12",children:S?(0,i.jsx)(eE,{style:k,onClose:e=>{e&&C(e),_(!1)}}):(0,i.jsx)("button",{title:k.name,className:"w-full font-copernicus font-normal text-left truncate cursor-text h-9 pr-4 leading-none translate-y-px text-text-200 hover:text-text-000",onClick:()=>!N&&_(!0),children:N?(0,i.jsx)(y.Z,{defaultMessage:"Edit {name}",id:"s3IOQQ+nJU",values:{name:k.name}}):"default"===k.type&&k.nameKey?(0,i.jsx)(o.d7,{id:k.nameKey}):k.name})})}})(b),icon:(e=>{switch(e){case m.b.CREATE:case m.b.EDIT:return(0,i.jsx)(c.z,{variant:"ghost",size:"icon_sm",disabled:N,onClick:()=>z(),children:(0,i.jsx)(p.X,{})});case m.b.CREATE_MANUALLY:return(0,i.jsx)(c.z,{variant:"ghost",size:"icon_sm",onClick:()=>w(m.b.CREATE),children:(0,i.jsx)(p.X,{})});case m.b.LIST:return null}})(b),isOpen:h,onClose:Z,className:"h-[35rem] !bg-gradient-to-b from-bg-100 to-bg-200 !pt-5 !pb-7",prependBeforeCloseButton:(0,i.jsx)(i.Fragment,{children:b===m.b.LIST&&(0,i.jsx)(u.u,{tooltipContent:r.formatMessage({defaultMessage:"Learn more about styles ",id:"nuhnis5YtY"}),children:(0,i.jsx)("div",{className:"mr-1",children:(0,i.jsx)(c.z,{href:"https://support.anthropic.com/en/articles/10181068-configuring-and-using-styles",variant:"ghost",className:"text-text-300",size:"icon",target:"_blank",children:(0,i.jsx)(x.H,{size:18})})})})}),hasCloseButton:!0,children:(0,i.jsxs)(g.M,{mode:"popLayout",children:[b===m.b.CREATE&&(0,i.jsx)(U,{onStyleChange:A,setScreen:w,animateBoolRef:E},"CreateStyleScreen"),b===m.b.CREATE_MANUALLY&&(0,i.jsx)(W,{onStyleChange:A,setScreen:w},"CreateStyleManuallyScreen"),b===m.b.LIST&&(0,i.jsx)(eM,{setScreen:w,styles:s,onStyleChange:A},"ListStylesScreen"),b===m.b.EDIT&&k&&(0,i.jsx)(ex,{animateBoolRef:E,style:k,returnToListScreen:z,setIsEditingName:_,setCurrentStyle:C,setIsEditing:M,setChatStyle:e=>{a(e),Z()}},"EditStyleScreen")]})})},eE=e=>{let{style:t,onClose:n}=e,s=(0,ed.X)(t),a="default"===t.type,l=(0,j.Z)(),[d,u]=(0,v.useState)("default"===t.type&&t.nameKey?(0,o.Gc)({id:t.nameKey,intl:l}):t.name),{isPending:m,mutateAsync:p}=(0,b.fq)(s,a),x=async()=>{n(await p({name:d}))};return(0,i.jsx)("form",{className:"w-full",onSubmit:async e=>{e.preventDefault(),await x()},children:(0,i.jsx)(r.oi,{autoFocus:!0,className:"w-full text-base font-styrene font-normal",value:d,maxLength:64,onChange:e=>u(e.target.value),error:0===d.length,append:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(c.z,{variant:"ghost",type:"button",size:"unset",className:"w-7 h-7 rounded-md mr-1",onClick:()=>n(),disabled:m,children:(0,i.jsx)(h.X,{})}),(0,i.jsx)(c.z,{variant:"flat",size:"unset",className:"w-7 h-7 rounded-md",type:"submit",loading:m,children:(0,i.jsx)(f.J,{weight:"bold"})})]})})})}},64243:function(e,t,n){n.d(t,{X:function(){return s}});function s(e){return"default"===e.type?e.key:e.uuid}},70027:function(e,t,n){n.d(t,{C:function(){return l}});var s=n(18013),a=n(7653),i=n(64243);function l(){let[e,t]=(0,s.R)("userHiddenStyles",[]),n=(0,a.useCallback)(e=>{let n=(0,i.X)(e);t(e=>[...e,n])},[t]),l=(0,a.useCallback)(()=>{t([])},[t]),r=(0,a.useCallback)(t=>t.filter(t=>{let n=(0,i.X)(t);return!e.includes(n)}),[e]);return{hiddenPresetStyles:e,setHiddenPresetStyles:t,addHiddenPresetStyle:n,resetHiddenPresetStyles:l,filterHiddenStyles:r}}},69838:function(e,t,n){n.d(t,{L:function(){return l}});var s=n(18013),a=n(7653),i=n(64243);function l(){let[e,t]=(0,s.R)("userStylesOrder",[]);return{sortStyles:(0,a.useCallback)(t=>[...t].sort((t,n)=>{let s=(0,i.X)(t),a=(0,i.X)(n);if("Default"===s)return -1;if("Default"===a)return 1;let l=e.indexOf(s),r=e.indexOf(a);return -1===l&&-1===r?0:-1===l?1:-1===r?-1:l-r}),[e]),stylesOrder:e,setOrder:(0,a.useCallback)(e=>{t(e.map(e=>(0,i.X)(e)))},[t])}}},89799:function(e,t,n){n.d(t,{N:function(){return M},Q:function(){return k}});var s=n(27573),a=n(67112),i=n(96070),l=n(11607),r=n(13890),o=n(10228),c=n(16963),d=n(30070),u=n(62168),m=n(39343),p=n(7653),x=n(45790),h=n(66605),f=n(85465),g=n(95606),v=n(91217),j=n(84344),y=n(71101),b=n(31275),w=n(90824);function k(e){let{uuid:t,syncSource:n,size:u,onRemove:m,isInteractive:k=!0,isEditable:M}=e,{mutateAsync:S}=(0,h.us)(),_=(0,f.l)(),E=(0,i.b)(),[z,Z]=(0,p.useState)(!1),A=(0,r.ir)(null==n?void 0:n.status.state),T=(0,p.useCallback)(()=>{if(n){if(n.type&&n.status.state===o.co.UNAUTHENTICATED)_(n.type);else if(n.type===o.Fg.GITHUB)Z(!0);else if(n.type===o.Fg.GDRIVE){let e=n.config;window.open((0,j.m)(e.uri),"_blank")}else throw Error("Unknown sync source type")}},[n,_]),I=(0,p.useCallback)(()=>{S(t),null==m||m()},[S,t,m]),{projectUuid:D}=(0,v.r)(),R=!!n&&[o.co.CREATED,o.co.PENDING,o.co.UPDATING].includes(n.status.state);return E?(0,s.jsx)(w.n4,{location:"chat",projectUuid:D,syncSource:n,handleRemove:M?I:void 0,isEditable:M}):n?R&&n.type?(0,s.jsx)(a.h,{size:u,content:(0,s.jsx)("div",{className:"flex items-center",children:(0,s.jsx)(l.Loading,{size:"sm"})}),onRemove:m?I:void 0,isInteractive:k,tooltipContent:void 0,fileExtension:(0,s.jsx)(a.b,{type:n.type}),extensionAccessory:null,isError:!1,externalDocument:!1,hFullContent:!1}):(0,s.jsxs)(s.Fragment,{children:[n.type===o.Fg.GITHUB&&(0,s.jsx)(b.U,{location:"chat",projectUuid:D,isOpen:z,onClose:()=>Z(!1),syncSource:n}),(0,s.jsx)(a.h,{size:u,content:A?(0,s.jsx)(x.Z,{defaultMessage:"Content not accessible",id:"IPK01iLM7n"}):n.type===o.Fg.GITHUB?(0,s.jsx)(C,{config:n.config}):n.type===o.Fg.GDRIVE?(0,s.jsx)(y.C,{uri:n.config.uri}):null,hFullContent:n.type===o.Fg.GITHUB&&!A,onContentClick:T,onRemove:m?I:void 0,externalDocument:n.type===o.Fg.GDRIVE&&!A,isInteractive:k,isError:A,tooltipContent:A?(0,s.jsxs)("div",{className:"inline-flex gap-1 items-center",children:[N(n),"\xa0",k&&(0,s.jsx)(c.G,{})]}):void 0,extensionAccessory:A&&(0,s.jsxs)("div",{className:"inline-flex ml-1",children:[(0,s.jsx)("div",{className:"inline-block w-[0.5px] bg-border-300"}),(0,s.jsx)(d.v,{className:"text-danger-000 ml-1.5 mr-0.5",weight:"bold",size:12})]}),fileExtension:(0,s.jsx)(a.b,{type:n.type})})]}):(0,s.jsx)("div",{className:"p-0.5",children:(0,s.jsx)(g.e,{isShown:!0})})}function C(e){let{config:t}=e;return(0,s.jsx)("div",{className:"h-full pt-4 flex flex-col gap-0.5 fade-out-bottom fade-out-right leading-tight pointer-events-none relative overflow-hidden break-words text-left tracking-tighter opacity-70 font-mono text-[0.5rem]",children:Object.entries(t.filters.filters).map(e=>{let[n,a]=e;return(0,s.jsxs)("div",{className:"inline-flex gap-1 items-center text-nowrap",children:[(0,s.jsx)("span",{children:"include"===a?(0,s.jsx)(u.f,{size:12,weight:"fill"}):(0,s.jsx)(m.S,{size:12})}),"/"===n?t.repo:n.replace(/^\/|\/$/,"")]},n)})})}let N=e=>{switch(e.status.state){case o.co.DISABLED:return r.p5;case o.co.UNAUTHENTICATED:return(0,s.jsx)(x.Z,{defaultMessage:"Sign in for access",id:"w6mjA9GP58"});case o.co.ACCESS_DENIED:return(0,s.jsx)(x.Z,{defaultMessage:"Request access via {source}",id:"OJ2RQ+ZgAF",values:{source:r.X_[e.type]}})}},M=e=>(null==e?void 0:e.status.state)!==o.co.DISABLED&&((null==e?void 0:e.status.state)===o.co.UNAUTHENTICATED||(null==e?void 0:e.status.state)!==o.co.ACCESS_DENIED||(null==e?void 0:e.type)==="gdrive")},67112:function(e,t,n){n.d(t,{b:function(){return d},h:function(){return c}});var s=n(27573),a=n(16282),i=n(32737),l=n(12459),r=n(10228),o=n(10607);function c(e){let{size:t,content:n,fileExtension:l,extensionAccessory:r,tooltipContent:c,isError:d,isInteractive:u,externalDocument:m,hFullContent:p,onRemove:x,onContentClick:h,href:f}=e;return(0,s.jsx)(i.u,{tooltipContent:c,side:"bottom",children:(0,s.jsxs)(a.tK,{size:t,onRemoveFile:x,isInteractive:u,className:"!p-0",children:[x&&(0,s.jsx)("div",{className:"absolute left-1 top-1 z-10",children:(0,s.jsx)(a.TF,{onRemoveFile:x})}),(0,s.jsxs)(a.ek,{size:t,onClick:h,isInteractive:u,href:f,children:[(0,s.jsx)(a.K3,{isError:d,size:t,isInteractive:u}),(0,s.jsx)("div",{className:(0,o.Z)(d?"text-always-black":"text-accent-secondary-200","pointer-events-none relative z-[1] flex-1 break-words px-2.5 text-center leading-tight tracking-tight","md"===t&&"mb-1 line-clamp-3 px-2.5 text-[0.85rem] font-semibold leading-[0.825rem] tracking-tighter","mdlg"===t&&"line-clamp-3 px-2.5 text-[0.85rem] font-semibold -mb-2 leading-[1.15rem] tracking-tighter","lg"===t&&"line-clamp-4 px-3 text-sm font-semibold",p&&"h-full","lg"===t&&!p&&"pt-6"),children:n}),(0,s.jsx)(a.PJ,{fileExtension:l,size:t,externalDocument:m,extensionAccessory:r})]})]})})}function d(e){let{type:t}=e,n={[r.Fg.GDRIVE]:{variant:l.cT.DOCS,label:"DOC"},[r.Fg.OUTLINE]:{variant:void 0,label:"DOC"},[r.Fg.GITHUB]:{variant:void 0,label:"CODE"},[r.Fg.SALESFORCE]:{variant:void 0,label:"DOC"},[r.Fg.GMAIL]:{variant:void 0,label:"EMAIL"},[r.Fg.GCAL]:{variant:void 0,label:"EVENT"},[r.Fg.SLACK]:{variant:void 0,label:"MSG"},[r.Fg.ASANA]:{variant:void 0,label:"DOC"}};return(0,s.jsxs)("div",{className:"flex flex-row gap-1 items-center",children:[(0,s.jsx)(l.j0,{className:"!text-always-black",type:t,size:12,variant:n[t].variant}),(0,s.jsx)("span",{className:"pt-px",children:n[t].label})]})}},76986:function(e,t,n){n.d(t,{McpProvider:function(){return h},c:function(){return x}});var s=n(27573);n(95622);var a=n(3053),i=n(27895),l=n(40223),r=n(65654),o=n(7653),c=n(5362),d=n(27218);r.kO.shape.params;var u=n(75140);class m{start(){return this._port.onmessage=e=>{var t;null===(t=this.onmessage)||void 0===t||t.call(this,e.data)},this._port.onmessageerror=e=>{var t;null===(t=this.onerror)||void 0===t||t.call(this,Error("MessagePort message error: ".concat(e.data)))},Promise.resolve()}close(){var e;return this._port.close(),null===(e=this.onclose)||void 0===e||e.call(this),Promise.resolve()}send(e){return this._port.postMessage(e),Promise.resolve()}constructor(e){this._port=e}}let p=(0,o.createContext)({mcpClients:{},mcpTools:[],isLoading:!1,isEnabled:!1}),x=()=>{let e=(0,o.useContext)(p);return e||console.warn("useMcp being used outside of McpProvider, this is probably a bug"),e};function h(e){let{children:t}=e,[n,l]=(0,o.useState)({}),[m,x]=(0,o.useState)(!1),{addError:h}=(0,i.e)(),{tools:g,onDolphinInterrupted:v}=function(e){let{mcpClients:t}=e,[n,s]=(0,o.useState)([]),l=(0,o.useRef)(!1),c=(0,o.useRef)(null),d=(0,o.useRef)(!1),{addError:m}=(0,i.e)(),{track:p}=(0,a.z$)(),x=(0,o.useCallback)(async(e,n,s)=>{if("auto-dolphin"===e){let e=d.current?"Claude would like to run the tool ".concat(n.name," but was previously interrupted. Do you want to allow this?"):"Claude would like to run the tool ".concat(n.name,". Do you want to allow this?");if(l.current&&!confirm(e))return p({event_key:"mcp.tools.called",result:"disallowed",argument_count:Object.keys(s).length}),d.current=!0,{content:[{type:"text",text:"The user has chosen to disallow the tool call."}],isError:!0};c.current=Date.now(),l.current=!1}try{let a=await t[e].callTool({name:n.name,arguments:s},r.M$,{timeout:24e4});if(p({event_key:"mcp.tools.called",result:"success",argument_count:Object.keys(s).length}),"content"in a)return a;return{content:[{type:"text",text:JSON.stringify(a.toolResult,null,2)}],isError:!1}}catch(e){throw m("Failed to call tool ".concat(n.name,": ").concat(e)),p({event_key:"mcp.tools.called",result:"failure",argument_count:Object.keys(s).length}),e}},[m,t,p]);return(0,o.useEffect)(()=>{let e=!1;return async function(){if(!t)return;let n=await (0,u.k)(t,{method:"tools/list",params:{}},r.Gd);e||s(Object.entries(n).map(e=>{var t;let[n,s]=e;return p({event_key:"mcp.tools.listed",tool_count_on_server:s.tools.length}),null!==(t=s.tools.map(e=>({...e,serverName:n,callback:t=>x(n,e,t)})))&&void 0!==t?t:[]}).flat())}(),()=>{e=!0}},[x,t,p]),{tools:n,onDolphinInterrupted:(0,o.useCallback)(()=>{if("number"==typeof c.current&&Date.now()<c.current+100)return},[c])}}({mcpClients:n}),{track:j}=(0,a.z$)();!function(e){let{mcpClients:t}=e,{addError:n}=(0,i.e)(),{track:s}=(0,a.z$)(),{activeOrganization:l}=(0,d.t)(),r=(0,c.uC)("/api/organizations/".concat(null==l?void 0:l.uuid,"/dust/mcp_messages"),"POST",{enabled:!1,onError:()=>n("MCP sampling failed")});(0,o.useEffect)(()=>{},[!1,t,r,s])}({mcpClients:n});let y=(0,o.useCallback)(e=>{if(e.source!==window)return;let{type:t,serverName:n}=e.data;if("mcp-server-connected"!==t||!n)return;let[s]=e.ports;f(s).then(e=>{console.log("Connected to MCP server ".concat(n)),l(t=>({...null!=t?t:{},[n]:e})),"dolphin"===n&&e.setNotificationHandler(r.b5,e=>{"USER_INTERRUPT"===e.params.data&&v()}),j({event_key:"mcp.servers.connected",result:"success"})},e=>{console.error("Could not attach to MCP server ".concat(n,":"),e),h("Could not attach to MCP server ".concat(n)),j({event_key:"mcp.servers.connected",result:"failure"})})},[h,j,v]);(0,o.useEffect)(()=>{window.addEventListener("message",y);let e=!1;async function t(){var t,n;if(!(null===(t=window.claudeAppBindings)||void 0===t?void 0:t.listMcpServers)||!(null===(n=window.claudeAppBindings)||void 0===n?void 0:n.connectToMcpServer))return;let s=await window.claudeAppBindings.listMcpServers();j({event_key:"mcp.servers.listed",server_count:s.length}),e||await Promise.all(s.map(e=>window.claudeAppBindings.connectToMcpServer(e).catch(t=>{console.error("Could not connect to MCP server ".concat(e,":"),t),h("Could not connect to MCP server ".concat(e))})))}return x(!0),t().finally(()=>x(!1)),()=>{e=!0,window.removeEventListener("message",y)}},[y,h,j]);let b=(0,o.useMemo)(()=>Object.keys(n).length>0,[n]);return(0,s.jsx)(p.Provider,{value:{mcpClients:n,mcpTools:g,isLoading:m,isEnabled:b},children:t})}async function f(e){let t=new m(e),n=new l.K({name:"claude-ai",version:"0.1.0"},{capabilities:{}});return await t.start(),await n.connect(t),n}},75140:function(e,t,n){n.d(t,{k:function(){return a}});var s=n(65654);async function a(e,t,n,a){return e?Object.fromEntries((await Promise.all(Object.entries(e).map(async e=>{let[i,l]=e;try{let e=await l.request(t,n,{timeout:5e3,...a});return[i,e]}catch(e){if(e instanceof s.yp&&e.code===s.jK.MethodNotFound)return null;return console.error("Request ".concat(t.method," to ").concat(i," failed: ").concat(e)),null}}))).filter(e=>null!==e)):{}}},64295:function(e,t,n){function s(e){return"text"===e.type&&e.text?{...e,text:e.text.replace("","")}:e.content?{...e,content:e.content.map(s)}:e}n.d(t,{A5:function(){return a},_B:function(){return s}});let a=e=>{let t="",n=0,s=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("doc"===e.type&&e.content)for(let t of e.content)s(t);else if("paragraph"===e.type){if(e.content)for(let t of e.content)s(t);t+="\n"}else if("text"===e.type){let n=e.text;if(e.marks)for(let t of e.marks)"bold"===t.type?n="**".concat(n,"**"):"italic"===t.type?n="*".concat(n,"*"):"underline"===t.type?n="__".concat(n,"__"):"strike"===t.type?n="~~".concat(n,"~~"):"code"===t.type&&(n="`".concat(n,"`"));t+=n}else if("codeBlock"===e.type){let n=e.attrs&&"string"==typeof e.attrs.language?e.attrs.language:"";if(t+="\n```".concat(n,"\n"),e.content)for(let t of e.content)s(t);t+="\n```\n\n"}else if("bulletList"===e.type&&e.content)for(let t of e.content)s(t);else if("orderedList"===e.type&&e.content)for(let t=0;t<e.content.length;t++)s(e.content[t],t+1,!0);else if("listItem"===e.type&&e.content){let l="   ".repeat(n);for(let r of(i?t+="".concat(l).concat(a,". "):t+="".concat(l,"* "),e.content))n+=1,s(r),n-=1}};return s(e),t.replace("","").trim()}},89269:function(e,t,n){n.d(t,{n:function(){return s}});async function s(e){let t;let n="CaptureController"in window?new CaptureController:null;null==n||n.setFocusBehavior("no-focus-change");try{t=await navigator.mediaDevices.getDisplayMedia({video:!0,controller:n})}catch(e){if(e instanceof DOMException&&"NotAllowedError"===e.name)return null;throw e}let s=document.createElement("video");s.srcObject=t,await new Promise((e,t)=>{s.onloadedmetadata=()=>{s.play().then(e,t)}});let a=document.createElement("canvas");if(e){let t=Math.min(e.width/Math.min(s.videoWidth,e.width),e.height/Math.min(s.videoHeight,e.height));a.width=s.videoWidth*t,a.height=s.videoHeight*t}else a.width=s.videoWidth,a.height=s.videoHeight;let i=a.getContext("2d");if(!i)throw Error("Could not create 2D context");i.drawImage(s,0,0,a.width,a.height);let l=a.toDataURL("image/png");return t.getTracks().forEach(e=>e.stop()),{imageDataUrl:l}}},15281:function(e,t,n){n.d(t,{b:function(){return m},w:function(){return p}});var s=n(96933),a=n(27218),i=n(13262),l=n(51432),r=n(77930),o=n(23368),c=n.n(o),d=n(81695),u=n(7653);let m=()=>{let e="new-conversation-params-for-navigation",t=(0,r.useQueryClient)(),n=(0,u.useCallback)(()=>{let t=localStorage.getItem(e);if(!t)return{};try{let e=JSON.parse(t);return c()(e,e=>Date.now()-e.created_at<6e4)}catch(t){localStorage.removeItem(e)}return{}},[]);return{prepareNewConversation:(0,u.useCallback)((s,a)=>{let i={created_at:Date.now(),...a};t.setQueryData([e,s],i);let l=n();l[s]=i;try{localStorage.setItem(e,JSON.stringify(l))}catch(e){}},[t,n]),getCreateParamsForConvo:(0,u.useCallback)(s=>{let a=n(),i=t.getQueryData([e,s])||a[s];t.removeQueries({queryKey:[e,s]});let l=c()(a,(e,t)=>t!==s);return localStorage.setItem(e,JSON.stringify(l)),i},[t,n])}};function p(){let{mutateAsync:e}=(0,s.$Y)(),[t,n]=(0,u.useReducer)(l.H,"",l.H),{prepareNewConversation:o}=m(),c=(0,r.useQueryClient)(),{activeOrganization:p}=(0,a.t)(),x=null==p?void 0:p.uuid,h=(0,d.useRouter)();return(0,u.useCallback)(async s=>{let{model:a,project_uuid:l,include_conversation_preferences:r,paprika_mode:d,name:u}=s,m=e({uuid:t,name:null!=u?u:"",model:a,project_uuid:l,include_conversation_preferences:r,paprika_mode:d});return o(t,s),await m,h.push("/chat/".concat(t)),n(),c.invalidateQueries({queryKey:[i.tv,{orgUUID:x}]}),{uuid:t}},[e,t,h,o,c,x])}},83617:function(e,t,n){n.d(t,{C:function(){return i}});var s=n(27573),a=n(10607);let i=e=>{let{color:t="default",size:n="default",children:i,className:l,uppercase:r}=e;return(0,s.jsx)("div",{className:(0,a.W)("inline-flex items-center align-middle font-semibold leading-none","default"===t&&"bg-gradient-to-bl  from-bg-500/30  to-bg-500/70 text-text-300","flat"===t&&"bg-bg-500/40 text-text-200","secondary"===t&&"bg-gradient-to-bl  from-accent-secondary-200/70  to-accent-secondary-100  text-oncolor-100","pro"===t&&"bg-gradient-to-bl  from-accent-pro-200  to-accent-pro-100  text-oncolor-100","main"===t&&"bg-gradient-to-bl  from-accent-main-200/70  to-accent-main-100  text-oncolor-100","default"===n&&"h-5 px-1.5 rounded-md text-[0.625rem]","sm"===n&&"h-4 px-1 rounded text-[0.625rem]","lg"===n&&"h-6 px-2 rounded-lg text-xs",r&&"uppercase tracking-[0.015rem]",l),children:i})}},72538:function(e,t,n){n.d(t,{p:function(){return o}});var s=n(27573),a=n(32737),i=n(10607),l=n(23607),r=n(7653);function o(e){let{state:t="static",className:o="w-8 text-accent-brand inline-block",isInteractive:d=!0}=e,u=(0,r.useRef)(null),m=(0,r.useRef)(t),p=(0,l.J)(),[x,h]=(0,r.useState)(),[f,g]=(0,r.useState)(t),[v,j]=(0,r.useReducer)(e=>e+1,0);(0,r.useEffect)(()=>{n.e(8199).then(n.bind(n,88199)).then(e=>{h(e.animations)})},[]),(0,r.useEffect)(()=>g(t),[t]),(0,r.useEffect)(()=>{let e;let t=u.current&&"function"==typeof u.current.animate;if(!p&&"static"!==f&&t&&x){let{frameCount:t,speed:n}=x[f],s=Array.from({length:t},(e,n)=>({transform:"translateY(-".concat(100/t*n,"%)")}));e=u.current.animate(s,{duration:n*s.length,iterations:"tickle"===f?1:1/0,easing:"steps(".concat(s.length,", jump-none)")}),"tickle"===f&&(null==e||e.addEventListener("finish",()=>g(m.current)))}return"tickle"!==f&&(m.current=f),()=>{null==e||e.cancel()}},[x,f,p]);let y=()=>{d&&"writing"!==f&&"thinking"!==f&&"tickle"!==f&&(g("tickle"),j())},b="Hi, Im Claude. How can I help you today?";v<32&&v>24?b="Ugh, well you cant do that forever":v<=24&&v>18?b="Alright, alright, you have my attention!":v<=18&&v>12?b="Are you still doing that?":v<=12&&v>5&&(b="Yes, yes. What can I do for you?");let w=!d||"writing"===f||"thinking"===f;if("static"===f||p||!x)return(0,s.jsx)(a.u,{className:(0,i.Z)("font-tiempos max-w-none italic tracking-tight",w&&"opacity-0"),tooltipContent:b,side:"right",children:(0,s.jsx)("div",{className:(0,i.Z)(o,"select-none"),onMouseDown:y,children:(0,s.jsx)(c,{className:"w-full fill-current"})})});let{svg:k,width:C,height:N}=x[f];return(0,s.jsx)(a.u,{className:(0,i.Z)("font-tiempos max-w-none italic tracking-tight",w&&"opacity-0"),tooltipContent:b,side:"right",children:(0,s.jsx)("div",{className:(0,i.Z)(o,"overflow-hidden select-none"),style:{aspectRatio:C/N},onMouseDown:y,children:(0,s.jsx)("div",{ref:u,className:"[&>svg]:block [&>svg]:w-full [&>svg]:fill-current",dangerouslySetInnerHTML:{__html:k}})})})}function c(e){return(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100",...e,children:(0,s.jsx)("path",{d:"m19.6 66.5 19.7-11 .3-1-.3-.5h-1l-3.3-.2-11.2-.3L14 53l-9.5-.5-2.4-.5L0 49l.2-1.5 2-1.3 2.9.2 6.3.5 9.5.6 6.9.4L38 49.1h1.6l.2-.7-.5-.4-.4-.4L29 41l-10.6-7-5.6-4.1-3-2-1.5-2-.6-4.2 2.7-3 3.7.3.9.2 3.7 2.9 8 6.1L37 36l1.5 1.2.6-.4.1-.3-.7-1.1L33 25l-6-10.4-2.7-4.3-.7-2.6c-.3-1-.4-2-.4-3l3-4.2L28 0l4.2.6L33.8 2l2.6 6 4.1 9.3L47 29.9l2 3.8 1 3.4.3 1h.7v-.5l.5-7.2 1-8.7 1-11.2.3-3.2 1.6-3.8 3-2L61 2.6l2 2.9-.3 1.8-1.1 7.7L59 27.1l-1.5 8.2h.9l1-1.1 4.1-5.4 6.9-8.6 3-3.5L77 13l2.3-1.8h4.3l3.1 4.7-1.4 4.9-4.4 5.6-3.7 4.7-5.3 7.1-3.2 5.7.3.4h.7l12-2.6 6.4-1.1 7.6-1.3 3.5 1.6.4 1.6-1.4 3.4-8.2 2-9.6 2-14.3 3.3-.2.1.2.3 6.4.6 2.8.2h6.8l12.6 1 3.3 2 1.9 2.7-.3 2-5.1 2.6-6.8-1.6-16-3.8-5.4-1.3h-.8v.4l4.6 4.5 8.3 7.5L89 80.1l.5 2.4-1.3 2-1.4-.2-9.2-7-3.6-3-8-6.8h-.5v.7l1.8 2.7 9.8 14.7.5 4.5-.7 1.4-2.6 1-2.7-.6-5.8-8-6-9-4.7-8.2-.5.4-2.9 30.2-1.3 1.5-3 1.2-2.5-2-1.4-3 1.4-6.2 1.6-8 1.3-6.4 1.2-7.9.7-2.6v-.2H49L43 72l-9 12.3-7.2 7.6-1.7.7-3-1.5.3-2.8L24 86l10-12.8 6-7.9 4-4.6-.1-.5h-.3L17.2 77.4l-4.7.6-2-2 .2-3 1-1 8-5.5Z"})})}},38312:function(e,t,n){n.d(t,{O:function(){return d}});var s=n(27573),a=n(70354),i=n(80151),l=n(10607),r=n(68425),o=n(7653);let c={FROM_ANCHOR:8,POINTER_OFFSET:18,POINTER_HEIGHT:16},d=e=>{let{anchorRef:t,children:n,side:d,align:m="center",accentColor:p="default",onClose:x,className:h,introDelay:f=0,spacing:g={}}=e,v={...c,...g},j=(0,o.useRef)(null),[y,b]=(0,o.useState)(d),[w,k]=(0,o.useState)(m);(0,o.useEffect)(()=>{if(!j.current||!t.current)return;let e=()=>{let{current:e}=j,{current:n}=t;if(!e||!n)return;let s=n.getBoundingClientRect(),a=e.getBoundingClientRect(),i=window.innerWidth,l=window.innerHeight,r=y,o=w,c=0,d=0,u=()=>{c="top"===r?s.top-a.height-v.FROM_ANCHOR:"bottom"===r?s.bottom+v.FROM_ANCHOR:s.top-v.POINTER_OFFSET+.5*s.height-.5*v.POINTER_HEIGHT},m=()=>{if("left"===r)d=s.left-a.width-v.FROM_ANCHOR;else if("right"===r)d=s.right+v.FROM_ANCHOR;else switch(o){case"start":d=s.left-v.FROM_ANCHOR;break;case"center":d=s.left+(s.width-a.width)/2;break;case"end":d=s.right-a.width+v.FROM_ANCHOR}};u(),m(),d<0?"top"===r||"bottom"===r?o="start":r="bottom":d+a.width>i&&("top"===r||"bottom"===r?o="end":r="bottom"),c<0?r="bottom":c+a.height>l&&(r="top"),u(),m(),e.style.top="".concat(c,"px"),e.style.left="".concat(d,"px"),r!==y&&b(r),o!==w&&k(o)};e();let n=new ResizeObserver(e);t.current&&(n.observe(t.current),t.current.parentElement&&n.observe(t.current.parentElement));let s=e=>{if(x){var t;(null===(t=j.current)||void 0===t?void 0:t.contains(e.target))||x()}};return window.addEventListener("resize",e),window.addEventListener("scroll",e),document.addEventListener("click",s),()=>{n.disconnect(),window.removeEventListener("resize",e),window.removeEventListener("scroll",e),document.removeEventListener("click",s)}},[y,w,t,x,v.FROM_ANCHOR,v.POINTER_HEIGHT,v.POINTER_OFFSET]);let C={};switch(y){case"right":C={translateX:-v.FROM_ANCHOR,opacity:0};break;case"left":C={translateX:v.FROM_ANCHOR,opacity:0};break;case"bottom":C={translateY:-v.FROM_ANCHOR,opacity:0};break;case"top":C={translateY:v.FROM_ANCHOR,opacity:0}}return(0,s.jsxs)(r.E.div,{ref:j,initial:C,animate:{translateY:0,translateX:0,opacity:1,transition:{delay:f,type:"spring",stiffness:200,damping:20,mass:1.5,opacity:{ease:"easeOut",duration:.15}}},exit:{scale:.985,opacity:0,filter:"blur(24px)",transition:{ease:"easeIn",duration:.3,opacity:{duration:.2}}},className:(0,l.Z)("fixed z-tooltip rounded-xl pl-4 pt-3.5 pb-4 border-0.5 shadow-sm max-w-72",x?"pr-10":"pr-4","default"===p&&"bg-bg-200 border-border-300","secondary"===p&&"text-accent-secondary-000 bg-bg-100 bg-gradient-to-b from-accent-secondary-900/40 via-30% via-accent-secondary-900 to-accent-secondary-900/60 border-accent-secondary-100/50","pro"===p&&"text-accent-pro-000 bg-bg-100 bg-gradient-to-b from-accent-pro-900/60 via-30% via-accent-pro-900 to-accent-pro-900/50 border-accent-pro-100/50",h),role:"dialog",style:{willChange:"transform",backfaceVisibility:"hidden",WebkitBackfaceVisibility:"hidden"},children:[(0,s.jsx)(u,{side:y,align:w,accentColor:p,spacing:v}),x&&(0,s.jsx)(a.z,{variant:"ghost",size:"icon_xs",className:"!absolute hover:bg-always-black/5 active:bg-always-black/10 top-1.5 right-1.5 z-10",onClick:x,children:(0,s.jsx)(i.X,{size:16})}),n]})},u=e=>{let{accentColor:t,side:n,align:a,spacing:i=c}=e,r="fill-bg-200",o="fill-border-300";"secondary"===t&&(r="fill-accent-secondary-900",o="fill-accent-secondary-100/50"),"pro"===t&&(r="fill-accent-pro-900",o="fill-accent-pro-100/50");let d={};switch(n){case"top":d={top:"100%",left:"50%",marginTop:"-5px",transform:"rotate(-90deg) translateY(-25%)"};break;case"bottom":d={bottom:"100%",left:"50%",marginBottom:"-5px",transform:"rotate(90deg) translateY(25%)"};break;case"right":d={top:i.POINTER_OFFSET};break;case"left":d={top:i.POINTER_OFFSET,left:"100%",transform:"rotate(180deg)"}}if("top"===n||"bottom"===n)switch(a){case"start":d.left=i.POINTER_OFFSET;break;case"end":d.left="auto",d.right=i.POINTER_OFFSET}return(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",height:i.POINTER_HEIGHT,viewBox:"0 0 6 16",className:(0,l.Z)("absolute origin-center pointer-events-none","right"===n&&"right-full"),style:d,children:[(0,s.jsx)("path",{className:r,d:"M6 0h-.5v1.55c0 .55-.27 1.06-.71 1.55-.53.6-1.16 1.05-1.79 1.51-.57.42-1.15.85-1.65 1.37C.87 6.48.5 7.06.5 7.74c0 .68.37 1.26.85 1.77.5.52 1.08.94 1.65 1.36.63.47 1.26.93 1.79 1.51.44.5.71 1 .71 1.56V16H6V0Z"}),(0,s.jsx)("path",{className:o,fillRule:"evenodd",clipRule:"evenodd",d:"M6 0v1.55c0 .74-.36 1.36-.85 1.9-1.01 1.13-2.4 1.8-3.44 2.89-.45.47-.71.92-.71 1.4 0 .48.26.93.7 1.4 1.05 1.1 2.44 1.76 3.45 2.89.5.54.85 1.17.85 1.9V16h-.5v-2.06c0-.56-.27-1.06-.71-1.56-1.01-1.12-2.4-1.79-3.44-2.87C.87 9 .5 8.42.5 7.74c0-.68.37-1.26.85-1.76C2.4 4.89 3.78 4.22 4.8 3.1c.44-.5.71-1 .71-1.55V0H6Z"})]})}},21223:function(e,t,n){n.d(t,{l:function(){return a}});var s=n(27573);let a=e=>{let{height:t,className:n}=e;return(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 139 34",className:n,height:t,fill:"currentColor","aria-label":"Claude",children:(0,s.jsx)("path",{d:"M18.07 30.79c-5.02 0-8.46-2.8-10.08-7.11a19.2 19.2 0 0 1-1.22-7.04C6.77 9.41 10 4.4 17.16 4.4c4.82 0 7.78 2.1 9.48 7.1h2.06l-.28-6.9c-2.88-1.86-6.48-2.81-10.87-2.81-6.16 0-11.41 2.77-14.34 7.74A16.77 16.77 0 0 0 1 18.2c0 5.53 2.6 10.42 7.5 13.15a17.51 17.51 0 0 0 8.74 2.06c4.78 0 8.57-.91 11.93-2.5l.87-7.62h-2.1c-1.26 3.48-2.76 5.57-5.25 6.68-1.22.55-2.76.83-4.62.83Zm21.65-26.4.2-3.39H38.5l-6.33 1.9v1.02l2.8 1.3v23.79c0 1.62-.82 1.98-3 2.25V33h10.75v-1.74c-2.17-.27-3-.63-3-2.25V4.4Zm42.75 29h.83l7.27-1.38v-1.78l-1.03-.07c-1.7-.16-2.13-.52-2.13-1.9V15.58l.2-4.07h-1.15l-6.87.99v1.73l.67.12c1.85.28 2.4.8 2.4 2.1v11.3C80.9 29.13 79.2 30 77.19 30c-2.26 0-3.64-1.15-3.64-3.8V15.58l.2-4.07h-1.19l-6.87.99v1.73l.71.12c1.86.28 2.41.8 2.41 2.1v10.43c0 4.42 2.49 6.52 6.48 6.52 3.04 0 5.53-1.62 7.39-3.88l-.2 3.88Zm-20-14.06c0-5.65-3-7.82-8.4-7.82-4.79 0-8.27 1.97-8.27 5.25 0 1 .36 1.74 1.07 2.25l3.64-.47c-.16-1.1-.24-1.78-.24-2.05 0-1.86.99-2.8 3-2.8 2.97 0 4.47 2.09 4.47 5.44v1.11l-7.51 2.25c-2.49.67-3.91 1.27-4.86 2.65a5 5 0 0 0-.71 2.8c0 3.2 2.21 5.46 5.97 5.46 2.72 0 5.13-1.23 7.23-3.56.75 2.33 1.9 3.56 3.95 3.56 1.66 0 3.16-.68 4.5-1.98l-.4-1.38c-.59.16-1.14.23-1.73.23-1.15 0-1.7-.9-1.7-2.68v-8.26Zm-9.6 10.87c-2.05 0-3.31-1.19-3.31-3.28 0-1.43.67-2.26 2.1-2.73l6.08-1.94v5.85c-1.94 1.46-3.08 2.1-4.86 2.1Zm63.3 1.81v-1.78l-1.02-.07c-1.7-.16-2.14-.52-2.14-1.9V4.4l.2-3.4h-1.42l-6.32 1.9v1.02l2.8 1.3v7.83a8.84 8.84 0 0 0-5.37-1.54c-6.28 0-11.18 4.78-11.18 11.93 0 5.89 3.51 9.96 9.32 9.96 3 0 5.61-1.47 7.23-3.72l-.2 3.72h.83l7.27-1.39Zm-13.15-18.13c3 0 5.25 1.74 5.25 4.94v9a7.2 7.2 0 0 1-5.21 2.1c-4.31 0-6.48-3.4-6.48-7.94 0-5.1 2.48-8.1 6.44-8.1Zm28.52 4.5c-.55-2.64-2.17-4.15-4.42-4.15-3.36 0-5.7 2.53-5.7 6.17 0 5.37 2.85 8.85 7.44 8.85a8.6 8.6 0 0 0 7.38-4.35l1.35.36c-.6 4.66-4.82 8.14-10 8.14-6.08 0-10.27-4.5-10.27-10.9 0-6.45 4.54-11 10.63-11 4.54 0 7.74 2.73 8.77 7.48l-15.84 4.85V21.7l10.66-3.32Z"})})}},18691:function(e,t,n){n.d(t,{H:function(){return i},x:function(){return a}});var s=n(27573);let a=e=>{let{size:t=16,className:n}=e;return(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",width:t,height:t,viewBox:"0 0 16 16",className:n,strokeLinecap:"round",strokeLinejoin:"round",children:[(0,s.jsx)("path",{d:"M7.5 4.5c-3 2-4.5 4-5.5 8L1.5 15l1-1.5"}),(0,s.jsx)("path",{d:"M2 4.5c-.5 1.3-.1 5 .4 6.5 0 0 1.9-2 4.1-3 1.8-.8 3.8-.6 4.5-2 .6-1.2-.2-1.7-1.5-1 1.2-.7 4-2 3-3.5-1-1.4-3.5-.1-4.5.8C8 1.9 8 .9 7 1c-1 .1-2 1.5-2.3 2.8 0 0 0-.7-.7-.8-.7-.1-1.6.5-2 1.5Z"}),(0,s.jsx)("path",{d:"M6.2 11.3c1 .4 1.8 0 2.3-1 .3.6.5 1.2 2 1.2s1.7-.6 2-1.3c.4 1.1 1.1 1.5 2.3 1m-9.6 3.4c.8.4 2 0 2.5-1.1.3.7.8 1.3 1.8 1.3s1.5-.4 2-1.3c.5.9 1.5 1.5 2.5 1"})]})},i=e=>{let{size:t=16,className:n}=e;return(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",width:t,height:t,viewBox:"0 0 16 16",className:n,strokeLinecap:"round",strokeLinejoin:"round",children:[(0,s.jsx)("path",{d:"M8.5 4.5c-3 2-4.5 4-5.5 8L2.5 15l1-1.5"}),(0,s.jsx)("path",{d:"M3 4.5c-.5 1.3-.1 5 .4 6.5 0 0 1.9-2 4.1-3 1.8-.8 3.8-.6 4.5-2 .6-1.2-.2-1.7-1.5-1 1.2-.7 4-2 3-3.5-1-1.4-3.5-.1-4.5.8C9 1.9 9 .9 8 1c-1 .1-2 1.5-2.3 2.8 0 0 0-.7-.7-.8-.7-.1-1.6.5-2 1.5Z"}),(0,s.jsx)("path",{d:"M10.5 11v4m-2-2h4"})]})}},86377:function(e,t,n){n.d(t,{h:function(){return a}});var s=n(27573);let a=e=>{let{size:t=32,className:n}=e;return(0,s.jsxs)("svg",{width:t,height:t,viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:n,children:[(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.0121 5.17898C14.6561 5.0615 15.3204 5 16 5C22.0751 5 27 9.92487 27 16C27 22.0751 22.0751 27 16 27C15.8588 27 15.7183 26.9973 15.5785 26.9921C15.0266 26.9713 14.5624 27.4019 14.5416 27.9538C14.5209 28.5057 14.9514 28.9699 15.5033 28.9907C15.6681 28.9969 15.8337 29 16 29C23.1797 29 29 23.1797 29 16C29 8.8203 23.1797 3 16 3C15.1995 3 14.4151 3.07246 13.6532 3.21144C13.1099 3.31055 12.7498 3.83134 12.8489 4.37466C12.948 4.91798 13.4688 5.27808 14.0121 5.17898ZM10.6328 5.5356C10.556 5.24904 10.396 4.99168 10.1729 4.79607C9.94988 4.60046 9.67384 4.47539 9.3797 4.43667C9.08557 4.39794 8.78656 4.44731 8.52048 4.57852C8.25441 4.70974 8.03321 4.91691 7.88488 5.17383C7.73654 5.43076 7.66772 5.7259 7.68713 6.02194C7.70653 6.31797 7.81328 6.60161 7.99389 6.83697C8.17449 7.07234 8.42083 7.24886 8.70176 7.34423C8.98268 7.43959 9.28558 7.4495 9.57214 7.37272C9.95641 7.26976 10.284 7.01836 10.483 6.67383C10.6819 6.3293 10.7358 5.91987 10.6328 5.5356ZM6.60273 8.85853C6.82578 9.05414 6.98581 9.3115 7.0626 9.59807C7.16556 9.98234 7.11166 10.3918 6.91274 10.7363C6.71383 11.0808 6.3862 11.3322 6.00194 11.4352C5.71537 11.512 5.41248 11.5021 5.13155 11.4067C4.85062 11.3113 4.60428 11.1348 4.42368 10.8994C4.24307 10.6641 4.13632 10.3804 4.11692 10.0844C4.09752 9.78836 4.16633 9.49322 4.31467 9.2363C4.46301 8.97937 4.6842 8.7722 4.95027 8.64099C5.21635 8.50977 5.51536 8.4604 5.8095 8.49913C6.10363 8.53785 6.37968 8.66293 6.60273 8.85853ZM4.86963 13.9817C5.09268 14.1773 5.25272 14.4346 5.3295 14.7212C5.43247 15.1055 5.37857 15.5149 5.17965 15.8594C4.98074 16.2039 4.65311 16.4553 4.26884 16.5583C3.98228 16.6351 3.67938 16.6252 3.39846 16.5298C3.11753 16.4344 2.87119 16.2579 2.69059 16.0226C2.50998 15.7872 2.40323 15.5036 2.38383 15.2075C2.36442 14.9115 2.43324 14.6163 2.58158 14.3594C2.72991 14.1025 2.95111 13.8953 3.21718 13.7641C3.48326 13.6329 3.78227 13.5835 4.07641 13.6223C4.37054 13.661 4.64658 13.786 4.86963 13.9817Z",fill:"currentColor"}),(0,s.jsx)("path",{d:"M15 9.00012V16.0001C15 16.2653 15.1054 16.5197 15.2929 16.7072C15.4804 16.8948 15.7348 17.0001 16 17.0001H23C23.2652 17.0001 23.5196 16.8948 23.7071 16.7072C23.8946 16.5197 24 16.2653 24 16.0001C24 15.7349 23.8946 15.4806 23.7071 15.293C23.5196 15.1055 23.2652 15.0001 23 15.0001H17V9.00012C17 8.73491 16.8946 8.48055 16.7071 8.29302C16.5196 8.10548 16.2652 8.00012 16 8.00012C15.7348 8.00012 15.4804 8.10548 15.2929 8.29302C15.1054 8.48055 15 8.73491 15 9.00012Z",fill:"currentColor"}),(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 21C8 20.4477 7.55228 20 7 20C6.44772 20 6 20.4477 6 21V24H3C2.44772 24 2 24.4477 2 25C2 25.5523 2.44772 26 3 26H6V29C6 29.5523 6.44772 30 7 30C7.55228 30 8 29.5523 8 29V26H11C11.5523 26 12 25.5523 12 25C12 24.4477 11.5523 24 11 24H8V21Z",fill:"currentColor"})]})}},28386:function(e,t,n){n.d(t,{J:function(){return s}});let s={snappyOut:[.19,1,.22,1],inOutQuart:[.77,0,.175,1]}},42147:function(e,t,n){var s,a;n.d(t,{b:function(){return s}}),(a=s||(s={})).CREATE="create",a.CREATE_MANUALLY="create_manually",a.LIST="list",a.EDIT="edit"}}]);